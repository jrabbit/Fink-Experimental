Package: libgegl0.0.0-shlibs
Version: 0.0.16
Revision: 1

Source: ftp://ftp.gimp.org/pub/gegl/0.0/gegl-%v.tar.bz2
Source-MD5: fd49cb219ece97f4677554db4a2c02d1

BuildDepends: <<
	autoconf (>= 2.60),
	automake1.9,
	cairo (>= 1.2-1),
	expat1,
	fink (>= 0.28.0-1),
	fontconfig2-dev (>= 2.4.1-1),
	freetype219 (>= 2.3.5-1),
	glib2-dev (>= 2.14.0-1),
	graphviz,
	gtk+2-dev (>= 2.12.8-1),
	gtk-doc (>= 1.8-1),
	intltool (>= 0.36.0-1),
	libavcodec-dev (>= 0.4.20071217-1),
	libavformat-dev (>= 0.4.20071217-1),
	libbabl0.0.0-dev (>= 0.0.20-1),
	libgettext3-dev,
	libiconv-dev,
	libjpeg,
	libpng3,
	libtool14,
	lua51,
	lua51-dev,
	openexr-dev,
	pango1-xft2-ft219-dev (>= 1.18.2-1),
	pkgconfig (>= 0.21-1),
	sdl,
	x11-dev,
	xft2-dev
<<
Depends: <<
	glib2-shlibs (>= 2.14.0-1),
	libbabl0.0.0-shlibs (>= 0.0.20-1),
	libgettext3-shlibs,
	libiconv
<<

PatchFile: %n.patch
PatchFile-MD5: 91b0cdb3269fb14f6c5444cc8f109588

#SetCPPFLAGS: -I%p/lib/pango-ft219/include/pango-1.0 -I%p/lib/pango-ft219/include -I%p/lib/freetype219/include/freetype2 -I%p/lib/freetype219/include -I%p/lib/fontconfig2/include
#SetLDFLAGS: -L%p/lib/pango-ft219/lib -L%p/lib/freetype219/lib -L%p/lib/fontconfig2/lib
SetCFLAGS: -Os
ConfigureParams: --disable-dependency-tracking --enable-static
CompileScript: <<
	autoreconf -f -i
	PKG_CONFIG_PATH="%p/lib/pango-ft219/lib/pkgconfig:%p/lib/fontconfig2/lib/pkgconfig:%p/lib/freetype219/lib/pkgconfig:$PKG_CONFIG_PATH" ac_cv_path_ASCIIDOC=no ac_cv_path_W3M=no DSYMUTIL=: ./configure %c
	make
<<
InstallScript: make install DESTDIR=%d
DocFiles: AUTHORS COPYING* ChangeLog NEWS README

Shlibs: %p/lib/libgegl-0.0.0.dylib 17.0.0 %n (>= 0.0.16-1)

SplitOff: <<
	Package: libgegl0.0.0-dev
	Depends: %N (= %v-%r)
	BuildDependsOnly: true
	Files: <<
		include
		lib/libgegl-0.0.{a,dylib,la}
		lib/pkgconfig
	<<
	DocFiles: AUTHORS COPYING* ChangeLog NEWS README
<<

DescPort: <<
	Need to clean up -I flag usage. See:
	???
	Remove un-needed -ldl. See:
	http://bugzilla.gnome.org/show_bug.cgi?id=519796
<<
DescPackaging: <<
	Build fails if .dSYM is created for plugins: docs/gallery
	runs gegl, which recursively loads .so files. The foo.so in
	foo.so.dSYM is not a "normal" dlopen()able bundle, so gegl
	crashes. Could avoid using -g or could avoid running dsymutil.

#	Uses a subdir for the plugin interface version (of which
#	the lib itself has an interface subversion), so put the
#	plugins in a separate package. Not ideal to have the
#	plugins:Depends:shlibs (seems bad if libbabl0.0.1 loads
#	babl-0.0 plugins linked against libbabl0.0.0), but otherwise
#	consumers need to know to Depends on the plugins package.
#	Upstream does some pretty convoluted versioning, so we'll
#	just keep everything in -shlibs until it ceases to work.
<<
Description: Generic graph based-image processing lib
License: LGPL
Homepage: http://www.gegl.org
Maintainer: Daniel Macks <dmacks@netspace.org>
