diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/calendar/backends/caldav/Makefile.in evolution-data-server-2.24.4.1/calendar/backends/caldav/Makefile.in
--- evolution-data-server-2.24.4.1.orig/calendar/backends/caldav/Makefile.in	2009-02-02 10:31:49.000000000 -0500
+++ evolution-data-server-2.24.4.1/calendar/backends/caldav/Makefile.in	2009-02-03 01:36:42.000000000 -0500
@@ -346,7 +346,6 @@
 top_srcdir = @top_srcdir@
 weatherdatadir = @weatherdatadir@
 INCLUDES = \
-	$(EVOLUTION_CALENDAR_CFLAGS)				\
 	-I$(top_srcdir)						\
 	-I$(top_srcdir)/calendar                                \
 	-I$(top_builddir)/calendar                              \
@@ -354,6 +353,7 @@
 	-I$(top_builddir)/calendar/libical/src		        \
 	-I$(top_srcdir)/calendar/libical/src/libical	        \
 	-I$(top_builddir)/calendar/libical/src/libical	        \
+	$(EVOLUTION_CALENDAR_CFLAGS)				\
 	$(SOUP_CFLAGS)					        \
 	-DG_LOG_DOMAIN=\"e-cal-backend-caldav\"
 
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/calendar/libical/src/libical/icaltz-util.c evolution-data-server-2.24.4.1/calendar/libical/src/libical/icaltz-util.c
--- evolution-data-server-2.24.4.1.orig/calendar/libical/src/libical/icaltz-util.c	2009-01-19 22:28:34.000000000 -0500
+++ evolution-data-server-2.24.4.1/calendar/libical/src/libical/icaltz-util.c	2009-02-03 01:36:42.000000000 -0500
@@ -31,6 +31,8 @@
 #elif defined(__linux__)
 #include <byteswap.h>
 #include <endian.h>
+#elif defined(__APPLE__)
+#include <architecture/byte_order.h>
 #else
 #include <sys/endian.h>
 #endif
@@ -98,6 +100,8 @@
     else if (BYTE_ORDER == LITTLE_ENDIAN && sizeof (int) == 4)
 #ifdef __linux__
         return bswap_32 (*(const int *) ptr);
+#elif defined(__APPLE__)
+        return OSSwapBigToHostInt32(*(const int *) ptr);
 #else
          return bswap32 (*(const uint32_t *) ptr);
 #endif
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/configure evolution-data-server-2.24.4.1/configure
--- evolution-data-server-2.24.4.1.orig/configure	2009-02-02 10:14:43.000000000 -0500
+++ evolution-data-server-2.24.4.1/configure	2009-02-03 01:36:42.000000000 -0500
@@ -26045,7 +26045,7 @@
 #include <iconv.h>
 #include <stdlib.h>
 #include <string.h>
-#ifdef HAVE_GNU_GET_LIBC_VERSION
+#if 0
 #include <gnu/libc-version.h>
 #endif
 
@@ -26058,7 +26058,7 @@
 	size_t from_len = strlen (from), utf8_len = 20;
 	size_t utf8_real_len = strlen (utf8);
 
-#ifdef HAVE_GNU_GET_LIBC_VERSION
+#if 0
 	/* glibc 2.1.2's iconv is broken in hard to test ways. */
 	if (!strcmp (gnu_get_libc_version (), "2.1.2"))
 		exit (1);
@@ -29344,7 +29344,8 @@
 				msg_krb5="yes (Sun)"
 			fi
 		fi
-		KRB5_LDFLAGS="-L$with_krb5_libs $ac_cv_lib_kerberos5"
+		KRB5_CFLAGS=""
+		KRB5_LDFLAGS="$ac_cv_lib_kerberos5"
 		{ $as_echo "$as_me:$LINENO: result: msg_krb5" >&5
 $as_echo "msg_krb5" >&6; }
 	else
@@ -29897,15 +29898,15 @@
 
 		if test -z "$with_krb4_includes"; then
 			if test -f "$with_krb4/include/krb.h" -o -f "$with_krb4/include/port-sockets.h"; then
-				KRB4_CFLAGS="-I$with_krb4/include"
+				KRB4_CFLAGS=""
 			fi
 			if test -d "$with_krb4/include/kerberosIV"; then
 				KRB4_CFLAGS="$KRB4_CFLAGS -I$with_krb4/include/kerberosIV"
 			fi
 		else
-			KRB4_CFLAGS="-I$with_krb4_includes"
+			KRB4_CFLAGS=""
 		fi
-		KRB4_LDFLAGS="-L$with_krb4_libs $ac_cv_lib_kerberos4"
+		KRB4_LDFLAGS="$ac_cv_lib_kerberos4"
 
 		CFLAGS_save="$CFLAGS"
 		CFLAGS="$CFLAGS $KRB4_CFLAGS"
@@ -32360,15 +32361,7 @@
 $as_echo "$IDL_INCLUDES" >&6; }
 
 
-{ $as_echo "$as_me:$LINENO: checking for libgnomeui server directory" >&5
-$as_echo_n "checking for libgnomeui server directory... " >&6; }
-GNOMEUI_SERVERDIR="`$PKG_CONFIG --variable=libgnomeui_serverdir libgnomeui-2.0`"
-{ $as_echo "$as_me:$LINENO: result: $GNOMEUI_SERVERDIR" >&5
-$as_echo "$GNOMEUI_SERVERDIR" >&6; }
-
-cat >>confdefs.h <<_ACEOF
-#define GNOMEUI_SERVERDIR "$GNOMEUI_SERVERDIR"
-_ACEOF
+echo "Disabling check for libgnomeui-2.0: gnome_segv2 removed as of GNOME2.20"
 
 
 
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/libdb/dist/configure evolution-data-server-2.24.4.1/libdb/dist/configure
--- evolution-data-server-2.24.4.1.orig/libdb/dist/configure	2008-10-13 04:09:36.000000000 -0400
+++ evolution-data-server-2.24.4.1/libdb/dist/configure	2009-02-03 01:36:42.000000000 -0500
@@ -18815,7 +18815,7 @@
 
 
 
-for ac_func in _fstati64 clock_gettime directio gettimeofday getuid
+for ac_func in _fstati64 clock_gettime gettimeofday getuid
 do
 as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
 echo "$as_me:$LINENO: checking for $ac_func" >&5
@@ -18904,7 +18904,7 @@
 
 
 
-for ac_func in pstat_getdynamic sched_yield select strtoul sysconf yield
+for ac_func in sched_yield select strtoul sysconf yield
 do
 as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
 echo "$as_me:$LINENO: checking for $ac_func" >&5
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/servers/exchange/lib/Makefile.in evolution-data-server-2.24.4.1/servers/exchange/lib/Makefile.in
--- evolution-data-server-2.24.4.1.orig/servers/exchange/lib/Makefile.in	2009-02-02 10:31:57.000000000 -0500
+++ evolution-data-server-2.24.4.1/servers/exchange/lib/Makefile.in	2009-02-03 01:36:42.000000000 -0500
@@ -363,13 +363,13 @@
 weatherdatadir = @weatherdatadir@
 INCLUDES = \
 	-DCONNECTOR_PREFIX=\""$(prefix)"\"			\
+	-I$(top_srcdir)						\
+	-I$(top_srcdir)/servers/exchange/xntlm			\
 	$(LDAP_CFLAGS)						\
 	$(KRB5_CFLAGS)						\
 	$(SOUP_CFLAGS)						\
 	$(E_DATA_SERVER_CFLAGS)					\
-	$(E_DATA_SERVER_UI_CFLAGS)				\
-	-I$(top_srcdir)						\
-	-I$(top_srcdir)/servers/exchange/xntlm
+	$(E_DATA_SERVER_UI_CFLAGS)
 
 noinst_LTLIBRARIES = \
 	libexchange.la
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/servers/exchange/storage/Makefile.in evolution-data-server-2.24.4.1/servers/exchange/storage/Makefile.in
--- evolution-data-server-2.24.4.1.orig/servers/exchange/storage/Makefile.in	2009-02-02 10:31:57.000000000 -0500
+++ evolution-data-server-2.24.4.1/servers/exchange/storage/Makefile.in	2009-02-03 01:36:42.000000000 -0500
@@ -376,15 +376,15 @@
 	-DLIBDIR=\""$(datadir)"\"	 			\
 	-DCONNECTOR_LOCALEDIR=\""$(localedir)\""		\
 	-DCONNECTOR_GLADEDIR=\""$(gladedir)"\"			\
+	-I$(top_builddir)/servers/exchange/lib			\
+	-I$(top_srcdir)						\
+	-I$(top_srcdir)/servers/exchange/lib			\
+	-I$(top_srcdir)/servers/exchange/xntlm			\
 	$(KRB5_CFLAGS)						\
 	$(LDAP_CFLAGS)						\
 	$(SOUP_CFLAGS)						\
 	$(E_DATA_SERVER_CFLAGS)					\
-	$(E_DATA_SERVER_UI_CFLAGS)				\
-	-I$(top_builddir)/servers/exchange/lib			\
-	-I$(top_srcdir)						\
-	-I$(top_srcdir)/servers/exchange/lib			\
-	-I$(top_srcdir)/servers/exchange/xntlm
+	$(E_DATA_SERVER_UI_CFLAGS)
 
 lib_LTLIBRARIES = \
 	libexchange-storage-1.2.la
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/servers/google/libgdata/Makefile.in evolution-data-server-2.24.4.1/servers/google/libgdata/Makefile.in
--- evolution-data-server-2.24.4.1.orig/servers/google/libgdata/Makefile.in	2009-02-02 10:31:57.000000000 -0500
+++ evolution-data-server-2.24.4.1/servers/google/libgdata/Makefile.in	2009-02-05 14:30:05.000000000 -0500
@@ -353,8 +353,7 @@
 	-DG_LOG_DOMAIN=\"libgdata\"			\
 	-I$(top_srcdir)					\
 	-I$(top_builddir)				\
-	$(SOUP_CFLAGS)					\
-	$(E_DATA_SERVER_CFLAGS)
+	$(SOUP_CFLAGS)
 
 lib_LTLIBRARIES = libgdata-1.2.la
 libgdata_1_2_la_SOURCES = \
@@ -366,7 +365,6 @@
 	gdata-service-iface.h			
 
 libgdata_1_2_la_LIBADD = \
-	$(E_DATA_SERVER_LIBS)			\
 	$(SOUP_LIBS)
 
 libgdata_1_2_la_LDFLAGS = \
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/servers/google/libgdata/libgdata.pc.in evolution-data-server-2.24.4.1/servers/google/libgdata/libgdata.pc.in
--- evolution-data-server-2.24.4.1.orig/servers/google/libgdata/libgdata.pc.in	2008-10-13 04:08:15.000000000 -0400
+++ evolution-data-server-2.24.4.1/servers/google/libgdata/libgdata.pc.in	2009-02-05 14:36:02.000000000 -0500
@@ -5,9 +5,6 @@
 datarootdir=@datarootdir@
 datadir=@datadir@
 
-idldir=@idldir@
-IDL_INCLUDES=-I${idldir} @IDL_INCLUDES@
-
 privincludedir=@privincludedir@
 
 Name: libgdata
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/servers/google/libgdata-google/Makefile.in evolution-data-server-2.24.4.1/servers/google/libgdata-google/Makefile.in
--- evolution-data-server-2.24.4.1.orig/servers/google/libgdata-google/Makefile.in	2009-02-02 10:31:57.000000000 -0500
+++ evolution-data-server-2.24.4.1/servers/google/libgdata-google/Makefile.in	2009-02-05 14:30:13.000000000 -0500
@@ -355,8 +355,7 @@
 	-I$(top_srcdir)						\
 	-I$(top_builddir)					\
 	-I$(top_srcdir)/servers/google/libgdata			\
-	$(SOUP_CFLAGS)						\
-	$(E_DATA_SERVER_CFLAGS)
+	$(SOUP_CFLAGS)
 
 lib_LTLIBRARIES = libgdata-google-1.2.la
 libgdata_google_1_2_la_SOURCES = \
@@ -365,7 +364,6 @@
 
 libgdata_google_1_2_la_LIBADD = \
 	$(top_builddir)/servers/google/libgdata/libgdata-1.2.la	\
-	$(E_DATA_SERVER_LIBS)					\
 	$(SOUP_LIBS)
 
 libgdata_google_1_2_la_LDFLAGS = \
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/servers/google/libgdata-google/libgdata-google.pc.in evolution-data-server-2.24.4.1/servers/google/libgdata-google/libgdata-google.pc.in
--- evolution-data-server-2.24.4.1.orig/servers/google/libgdata-google/libgdata-google.pc.in	2008-10-13 04:08:14.000000000 -0400
+++ evolution-data-server-2.24.4.1/servers/google/libgdata-google/libgdata-google.pc.in	2009-02-05 14:35:43.000000000 -0500
@@ -5,14 +5,12 @@
 datarootdir=@datarootdir@
 datadir=@datadir@
 
-idldir=@idldir@
-IDL_INCLUDES=-I${idldir} @IDL_INCLUDES@
-
 privincludedir=@privincludedir@
 
 Name: libgdata-google
 Description: Client library for accessing google POA through SOAP interface
 Version: @VERSION@
 Requires: libsoup-2.4 >= @LIBSOUP_REQUIRED@ 
+Requires.private: libgdata
 Libs: -L${libdir} -lgdata-google-1.2
-Cflags: -I${privincludedir}/google/libgdata -I${privincludedir}/google/libgdata-google
+Cflags: -I${privincludedir}/google/libgdata-google
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/src/server.c evolution-data-server-2.24.4.1/src/server.c
--- evolution-data-server-2.24.4.1.orig/src/server.c	2008-10-13 04:07:57.000000000 -0400
+++ evolution-data-server-2.24.4.1/src/server.c	2009-02-03 01:36:42.000000000 -0500
@@ -90,9 +90,7 @@
 static void
 gnome_segv_handler (int signo)
 {
-	const char *gnome_segv_path;
 	static int in_segv = 0;
-	char *exec;
 
 	if (pthread_self() != main_thread) {
 		/* deadlock intentionally in the sub-threads */
@@ -110,12 +108,7 @@
                 _exit (1);
         }
 
-	gnome_segv_path = GNOMEUI_SERVERDIR "/gnome_segv2";
-
-	exec = g_strdup_printf ("%s \"" PACKAGE "-" BASE_VERSION "\" %d \"" VERSION "\"",
-				gnome_segv_path, signo);
-	system (exec);
-	g_free (exec);
+	fprintf (stderr, "Going down on segv (signo=%d)\n", signo);
 
 	_exit(1);
 }
