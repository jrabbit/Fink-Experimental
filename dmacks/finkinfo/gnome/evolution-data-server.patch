diff -Nurd -x'*~' evolution-data-server-2.24.2.orig/calendar/backends/caldav/Makefile.in evolution-data-server-2.24.2/calendar/backends/caldav/Makefile.in
--- evolution-data-server-2.24.2.orig/calendar/backends/caldav/Makefile.in	2008-11-20 00:07:26.000000000 -0500
+++ evolution-data-server-2.24.2/calendar/backends/caldav/Makefile.in	2008-12-04 23:31:29.000000000 -0500
@@ -365,7 +365,6 @@
 top_srcdir = @top_srcdir@
 weatherdatadir = @weatherdatadir@
 INCLUDES = \
-	$(EVOLUTION_CALENDAR_CFLAGS)				\
 	-I$(top_srcdir)						\
 	-I$(top_srcdir)/calendar                                \
 	-I$(top_builddir)/calendar                              \
@@ -373,6 +372,7 @@
 	-I$(top_builddir)/calendar/libical/src		        \
 	-I$(top_srcdir)/calendar/libical/src/libical	        \
 	-I$(top_builddir)/calendar/libical/src/libical	        \
+	$(EVOLUTION_CALENDAR_CFLAGS)				\
 	$(SOUP_CFLAGS)					        \
 	-DG_LOG_DOMAIN=\"e-cal-backend-caldav\"
 
diff -Nurd -x'*~' evolution-data-server-2.24.2.orig/calendar/libical/src/libical/icaltz-util.c evolution-data-server-2.24.2/calendar/libical/src/libical/icaltz-util.c
--- evolution-data-server-2.24.2.orig/calendar/libical/src/libical/icaltz-util.c	2008-10-13 04:11:30.000000000 -0400
+++ evolution-data-server-2.24.2/calendar/libical/src/libical/icaltz-util.c	2008-12-04 23:31:29.000000000 -0500
@@ -23,6 +23,8 @@
 #include <string.h>
 #if defined(sun) && defined(__SVR4)
 #include <sys/byteorder.h>
+#elif defined(__APPLE__)
+#include <architecture/byte_order.h>
 #else
 #ifdef _WIN32
 #define BIG_ENDIAN 'B'
@@ -96,8 +98,12 @@
     if ((BYTE_ORDER == BIG_ENDIAN) && sizeof (int) == 4)
         return *(const int *) ptr;
     else if (BYTE_ORDER == LITTLE_ENDIAN && sizeof (int) == 4)
+#ifdef __APPLE__
+        return OSSwapBigToHostInt32(*(const int *) ptr);
+#else
         return bswap_32 (*(const int *) ptr);
 #endif
+#endif
 	else
 	{
 		const unsigned char *p = ptr;
@@ -112,6 +118,9 @@
 	}
 }
 
+#define ntohl(x)        OSSwapBigToHostInt32(x)
+#define htonl(x)        OSSwapHostToBigInt32(x)
+
 static char *
 zname_from_stridx (char *str, long int idx) 
 {
diff -Nurd -x'*~' evolution-data-server-2.24.2.orig/configure evolution-data-server-2.24.2/configure
--- evolution-data-server-2.24.2.orig/configure	2008-11-20 00:07:22.000000000 -0500
+++ evolution-data-server-2.24.2/configure	2008-12-04 23:37:02.000000000 -0500
@@ -25962,7 +25963,7 @@
 #include <iconv.h>
 #include <stdlib.h>
 #include <string.h>
-#ifdef HAVE_GNU_GET_LIBC_VERSION
+#if 0
 #include <gnu/libc-version.h>
 #endif
 
@@ -25975,7 +25976,7 @@
 	size_t from_len = strlen (from), utf8_len = 20;
 	size_t utf8_real_len = strlen (utf8);
 
-#ifdef HAVE_GNU_GET_LIBC_VERSION
+#if 0
 	/* glibc 2.1.2's iconv is broken in hard to test ways. */
 	if (!strcmp (gnu_get_libc_version (), "2.1.2"))
 		exit (1);
@@ -32277,15 +32278,7 @@
 $as_echo "$IDL_INCLUDES" >&6; }
 
 
-{ $as_echo "$as_me:$LINENO: checking for libgnomeui server directory" >&5
-$as_echo_n "checking for libgnomeui server directory... " >&6; }
-GNOMEUI_SERVERDIR="`$PKG_CONFIG --variable=libgnomeui_serverdir libgnomeui-2.0`"
-{ $as_echo "$as_me:$LINENO: result: $GNOMEUI_SERVERDIR" >&5
-$as_echo "$GNOMEUI_SERVERDIR" >&6; }
-
-cat >>confdefs.h <<_ACEOF
-#define GNOMEUI_SERVERDIR "$GNOMEUI_SERVERDIR"
-_ACEOF
+echo "Disabling check for libgnomeui-2.0: gnome_segv2 removed as of GNOME2.20"
 
 
 
diff -Nurd -x'*~' evolution-data-server-2.24.2.orig/libdb/dist/configure evolution-data-server-2.24.2/libdb/dist/configure
--- evolution-data-server-2.24.2.orig/libdb/dist/configure	2008-10-13 04:09:36.000000000 -0400
+++ evolution-data-server-2.24.2/libdb/dist/configure	2008-12-04 23:31:30.000000000 -0500
@@ -18815,7 +18815,7 @@
 
 
 
-for ac_func in _fstati64 clock_gettime directio gettimeofday getuid
+for ac_func in _fstati64 clock_gettime gettimeofday getuid
 do
 as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
 echo "$as_me:$LINENO: checking for $ac_func" >&5
@@ -18904,7 +18904,7 @@
 
 
 
-for ac_func in pstat_getdynamic sched_yield select strtoul sysconf yield
+for ac_func in sched_yield select strtoul sysconf yield
 do
 as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
 echo "$as_me:$LINENO: checking for $ac_func" >&5
diff -Nurd -x'*~' evolution-data-server-2.24.2.orig/servers/exchange/lib/Makefile.in evolution-data-server-2.24.2/servers/exchange/lib/Makefile.in
--- evolution-data-server-2.24.2.orig/servers/exchange/lib/Makefile.in	2008-11-20 00:07:34.000000000 -0500
+++ evolution-data-server-2.24.2/servers/exchange/lib/Makefile.in	2008-12-04 23:31:30.000000000 -0500
@@ -382,13 +382,13 @@
 weatherdatadir = @weatherdatadir@
 INCLUDES = \
 	-DCONNECTOR_PREFIX=\""$(prefix)"\"			\
+	-I$(top_srcdir)						\
+	-I$(top_srcdir)/servers/exchange/xntlm			\
 	$(LDAP_CFLAGS)						\
 	$(KRB5_CFLAGS)						\
 	$(SOUP_CFLAGS)						\
 	$(E_DATA_SERVER_CFLAGS)					\
-	$(E_DATA_SERVER_UI_CFLAGS)				\
-	-I$(top_srcdir)						\
-	-I$(top_srcdir)/servers/exchange/xntlm
+	$(E_DATA_SERVER_UI_CFLAGS)
 
 noinst_LTLIBRARIES = \
 	libexchange.la
diff -Nurd -x'*~' evolution-data-server-2.24.2.orig/servers/exchange/lib/e2k-autoconfig.c evolution-data-server-2.24.2/servers/exchange/lib/e2k-autoconfig.c
--- evolution-data-server-2.24.2.orig/servers/exchange/lib/e2k-autoconfig.c	2008-10-13 04:08:12.000000000 -0400
+++ evolution-data-server-2.24.2/servers/exchange/lib/e2k-autoconfig.c	2008-12-04 23:36:00.000000000 -0500
@@ -43,6 +43,7 @@
 #ifndef G_OS_WIN32
 #include <netinet/in.h>
 #include <arpa/nameser.h>
+#include <arpa/nameser_compat.h>
 #include <resolv.h>
 #else
 #include <winsock2.h>
diff -Nurd -x'*~' evolution-data-server-2.24.2.orig/servers/exchange/storage/Makefile.in evolution-data-server-2.24.2/servers/exchange/storage/Makefile.in
--- evolution-data-server-2.24.2.orig/servers/exchange/storage/Makefile.in	2008-11-20 00:07:34.000000000 -0500
+++ evolution-data-server-2.24.2/servers/exchange/storage/Makefile.in	2008-12-04 23:33:31.000000000 -0500
@@ -395,15 +395,15 @@
 	-DLIBDIR=\""$(datadir)"\"	 			\
 	-DCONNECTOR_LOCALEDIR=\""$(localedir)\""		\
 	-DCONNECTOR_GLADEDIR=\""$(gladedir)"\"			\
+	-I$(top_builddir)/servers/exchange/lib			\
+	-I$(top_srcdir)						\
+	-I$(top_srcdir)/servers/exchange/lib			\
+	-I$(top_srcdir)/servers/exchange/xntlm			\
 	$(KRB5_CFLAGS)						\
 	$(LDAP_CFLAGS)						\
 	$(SOUP_CFLAGS)						\
 	$(E_DATA_SERVER_CFLAGS)					\
-	$(E_DATA_SERVER_UI_CFLAGS)				\
-	-I$(top_builddir)/servers/exchange/lib			\
-	-I$(top_srcdir)						\
-	-I$(top_srcdir)/servers/exchange/lib			\
-	-I$(top_srcdir)/servers/exchange/xntlm
+	$(E_DATA_SERVER_UI_CFLAGS)
 
 lib_LTLIBRARIES = \
 	libexchange-storage-1.2.la
diff -Nurd -x'*~' evolution-data-server-2.24.2.orig/src/server.c evolution-data-server-2.24.2/src/server.c
--- evolution-data-server-2.24.2.orig/src/server.c	2008-10-13 04:07:57.000000000 -0400
+++ evolution-data-server-2.24.2/src/server.c	2008-12-04 23:34:33.000000000 -0500
@@ -90,9 +90,7 @@
 static void
 gnome_segv_handler (int signo)
 {
-	const char *gnome_segv_path;
 	static int in_segv = 0;
-	char *exec;
 
 	if (pthread_self() != main_thread) {
 		/* deadlock intentionally in the sub-threads */
@@ -110,12 +108,7 @@
                 _exit (1);
         }
 
-	gnome_segv_path = GNOMEUI_SERVERDIR "/gnome_segv2";
-
-	exec = g_strdup_printf ("%s \"" PACKAGE "-" BASE_VERSION "\" %d \"" VERSION "\"",
-				gnome_segv_path, signo);
-	system (exec);
-	g_free (exec);
+	frintf (stderr, "Going down on segv (signo=%d)\n", signo);
 
 	_exit(1);
 }
