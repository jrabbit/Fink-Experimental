diff -Nurd -x'*~' libassa-3.4.2.orig/assa/Address.h libassa-3.4.2/assa/Address.h
--- libassa-3.4.2.orig/assa/Address.h	2006-07-19 22:13:13.000000000 -0400
+++ libassa-3.4.2/assa/Address.h	2007-01-02 20:10:31.000000000 -0500
@@ -13,9 +13,9 @@
 #define ADDRESS_H
 
 #if !defined (WIN32)
+#  include <sys/types.h>
 #  include <netinet/in.h>
 #  include <netdb.h>
-#  include <sys/types.h>
 #  include <sys/socket.h>
 #  include <netinet/in.h>
 #  include <arpa/inet.h>		// addresses handling
diff -Nurd -x'*~' libassa-3.4.2.orig/assa/GenServer.cpp libassa-3.4.2/assa/GenServer.cpp
--- libassa-3.4.2.orig/assa/GenServer.cpp	2006-07-19 22:13:13.000000000 -0400
+++ libassa-3.4.2/assa/GenServer.cpp	2007-01-02 19:57:32.000000000 -0500
@@ -183,8 +183,7 @@
 	
     ignore_act.register_action( SIGPIPE );
     ignore_act.register_action( SIGCHLD );
-#if !(defined (__FreeBSD__) || defined(__FreeBSD_kernel__) \
-	|| defined (__NetBSD__))
+#if 0
     ignore_act.register_action( SIGCLD );
 #endif
     ignore_act.register_action( SIGALRM );
diff -Nurd -x'*~' libassa-3.4.2.orig/assa/Handlers.h libassa-3.4.2/assa/Handlers.h
--- libassa-3.4.2.orig/assa/Handlers.h	2006-07-19 22:13:13.000000000 -0400
+++ libassa-3.4.2/assa/Handlers.h	2007-01-02 19:54:31.000000000 -0500
@@ -32,7 +32,7 @@
  */
 
 
-#if defined (__FreeBSD__) || defined(__FreeBSD_kernel__) || defined (__NetBSD__)
+#if defined (__FreeBSD__) || defined(__FreeBSD_kernel__) || defined (__NetBSD__) || 1
 #   define ASSAIOSIG SIGIO
 #else
 #   define ASSAIOSIG SIGPOLL
diff -Nurd -x'*~' libassa-3.4.2.orig/assa/Socket.cpp libassa-3.4.2/assa/Socket.cpp
--- libassa-3.4.2.orig/assa/Socket.cpp	2006-09-24 13:35:33.000000000 -0400
+++ libassa-3.4.2/assa/Socket.cpp	2007-01-02 18:54:43.000000000 -0500
@@ -28,6 +28,7 @@
 #  define O_NONBLOCK    04000
 typedef unsigned int socklen_t;
 #endif
+#include <sys/aio.h>
 
 #include "assa/Socket.h"
 #include "assa/XDRHack.h"
diff -Nurd -x'*~' libassa-3.4.2.orig/assa/Socket.h libassa-3.4.2/assa/Socket.h
--- libassa-3.4.2.orig/assa/Socket.h	2006-07-25 20:19:27.000000000 -0400
+++ libassa-3.4.2/assa/Socket.h	2007-01-02 18:54:22.000000000 -0500
@@ -28,9 +28,7 @@
 #include <unistd.h>
 #include <fcntl.h>				// for fcntl(2)
 
-#ifdef linux
 #  include <sys/ioctl.h>		// ioctl(2)
-#endif
 
 #ifdef sun						// ioctl(2)
 #  include <unistd.h>
diff -Nurd -x'*~' libassa-3.4.2.orig/tests/Makefile.in libassa-3.4.2/tests/Makefile.in
--- libassa-3.4.2.orig/tests/Makefile.in	2006-08-19 22:35:59.000000000 -0400
+++ libassa-3.4.2/tests/Makefile.in	2007-01-02 20:30:51.000000000 -0500
@@ -314,7 +314,8 @@
 CCDEPMODE = @CCDEPMODE@
 CFLAGS = @CFLAGS@
 CPP = @CPP@
-CPPFLAGS = -I$(top_srcdir)
+CPPFLAGS = @CPPFLAGS@
+AM_CPPFLAGS = -I$(top_srcdir)
 CXX = @CXX@
 CXXCPP = @CXXCPP@
 CXXDEPMODE = @CXXDEPMODE@
@@ -343,7 +344,8 @@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-LDFLAGS = -static @WIN32_EXTRA_LDFLAGS@
+LDFLAGS = @LDFLAGS@
+AM_LDFLAGS = @WIN32_EXTRA_LDFLAGS@
 LIBASSA_SO_VERSION = @LIBASSA_SO_VERSION@
 LIBOBJS = @LIBOBJS@
 LIBRPC = @LIBRPC@
diff -Nurd -x'*~' libassa-3.4.2.orig/utils/Makefile.in libassa-3.4.2/utils/Makefile.in
--- libassa-3.4.2.orig/utils/Makefile.in	2006-08-19 22:35:59.000000000 -0400
+++ libassa-3.4.2/utils/Makefile.in	2007-01-02 20:34:04.000000000 -0500
@@ -134,7 +134,8 @@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-LDFLAGS = -static
+LDFLAGS = @LDFLAGS@
+AM_LDFLAGS = -static
 LIBASSA_SO_VERSION = @LIBASSA_SO_VERSION@
 LIBOBJS = @LIBOBJS@
 LIBRPC = @LIBRPC@
