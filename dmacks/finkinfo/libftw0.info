Package: libftw0
Version: 0.1
Revision: 1
Type: nosource
Patch: %n.patch
Depends: %n-shlibs (= %v-%r)

PatchScript: sed -n '4,20p' ftw.c > LICENSE
CompileScript: <<
  gcc -fno-common -I. -c ftw.c
  ar r libftw.a ftw.o
  ranlib libftw.a
  gcc -dynamiclib -install_name %p/lib/libftw.0.dylib -compatibility_version 1 -current_version 1 -o libftw.0.dylib ftw.o
<<
InstallScript: <<
  install -d -m 0755 %i/include %i/lib
  install -m 0644 ftw.h %i/include
  install -m 0644 libftw.0.dylib libftw.a %i/lib
  ln -s libftw.0.dylib %i/lib/libftw.dylib
<<

BuildDependsOnly: true
DocFiles: LICENSE

SplitOff: <<
  Package: %N-shlibs
  Files: lib/libftw.*.dylib
  Shlibs: %p/lib/libftw.0.dylib 1.0.0 %n (>= 0.1-1)
  DocFiles: LICENSE
<<

Description: Compatibility for glibc ftw calls
DescDetail: <<
  ftw is not present on OS X until 10.4 (nor on NetBSD), and is
  reported to be non-functional on 10.4. OS X and NetBSD have fts
  instead, but its functions are not directly compatible with ftw's.
  This package contains the BSD implementation of the ftw() function
  but not the nftw() function.
<<
DescUsage: <<
  Pass -lftw to your compiler/linker in order to access this library.
<<
DescPort: <<
  Ripped off of vasi's apt-ftparchive package. That header declared a
  nftw fuctnion but the .c did not implement it, so we'll just replace
  the unresolved declaration with a compile-time error if someone uses
  it.
<<
License: BSD
Maintainer: Daniel Macks <dmacks@netspace.org>
Homepage: http://packages.qa.debian.org/a/apt.html
