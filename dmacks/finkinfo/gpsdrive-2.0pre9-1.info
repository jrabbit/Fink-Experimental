Package: gpsdrive
Version: 2.0pre9
Revision: 1
Description: GPS-based navigation tool
DescDetail: <<
GpsDrive is a car (bike, ship, plane) navigation system. GpsDrive
displays your position provided from your NMEA capable GPS receiver on
a zoomable map, the map file is autoselected depending of the position
and prefered scale. Speech output is supported if the "festival"
software is running. The maps are autoselected for best resolution
depending of your position and can be downloaded from Internet. All
Garmin GPS reveiver with a serial output should be usable, also other
GPS receiver which supports NMEA protocol.

For optional MySQL support, install 'mysql-shlibs'.

Note that this is a beta release, so some things may not be working.
<<
DescUsage: <<
'man gpsdrive' to get started.

You may have to adjust the /dev path for communication with Garmin.

There are reports that mouse buttons do not work correctly. The
following was posted to the gpsdrive mailing list:

  From: Eduo <eduo@titan.ciateq.mx>
  Date: Sun, 15 Jun 2003 02:03:40 -0500 (CDT)
  Subject: Re: mac OS X: no right click
  
  On Sat, 14 Jun 2003, Stephen Proulx wrote:
  >
  > Since there's been a string of messages about compiling, I thought I'd
  > see if any of the mac users have the same problem as me with using
  > gpsdrive.
  >
  > I've compiled it for OS X 10.2 and can run it under Macintosh's X11
  > server, but using Option+click and Command+click does nothing.
  
  I had this problem and haven't been able to fix it, but I have found that
  with a two-button mouse you can actually duplicate the right and left
  button behaviours in a strange way: you have to click both buttons first
  the mouse clicking the one you want and without relasing clicking the
  second one, thus:
  
  left-click-hold, right click-release: left click
  right-click-hold, left click-release: right click
<<
DescPort: <<
#Apple Developer Tools is GNUish, so I don't know why __GNU_LIBRARY__
#isn't defined, but it needs to be so that GNU getopt.h (which this
#package needs) doesn't conflict with the unistd.h declaration of
#getopt().
(only needed for garmin (?), which I have disabled.)

Hack around ./configure not supporting --docdir (uncontrollably put
under $datadir as share/gpsdrive).

At run-time, gpsdrive checks if the MySQL client library is available,
and enables MySql support if so (mysql version 3/libversion 10).

gpsd.c does not compile (for me, anyway) under ccache (so the Fink
ccache-default package must not be installed while gpsdrive is being
built).

The version-info patch should be rolled into %f.patch as Makefile.in,
but for now we need to rerun auto* first so would have to put it in
Makefile.am; this isn't something for non-Darwin platforms, so I'd
rather make it obvious to myself that this isn't something to be
incorporated into the program but instead I must remember to keep this
in the Fink patch (or until I figure out what token to use for an
if...else in Makefile.am).

Modules get built, even if --disable-modules. And the names are
extensionless and of the wrong type (-module (as for 1.32-1) or
-bundle (as per ld manpage) give "Mach-O dynamically linked shared
library ppc". gmodule* wants them .so and "Mach-O bundle ppc" (1.32-1
gets this correct?!). Will also need to move them into lib/%n.

MySQL is broken (haven't gotten around to prepending the underscores).

Garmin disabled (lots of prototyping non-portability...should just
use sys/types.h for everyone, etc.)

Segfaults during start-up (after splash is displayed):
  Exception:  EXC_BAD_ACCESS (0x0001)
  Codes:      KERN_INVALID_ADDRESS (0x0001) at 0x63746564
  
  Thread 0 Crashed:
   #0   0x003c39b8 in gtk_box_pack_start
   #1   0x00001c34 in _start (crt.c:267)
   #2   0x00001ab4 in start
<<
Homepage: http://www.kraftvoll.at/software/index.shtml
License: GPL
Maintainer: Daniel Macks <dmacks@netspace.org>
Depends: x11, glib-shlibs, gtk+2-shlibs, gdk-pixbuf-shlibs, freetype2-shlibs, dlcompat-shlibs, pcre-shlibs (>= 3-1), pango1-shlibs, atk1-shlibs
BuildDepends: glib, gtk+2, gtk+2-dev, gdk-pixbuf, freetype2, dlcompat-dev, mysql-dev, pcre (>= 3-1), pcre-bin (>= 3-1), pkgconfig, pango1-dev, atk1, autoconf2.5, automake1.7
#Depends: libgnugetopt-shlibs
#BuildDepends: libgnugetopt
Suggests: mysql-shlibs
Source: mirror:custom:%n-%v.tar.gz
Source-MD5: f7e359de21e452cf1a47b3ca5aa87533
CustomMirror: <<
eur-DE: http://gpsdrive.dotdeguy.de/
eur-DE: http://gpsdrive.spoiledmeat.net/
eur-DE: http://gpsdrive.flugfunk.de/
eur-ES: http://gpsdrive.alumnosfdi.org/
nam-US: http://gpsdrive.teachlinux.com/
Primary: http://www.kraftvoll.at/software/
<<
PatchScript: <<
  sed 's|@PREFIX@|%p|g' < %a/%f.patch | patch -p1
  autoreconf || echo "Will try to continue anyway"
  automake || echo "Will try to continue anyway"
  cp src/Makefile.in src/Makefile.in.old
  sed -e 's/-version-info 2:0:0/-bundle -avoid-version/' src/Makefile.in.old > src/Makefile.in
<<
SetCPPFLAGS: -I/usr/X11R6/include -Dsocklen_t=int
#SetCPPFLAGS: -I%p/include/gnugetopt -D__GNU_LIBRARY__
SetLDFLAGS: -ldl
#SetLDFLAGS: -lgnugetopt
SetMACOSX_DEPLOYMENT_TARGET: 10.2
ConfigureParams: --mandir='${prefix}/share/man' --disable-garmin
CompileScript: <<
  ./configure %c
  make
<<
InstallScript: <<
  make prefix=%i install
  install -d -m 755 %i/share/doc/%n
  mv %i/share/%n/[A-Zcw]* %i/share/doc/%n
  rm %i/lib/*.a
  rm %i/lib/*.la
<<
