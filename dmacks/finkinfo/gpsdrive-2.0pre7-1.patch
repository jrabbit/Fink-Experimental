diff -Nurd -x'*~' gpsdrive-2.0pre7.orig/src/Makefile.in gpsdrive-2.0pre7/src/Makefile.in
--- gpsdrive-2.0pre7.orig/src/Makefile.in	2003-05-13 23:03:59.000000000 -0400
+++ gpsdrive-2.0pre7/src/Makefile.in	2003-05-13 23:05:42.000000000 -0400
@@ -164,9 +164,9 @@
 noinst_LIBRARIES = libgpsd.a
 lib_LTLIBRARIES = libfly.la libnautic.la
 libfly_la_SOURCES = fly.c
-libfly_la_LDFLAGS = -version-info 2:0:0
+libfly_la_LDFLAGS = -module -avoid-version
 libnautic_la_SOURCES = nautic.c
-libnautic_la_LDFLAGS = -version-info 2:0:0
+libnautic_la_LDFLAGS = -module -avoid-version
 libgpsd_a_SOURCES = netlib.c nmea_parse.c serial.c  tm.c em.c  \
 	gps.h version.h 
 
diff -Nurd -x'*~' gpsdrive-2.0pre7.orig/src/garmin_types.h gpsdrive-2.0pre7/src/garmin_types.h
--- gpsdrive-2.0pre7.orig/src/garmin_types.h	2003-05-13 23:03:59.000000000 -0400
+++ gpsdrive-2.0pre7/src/garmin_types.h	2003-05-13 23:11:26.000000000 -0400
@@ -24,37 +24,25 @@
 #include <vector>
 #include <map>
 #include <ctime>
+#include <sys/types.h>
 
 namespace garmin {
 
-#if macintosh
-#include <MacTypes.h>
+typedef u_int8_t uint8; // garmin char
+typedef int8_t sint8;
 
-typedef UInt8 uint8; // garmin char
-typedef SInt8 sint8;
+typedef u_int16_t uint16; // garmin int
+typedef int16_t sint16;
 
-typedef UInt16 uint16; // garmin int
-typedef SInt16 sint16;
+typedef u_int32_t uint32; // garmin long
+typedef int32_t sint32;
 
-typedef UInt32 uint32; // garmin long
-typedef SInt32 sint32;
+#if macintosh
 
 typedef Float32 float32; // garmin float
 typedef Float64 double64; // garmin double
 
-#endif
-#if linux // yeah at least this will work on my i386
-#include <linux/types.h>
-
-typedef unsigned char uint8; // garmin char
-typedef char sint8;
-
-typedef unsigned short uint16; // garmin int
-typedef short sint16;
-
-typedef unsigned long uint32; // garmin long
-typedef long sint32;
-
+#else
 typedef float float32; // garmin float
 typedef double double64; // garmin double
 
diff -Nurd -x'*~' gpsdrive-2.0pre7.orig/src/garmin_util.cpp gpsdrive-2.0pre7/src/garmin_util.cpp
--- gpsdrive-2.0pre7.orig/src/garmin_util.cpp	2003-05-13 23:03:59.000000000 -0400
+++ gpsdrive-2.0pre7/src/garmin_util.cpp	2003-05-13 23:12:01.000000000 -0400
@@ -29,8 +29,7 @@
 static const garmin::double64 pi = M_PI; // ???
 static const garmin::double64 maxval_sint32 = (garmin::double64) std::numeric_limits<garmin::sint32>::max();
 }
-#endif
-#if linux
+#else
 #include <limits.h> // g++ has no <limits> header?
 namespace garmin {
 static const garmin::double64 pi = M_PI;
diff -Nurd -x'*~' gpsdrive-2.0pre7.orig/src/gpsdrive.c gpsdrive-2.0pre7/src/gpsdrive.c
--- gpsdrive-2.0pre7.orig/src/gpsdrive.c	2003-05-13 23:03:59.000000000 -0400
+++ gpsdrive-2.0pre7/src/gpsdrive.c	2003-06-18 13:01:10.000000000 -0400
@@ -1402,7 +1402,8 @@
   10000000, 15000000, 20000000, 30000000, 50000000, 75000000
 };
 GtkWidget *l1, *l2, *l3, *l4, *l5, *l6, *l7, *l8, *mutebt, *sqlbt;
-GtkWidget *trackbt, *wpbt;
+GtkWidget *trackbt;
+GtkButton *wpbt;
 GtkWidget *bestmapbt, *maptogglebt, *topotogglebt, *savetrackbt;
 GtkWidget *importbt, *loadtrackbt, *radio1, *radio2, *scalerlbt, *scalerrbt;
 GtkWidget *setupbt;
@@ -1907,7 +1908,7 @@
     }
   if ((j != 11) && (j != 12))
     {
-      g_print ("\nGPRMC: wrong number of fields (%d)", j);
+      g_print ("\nGPRMC: wrong number of fields (%ld)", j);
       return;
     }
 
@@ -1918,7 +1919,7 @@
     {
       g_print ("\nRMC Fields:\n");
       for (i = 0; i < j; i++)
-	g_print ("\n%d:%s", i, field[i]);
+	g_print ("\n%ld:%s", i, field[i]);
     }
   sprintf (b, "%c%c:%c%c.%c%c ", field[1][0], field[1][1], field[1][2],
 	   field[1][3], field[1][4], field[1][5]);
@@ -8750,35 +8751,18 @@
 
   if (usesql)
     {
-      handle = dlopen ("libmysqlclient.so", RTLD_LAZY);
-      if (!handle)
-	handle = dlopen ("libmysqlclient.so.10", RTLD_LAZY);
-      if (!handle)
-	handle = dlopen ("/opt/lib/mysql/libmysqlclient.so.10", RTLD_LAZY);
-      if (!handle)
-	handle = dlopen ("/opt/mysql/lib/libmysqlclient.so.10", RTLD_LAZY);
-      if (!handle)
-	handle = dlopen ("/usr/lib/mysql/libmysqlclient.so.10", RTLD_LAZY);
-      if (!handle)
-	handle = dlopen ("/usr/lib/libmysqlclient.so.10", RTLD_LAZY);
-      if (!handle)
-	handle =
-	  dlopen ("/usr/local/lib/mysql/libmysqlclient.so.10", RTLD_LAZY);
-      if (!handle)
-	handle = dlopen ("/usr/local/mysql/libmysqlclient.so.10", RTLD_LAZY);
-      if (!handle)
-	handle = dlopen ("/usr/local/lib/libmysqlclient.so.10", RTLD_LAZY);
+      handle = dlopen ("@PREFIX@/lib/mysql/libmysqlclient.10.dylib", RTLD_LAZY);
 
       if (handle)
 	{
-	  dl_mysql_error = dlsym (handle, "mysql_error");
+	  dl_mysql_error = dlsym (handle, "_mysql_error");
 	  if ((error = dlerror ()) != NULL)
 	    {
 	      fprintf (stderr, "%s\n", error);
 	      usesql = FALSE;
 	    }
 
-	  dl_mysql_init = dlsym (handle, "mysql_init");
+	  dl_mysql_init = dlsym (handle, "_mysql_init");
 	  if ((error = dlerror ()) != NULL)
 	    {
 	      fprintf (stderr, "%s\n", error);
@@ -8786,7 +8770,7 @@
 	    }
 
 
-	  dl_mysql_real_connect = dlsym (handle, "mysql_real_connect");
+	  dl_mysql_real_connect = dlsym (handle, "_mysql_real_connect");
 	  if ((error = dlerror ()) != NULL)
 	    {
 	      fprintf (stderr, "%s\n", error);
@@ -8794,7 +8778,7 @@
 	    }
 
 
-	  dl_mysql_close = dlsym (handle, "mysql_close");
+	  dl_mysql_close = dlsym (handle, "_mysql_close");
 	  if ((error = dlerror ()) != NULL)
 	    {
 	      fprintf (stderr, "%s\n", error);
@@ -8802,7 +8786,7 @@
 	    }
 
 
-	  dl_mysql_query = dlsym (handle, "mysql_query");
+	  dl_mysql_query = dlsym (handle, "_mysql_query");
 	  if ((error = dlerror ()) != NULL)
 	    {
 	      fprintf (stderr, "%s\n", error);
@@ -8810,7 +8794,7 @@
 	    }
 
 
-	  dl_mysql_affected_rows = dlsym (handle, "mysql_affected_rows");
+	  dl_mysql_affected_rows = dlsym (handle, "_mysql_affected_rows");
 	  if ((error = dlerror ()) != NULL)
 	    {
 	      fprintf (stderr, "%s\n", error);
@@ -8818,7 +8802,7 @@
 	    }
 
 
-	  dl_mysql_store_result = dlsym (handle, "mysql_store_result");
+	  dl_mysql_store_result = dlsym (handle, "_mysql_store_result");
 	  if ((error = dlerror ()) != NULL)
 	    {
 	      fprintf (stderr, "%s\n", error);
@@ -8826,7 +8810,7 @@
 	    }
 
 
-	  dl_mysql_fetch_row = dlsym (handle, "mysql_fetch_row");
+	  dl_mysql_fetch_row = dlsym (handle, "_mysql_fetch_row");
 	  if ((error = dlerror ()) != NULL)
 	    {
 	      fprintf (stderr, "%s\n", error);
@@ -8834,7 +8818,7 @@
 	    }
 
 
-	  dl_mysql_free_result = dlsym (handle, "mysql_free_result");
+	  dl_mysql_free_result = dlsym (handle, "_mysql_free_result");
 	  if ((error = dlerror ()) != NULL)
 	    {
 	      fprintf (stderr, "%s\n", error);
@@ -8842,7 +8826,7 @@
 	    }
 
 
-	  dl_mysql_eof = dlsym (handle, "mysql_eof");
+	  dl_mysql_eof = dlsym (handle, "_mysql_eof");
 	  if ((error = dlerror ()) != NULL)
 	    {
 	      fprintf (stderr, "%s\n", error);
diff -Nurd -x'*~' gpsdrive-2.0pre7.orig/src/gpssql.c gpsdrive-2.0pre7/src/gpssql.c
--- gpsdrive-2.0pre7.orig/src/gpssql.c	2003-05-13 23:03:59.000000000 -0400
+++ gpsdrive-2.0pre7/src/gpssql.c	2003-06-18 12:43:27.000000000 -0400
@@ -118,7 +118,8 @@
 extern gchar homedir[500], mapdir[500];
 extern gdouble calcdist (gdouble longi, gdouble lati);
 extern gdouble calcdist2 (gdouble longi, gdouble lati);
-extern GtkWidget *trackbt, *wpbt;
+extern GtkWidget *trackbt;
+extern GtkButton *wpbt;
 
 gint wptotal = 0, wpselected = 0;
 
diff -Nurd -x'*~' gpsdrive-2.0pre7.orig/src/serial.c gpsdrive-2.0pre7/src/serial.c
--- gpsdrive-2.0pre7.orig/src/serial.c	2003-05-13 23:03:59.000000000 -0400
+++ gpsdrive-2.0pre7/src/serial.c	2003-05-13 23:13:49.000000000 -0400
@@ -6,6 +6,7 @@
 #include <sys/types.h>
 #include <sys/socket.h>
 #include <fcntl.h>
+#include <sys/ioctl.h>
 
 #if defined (HAVE_SYS_TERMIOS_H)
 #include <sys/termios.h>
