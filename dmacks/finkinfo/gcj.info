Package: gcj
Version: 3.4.1
Revision: 1
BuildDependsOnly: true
Source: mirror:gnu:gcc/gcc-%v/gcc-%v.tar.bz2
Source-MD5: 31b459062499f9f68d451db9cbf3205c
NoSourceDirectory: True
ConfigureParams: --enable-languages=java --infodir='${prefix}/share/info' --libexecdir='${prefix}/lib' --disable-shared
#BuildDepends: dejagnu
PatchScript: <<
 #!/bin/sh
 cd gcc-%v/gcc
 mv Makefile.in Makefile.in.orig
 sed 's|$(ALL_CPPFLAGS) $(INCLUDES)|$(INCLUDES) $(ALL_CPPFLAGS)|g' < Makefile.in.orig > Makefile.in
<<
CompileScript: <<
 #!/bin/sh
 mkdir darwin 
 cd darwin
 ../gcc-%v/configure %c
 make CFLAGS='-O' LIBCFLAGS='-g -O2' LIBCXXFLAGS='-g -O2 -fno-implicit-templates' profiledbootstrap
 cd gcc; make check-java
<<
InstallScript: <<
 #!/bin/sh
 cd darwin
 make install prefix=%i
 cd %i/bin
 /bin/rm -f gcc gccbug cpp gcov powerpc-apple*
# darwinvers=`/usr/bin/uname -v | cut -f1 -d":" | awk '{print $4}'`
# gccvers=`%i/bin/g77 -dumpversion | head -1 | cut -f4 -d" "`
# ln -s %p/lib/gcc/powerpc-apple-darwin${darwinvers}/${gccvers}/include/g2c.h %i/include/g2c.h
 /bin/rm -rf %i/share/locale %i/man
 /bin/rm -f %i/lib/charset.alias
 /bin/rm -f %i/share/info/gcc* %i/share/info/cpp*
 /bin/mv -f %i/lib/libiberty.a %i/lib/libiberty-gcj.a
<<
License: GPL
DocFiles: gcc-%v/gcc/f/ChangeLog gcc-%v/COPYING gcc-%v/COPYING.LIB
Description: GNU Java compiler
DescDetail: <<
<<
DescPort: <<
 This .info is based on that for g77-3.4.1-1 by Jeffrey Whitaker.
 For someone else's method, see:
   http://gcc.gnu.org/ml/gcc/2004-05/msg00443.html

 Installs gcj from the FSF gcc distribution.
 [dmacks says: installs in %p/lib/gcc/powerpc-apple-darwinX.Y.Z]
 [but for OS X 10.x.y, X varies with x and Y with y (Z=0) so   ]
 [different people get different .deb depending on OS version  ]

 This version does not install in /usr. It contains its own cc1 and
 libgcc.a installed in %p.
 [dmacks says: both g77 and gcj want to install cc1, etc.            ]
 [Should we have different "%n" dir somewhere in %p/lib/gcc for each?]

 libiberty.a moved to libiberty-gcj.a to avoid conflict with ddd.
 [dmacks says: does this mean need to patch other pkgs to linker flags?]

<<
DescUsage: <<
# If you get unresolved symbol '_saveFP', add -lcc_dynamic when linking.

 Does not support -framework argument, to link frameworks use -Wl flag
 (for example, to link vecLib use "-Wl,-framework -Wl,vecLib").

 No man page, use "info gcj".
<<
Homepage: http://gcc.gnu.org/onlinedocs/gcj/
Maintainer: Daniel Macks <dmacks@netspace.org>

