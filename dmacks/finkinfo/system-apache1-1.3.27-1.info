Package: system-apache1
Version: 1.3.27
Revision: 1
Type: bundle
Maintainer: Daniel Macks <dmacks@netspace.org>
Description: Placeholder for Apple's Apache webserver
DescDetail: <<
Install this package if you are using the Apache webserver that comes
with OS X. It will check whether the installation is okay and provide
the 'system-apache1' virtual package.

Note that this package merely confirms to Fink that the webserver that
came with the system is installed as expected. It does not start the
server daemon, nor does it check to see if you have manually installed
an alternate server that uses different filenames and locations (but
it does check for other Fink-installed servers).

It is up to you to make sure Apache is configured the way you want
(/etc/httpd), and then to start it (probably via the Personal Web
Sharing item in the System Preferences...Sharing... control) if you
wish to run the webserver.
<<
Conflicts: apache, apache2
PreInstScript: <<
  server=/usr/sbin/httpd
  controller=/usr/sbin/apachectl
  moddir=/usr/libexec/httpd
  conffile=/etc/httpd/httpd.conf
  missing=0
  for file in $server $controller $conffile; do
    if [ ! -f $file ]; then
      echo "Missing $file"
      missing=$(($missing+1))
    fi
  done
  for file in $moddir; do
    if [ ! -d $file ]; then
      echo "Missing $file"
      missing=$(($missing+1))
    fi
  done
  if [ $missing -ge 1 ]; then
    echo "Your Apache installation looks incomplete!"
    exit 1
  fi
  echo "You Apache installation looks OK."
  if [ `grep -c 'Apache/%v (Darwin)' $server` -eq 0 ]; then
    echo "Incorrect server version (found `strings $server | grep Darwin | head -1` expected %v)"
    exit 1
  fi
  echo "Server version string matches"
  exit 0
<<
