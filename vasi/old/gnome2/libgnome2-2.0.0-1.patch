diff -Naur libgnome-2.0.0/configure libgnome-new/configure
--- libgnome-2.0.0/configure	2002-06-06 17:39:11.000000000 -0400
+++ libgnome-new/configure	2002-06-12 05:07:55.000000000 -0400
@@ -5232,7 +5232,7 @@
     # FIXME: Relying on posixy $() will cause problems for
     #        cross-compilation, but unfortunately the echo tests do not
     #        yet detect zsh echo's removal of \ escapes.
-    archive_cmds='$nonopt $(test "x$module" = xyes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib $libobjs $deplibs$linker_flags -install_name $rpath/$soname $verstring'
+    archive_cmds='$nonopt $(test x$module = xyes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib $libobjs $deplibs$linker_flags $(test x$module = xyes || echo -install_name $rpath/$soname $verstring)'
     # We need to add '_' to the symbols in $export_symbols first
     #archive_expsym_cmds="$archive_cmds"' && strip -s $export_symbols'
     hardcode_direct=yes
diff -Naur libgnome-2.0.0/libgnome/gnome-config.c libgnome-new/libgnome/gnome-config.c
--- libgnome-2.0.0/libgnome/gnome-config.c	2002-06-03 04:17:00.000000000 -0400
+++ libgnome-new/libgnome/gnome-config.c	2002-06-12 05:29:17.000000000 -0400
@@ -47,6 +47,29 @@
 #define STRSIZE 4096
 #define overflow (next == &CharBuffer [STRSIZE-1])
 
+static char *
+strtok_r (char *s, const char *delim, char **save_ptr)
+{
+	char *token;
+
+	if (s == NULL)
+		s = *save_ptr;
+
+	s += strspn (s, delim);
+	if (*s == '\0')
+		return NULL;
+
+	token = s;
+	s = strpbrk (token, delim);
+	if (s == NULL) {
+		*save_ptr = strchr (token, '\0');
+	} else {
+		*s = '\0';
+		*save_ptr = s + 1;
+	}
+	return token;
+}
+
 enum {
 	FirstBrace,
 	OnSecHeader,
diff -Naur libgnome-2.0.0/libgnome/gnome-init.c libgnome-new/libgnome/gnome-init.c
--- libgnome-2.0.0/libgnome/gnome-init.c	2002-06-03 04:17:01.000000000 -0400
+++ libgnome-new/libgnome/gnome-init.c	2002-06-12 05:35:07.000000000 -0400
@@ -261,6 +261,27 @@
 	}
 }
 
+/* Mac OS X doesn't like trailing slashes on dirnames */
+static int libgnome_macosx_mkdir(const char * path, mode_t mode)
+{
+	char * mod;
+	gboolean isslash = FALSE;
+	int slashpos;
+	int retval;
+	
+	mod = (char *)path;
+	slashpos = strlen(mod) - 1;
+	if (mod[slashpos] == '/') {
+		isslash = TRUE;
+		mod[slashpos] = '\0';
+	}
+	retval = mkdir(mod, mode);
+	if (isslash) {
+		mod[slashpos] = '/';
+	}
+	return retval;
+}	
+
 static void
 libgnome_userdir_setup (gboolean create_dirs)
 {
@@ -275,7 +296,7 @@
 	if (!create_dirs)
 		return;
 	
-	if (mkdir (gnome_user_dir, 0700) < 0) { /* private permissions, but we
+	if (libgnome_macosx_mkdir (gnome_user_dir, 0700) < 0) { /* private permissions, but we
 						   don't check that we got them */
 		if (errno != EEXIST) {
 			fprintf(stderr, _("Could not create per-user gnome configuration directory `%s': %s\n"),
@@ -284,7 +305,7 @@
 		}
 	}
     
-	if (mkdir (gnome_user_private_dir, 0700) < 0) { /* This is private
+	if (libgnome_macosx_mkdir (gnome_user_private_dir, 0700) < 0) { /* This is private
 							   per-user info mode
 							   700 will be
 							   enforced!  maybe
@@ -306,7 +327,7 @@
 		exit(1);
 	}
   
-	if (mkdir (gnome_user_accels_dir, 0700) < 0) {
+	if (libgnome_macosx_mkdir (gnome_user_accels_dir, 0700) < 0) {
 		if (errno != EEXIST) {
 			fprintf(stderr, _("Could not create gnome accelerators directory `%s': %s\n"),
 				gnome_user_accels_dir, strerror(errno));
diff -Naur libgnome-2.0.0/libgnome/gnome-score.c libgnome-new/libgnome/gnome-score.c
--- libgnome-2.0.0/libgnome/gnome-score.c	2002-06-03 04:17:01.000000000 -0400
+++ libgnome-new/libgnome/gnome-score.c	2002-06-12 05:28:50.000000000 -0400
@@ -73,6 +73,29 @@
 
 /********************** internal functions ***********************************/
 
+static char *
+strtok_r (char *s, const char *delim, char **save_ptr)
+{
+	char *token;
+
+	if (s == NULL)
+		s = *save_ptr;
+
+	s += strspn (s, delim);
+	if (*s == '\0')
+		return NULL;
+
+	token = s;
+	s = strpbrk (token, delim);
+	if (s == NULL) {
+		*save_ptr = strchr (token, '\0');
+	} else {
+		*s = '\0';
+		*save_ptr = s + 1;
+	}
+	return token;
+}
+
 static gchar *
 gnome_get_score_file_name (const gchar * progname, const gchar * level)
 {
diff -Naur libgnome-2.0.0/ltmain.sh libgnome-new/ltmain.sh
--- libgnome-2.0.0/ltmain.sh	2002-06-06 17:39:00.000000000 -0400
+++ libgnome-new/ltmain.sh	2002-06-12 05:07:56.000000000 -0400
@@ -1741,7 +1741,7 @@
 
 	  if test "$installed" = no; then
 	    notinst_deplibs="$notinst_deplibs $lib"
-	    need_relink=yes
+	    # need_relink=yes
 	  fi
 
 	  if test -n "$old_archive_from_expsyms_cmds"; then
