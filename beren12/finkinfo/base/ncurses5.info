Package: ncurses5
Version: 5.4-20041016
Revision: 10
GCC: 3.3
Source: mirror:gnu:ncurses/ncurses-5.4.tar.gz
Source-MD5: 069c8880072060373290a4fefff43520
#Source2: mirror:sourceforge:fink/ncurses-20031004-patch.sh.bz2
Source2: ftp://invisible-island.net/ncurses/5.4/ncurses-5.4-20040711-patch.sh.bz2
Source2-MD5: 5cb04a825432ad968ef4e1ab6094353b
Source2ExtractDir: ncurses-5.4
Source3: ftp://invisible-island.net/ncurses/5.4/ncurses-5.4-20041016.patch.gz
Source3-MD5: 1d1590e5c6d0297a09543ed791505a67
Source3ExtractDir: ncurses-5.4
PatchScript: <<
  #!/bin/sh -e
  bunzip2 ncurses-5.4-20040711-patch.sh.bz2
  chmod +x ncurses-5.4-20040711-patch.sh
  ./ncurses-5.4-20040711-patch.sh
  echo "***********************************************************************"
#  gunzip -c ncurses-%v.patch.gz | patch -p1
  patch -p1 < %a/big.patch
  perl -p -i -e 's|tic\$suffix|tic\$suffix -x|;' misc/run_tic*
  echo "***********************************************************************"
<<
Depends: %N-shlibs (= %v-%r), %Nw-shlibs (= %v-%r)
BuildDepends: fink (>= 0.13.0)
#Conflicts: ncurses (< 5.3-20031018-500)
Replaces: ncurses
ConfigureParams: --without-ada --with-shared --with-debug --enable-termcap --mandir=%p/share/man --with-terminfo-dirs="%p/share/terminfo:/usr/share/terminfo" --with-default-terminfo-dir="%p/share/terminfo" --enable-no-padding --enable-sigwinch --enable-tcap-names --enable-hard-tabs
NoSetCFLAGS: true
NoSetLDFLAGS: true
SetLDFLAGS: -Wl,-search_paths_first
#NoSetCPPFLAGS: true
#SetCPPFLAGS: -no-cpp-precomp
CompileScript: <<
  #!/bin/sh -e
  ./configure %c --libdir=%p/lib/ncurses
  make
<<
InstallScript: <<
#!/bin/sh -e
  make install DESTDIR=%d DYLD_LIBRARY_PATH=`pwd`/lib:`pwd`/lib/ncurses
  mkdir -p %i/share/doc/%n
  cp tack/README %i/share/doc/%n/README.tack
  cp tack/COPYING %i/share/doc/%n/COPYING.tack

# configure and make widechar ncurses

  ./configure %c --enable-widec
  make -j1
  make install DESTDIR=%d DYLD_LIBRARY_PATH=`pwd`/lib:`pwd`/lib/ncurses

<<
SplitOff: <<
 Package: %Nw-shlibs
 Replaces: %Nw (<= 5.4-1)
 Depends: base-files
 Essential: false
 Files: <<
  lib/libformw.*.dylib
  lib/libmenuw.*.dylib
  lib/libncursesw.*.dylib
  lib/libpanelw.*.dylib
 <<
 Shlibs: <<
  %p/lib/libformw.5.dylib 5.0.0 %n (>= 5.4-1)
  %p/lib/libmenuw.5.dylib 5.0.0 %n (>= 5.4-1)
  %p/lib/libncursesw.5.dylib 5.0.0 %n (>= 5.4-1)
  %p/lib/libpanelw.5.dylib 5.0.0 %n (>= 5.4-1)
 <<
 Description: Shared libraries for ncursesw package
<<
SplitOff2: <<
 Package: %Nw-dev
 Depends: %Nw-shlibs (= %v-%r)
 BuildDependsOnly: True
 Files: include/ncursesw lib/libformw.dylib lib/libmenuw.dylib lib/libncursesw.dylib lib/libpanelw.dylib lib/*w*.a
 Description: Development files for ncursesw package
<<
SplitOff3: <<
 Package: %N-shlibs
# Conflicts: ncurses-shlibs (< 5.3-20031018-500)
 Replaces: ncurses-shlibs
 Depends: base-files
 Essential: true
 Files: <<
  lib/ncurses/libform.*.dylib
  lib/ncurses/libmenu.*.dylib
  lib/ncurses/libncurses.*.dylib
  lib/ncurses/libpanel.*.dylib
 <<
 Shlibs: <<
  %p/lib/libform.5.dylib 5.0.0 %n (>= 5.4-20040711)
  %p/lib/libmenu.5.dylib 5.0.0 %n (>= 5.4-20040711)
  %p/lib/libncurses.5.dylib 5.0.0 %n (>= 5.4-20040711)
  %p/lib/libpanel.5.dylib 5.0.0 %n (>= 5.4-20040711)
 <<
 Description: Shared libraries for ncurses package
<<
SplitOff4: <<
 Package: %N-dev
 Depends: %N-shlibs (= %v-%r)
 Conflicts: ncurses-dev
 Replaces: ncurses-dev
 BuildDependsOnly: True
 Files: include
 InstallScript: <<
  #!/bin/sh -e
  rm -f %I/lib/ncurses/*dylib
  mkdir -p %i/lib
  mv %I/lib/ncurses/* %i/lib

  DYLIBS="libform libmenu libncurses libpanel"
  for lib in $DYLIBS ; do 
    ln -s ncurses/$lib.5.dylib %i/lib/$lib.dylib
  done
 <<
 Description: Development files for ncurses package
<<
DocFiles: README ANNOUNCE NEWS INSTALL TO-DO MANIFEST
Description: Full-screen ascii drawing library
DescPort: <<
The -no-cpp-precomp is strictly needed.
More changes by Chris Zubrzycki to be more compatable with apple's lib
-udates to the (sometimes) monthly releases of ncurses (in patch form)

grab all the patches from ftp://invisible-island.net/ncurses/5.4 except the one the same date
as the patch script, gunzip *, cat ncurses-5.4*patch >> big.patch
to get to the current patch level.
<<
DescPackaging: <<
First revision by David Ross.
Previous versions by Christoph Pfisterer.
<<
License: OSI-Approved
Maintainer: Chris Zubrzycki <beren12@users.sourceforge.net>
Homepage: http://www.gnu.org/software/ncurses/ncurses.html
