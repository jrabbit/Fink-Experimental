Package: mplayer-altivec
Version: 1.0.0pre7.cvs
Revision: 1.0.20060428
Source: http://homepage.mac.com/beren/mplayer-1.0-20060428.tar.bz2
#Source: mirror:custom:MPlayer-1.0pre6a.tar.bz2
#CustomMirror: <<
#  eur-HU: http://www1.mplayerhq.hu/MPlayer/releases/
#  eur-HU: http://www2.mplayerhq.hu/MPlayer/releases/
#  eur-HU: ftp://ftp1.mplayerhq.hu/MPlayer/releases/
#  eur-HU: ftp://ftp2.mplayerhq.hu/MPlayer/releases/
#  eur-CH: http://www4.mplayerhq.hu/MPlayer/releases/
#  nam-US: http://ftp5.mplayerhq.hu/MPlayer/releases/
#  nam-US: http://ftp5.mplayerhq.hu/MPlayer/releases/
#  oce-AU: ftp://ftp6.mplayerhq.hu/MPlayer/releases/
#  eur-BG: ftp://ftp8.mplayerhq.hu/MPlayer/releases/
#<<

Source-MD5: c5db13443abe4cf9e641b356a702a742
SourceDirectory: mplayer

BuildDepends: lame, gtk+, glib, libpng3, aalib (>= 1.4rc5-2), libogg, libvorbis0, libdv4, libmad, sdl, arts-dev (>= 1.1.0-2), libiconv-dev, xvidcore, x11-dev, fink (>= 0.17.0-1), xmms, libjpeg, giflib, glib2, esound, audiofile, po-debconf
Depends: x11, gtk+-shlibs, glib-shlibs, libpng3-shlibs, aalib-shlibs (>= 1.4rc5-2), sdl-shlibs, libogg-shlibs, libvorbis0-shlibs, libmad-shlibs, lame-shlibs, elinks-ssl | www-browser, libdv4-shlibs, arts-shlibs, mplayer-skin, xvidcore-shlibs, xmms-shlibs, libjpeg-shlibs, giflib-shlibs, glib2-shlibs, esound-shlibs, audiofile-shlibs, debconf

Replaces: mplayer, mplayer-custom, mplayer0.9
Conflicts: mplayer, mplayer-custom, mplayer0.9
Provides: x-media-player

PatchScript: <<
#!/bin/bash -e
touch .developer
patch -p1 < %a/mplayer.patch
<<

ConfigureParams: --with-extralibdir="%p/lib" --with-extraincdir="%p/include" --mandir="%p/share/man" --enable-menu --enable-gui --disable-cpu-optimization --enable-altivec --enable-xmms --confdir="%p/etc/mplayer" --disable-cdparanoia --disable-libcdio

InstallScript: <<
  #!bin/sh

  find . -name CVS -tpye d -exec rm -rf {} \;
  make install DESTDIR=%d
  mkdir -p %i/etc/mplayer
  cp etc/codecs.conf %i/etc/mplayer/codecs.conf  
  cp etc/input.conf %i/etc/mplayer/input.conf  
  cp etc/example.conf %i/etc/mplayer/mplayer.conf
  rm -rf %i/share/%n/font
  mkdir -p %i/share/doc/%n
  cp -r DOCS/* %i/share/doc/%n

  #prep debconf
  mkdir -p %d/DEBIAN
  #po2debconf debian/templates 
  cp debian/templates %d/DEBIAN/templates

<<

DocFiles: AUTHORS ChangeLog LICENSE README
ConfFiles: <<
  %p/etc/mplayer/mplayer.conf
  %p/etc/mplayer/codecs.conf
  %p/etc/mplayer/input.conf
<<

PostInstScript: <<
  #!/usr/bin/perl -w

  # mplayer postinst

  require ConfHelper;

  use Debconf::Client::ConfModule qw(:all);
  use IO::Handle;
  use Fcntl;
  my $version = version(1.0);
  my @savedolddata = ();
  my $didupgrade = 0;

  dealwithupgrades();

  my $mcfg = new ConfHelper('mplayer', "%p/etc/mplayer/mplayer.conf");
  $mcfg->setconfarea("
  #MPlayer config file generated by .deb package.
  #ffactor        =       0.9
  #fs     =       yes
  ");

  ###########################################################################

  debug("Configuring video output driver...");

  my $dcarea = <<"EOF";
  # MPlayer video output driver, configured by mplayer.deb
  EOF

  $dcarea .= "vo=" . scalar(get("mplayer/voutput"));
  $dcarea .= "\n";

  $mcfg->setconfarea($dcarea);

  if ($didupgrade) {
    $mcfg->setotherarea_DANGEROUS(@savedolddata);
  }

  #%###################################

  exit unless (get("mplayer/configure") eq 'true');
  exit unless (fget("mplayer/configure", "isdefault") eq 'false');

  #%##################################
  get("mplayer/cfgnote");



  sub dealwithupgrades {
    open(OLDCONF, "<%p/etc/mplayer/mplayer.conf") || return 1;
    close OLDCONF;

    my $mconf = new ConfHelper("mplayer", "%p/etc/mplayer/mplayer.conf");
    return 1 if ($mconf->hasconfarea());
    undef $mconf;

    if ((get('mplayer/replace-existing-files') eq 'true') &&
        (fget('mplayer/replace-existing-files', 'isdefault') eq 'false')) {
      print STDERR "Upgrading...\n";
      $didupgrade = 1;
      for my $file ("%p/etc/mplayer/mplayer.conf"
      #, "%p/etc/mplayer/fonts/sth
      ) {
        debug("Deleting $file");
        unlink $file;
      }
    } else {
      print STDERR "Upgrade refused, exiting.\n";
      exit 0;
    }
  }

  # Gets any debconf area for other packages and saves it off.

  sub saveolddata {
    my ($file, $package) = @_;
    my $conf = new ConfHelper($package, $file);
    push(@savedolddata, $conf->{startline} . "\n");
    push(@savedolddata, $conf->getconfarea());
    push(@savedolddata, $conf->{endline} . "\n");
  }

  sub debug {
    print STDERR @_, "\n";
  }

<<

PostRmScript: <<
  #!/bin/sh

  set -e

  if [ "$1" = "purge" ]; then
          if [ -e %p/share/debconf/confmodule ]; then
                  # Source debconf library.
                  . %p/share/debconf/confmodule
                  # Remove my changes to the db.
                  db_purge
          fi

          if [ -d %p/etc/mplayer/ ]; then
                  rm -rf %p/etc/mplayer/
          fi
  fi
<<

Description: The Ultimate Movie Player
DescDetail: <<
 MPlayer is a movie player for LINUX (runs on many other Unices, and non-x86
 CPUs, see the ports section). It plays most MPEG, VOB, AVI, OGG/OGM, VIVO,
 ASF/WMA/WMV, QT/MOV/MP4, FLI, RM, NuppelVideo, yuv4mpeg, FILM, RoQ, PVA files,
 supported by many native, XAnim, RealPlayer, and Win32 DLL codecs. You can
 watch VideoCD, SVCD, DVD, 3ivx, RealMedia, and DivX movies too (and you don't
 need the avifile library at all!).

 Another big feature of MPlayer is the wide range of supported output drivers.
 It works with X11, Xv, DGA, OpenGL, SVGAlib, fbdev, AAlib, DirectFB, but you
 can also use GGI and SDL (and this way all their drivers) and some lowlevel
 card-specific drivers (for Matrox, 3Dfx and Radeon, Mach64, Permedia3) too!
 Most of them supports software or hardware scaling, so you can enjoy movies in
 fullscreen.

 And what about the nice big antialiased shaded subtitles (10 supported types)
 with European/ISO 8859-1,2 (Hungarian, English, Czech, etc), Cyrillic, Korean
 fonts, and the onscreen display (OSD)?
<<
DescPort: <<
faa2 is included to play mp4/AAC files, but should be also in a seperate package...which maybe we should force to use.
On second thought, mplayer's is newer

I hope these deps are correct...

grr:
cc -c -I../libvo -I../../libvo -I/usr/X11R6/include -g -O4   -faltivec -pipe -ffast-math -fomit-frame-pointer -DSYS_DARWIN -DCONFIG_DARWIN -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/sw/include -I/sw/include/gtk-1.2 -I/sw/include/glib-1.2 -I/sw/lib/glib/include -I/usr/X11R6/include  -I. -I.. -I/sw/include -I/sw/include/gtk-1.2 -I/sw/include/glib-1.2 -I/sw/lib/glib/include -I/usr/X11R6/include -fomit-frame-pointer -fPIC -DPIC -I.. -I../.. -o postprocess_pic.o postprocess.c
cc -shared -Wl,-soname,libpostproc.so.0 \
-o libpostproc.so postprocess_pic.o
cc: unrecognized option `-shared'
ld: unknown flag: -soname

so no --enable-shared-pp

Previously by Justin Hallett
<<


License: GPL
Maintainer: Chris Zubrzycki <beren12@users.sourceforge.net>
Homepage: http://www.mplayerhq.hu/
