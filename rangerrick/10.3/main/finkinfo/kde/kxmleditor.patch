diff -uNr kxmleditor-1.1.3/kxmleditor/Makefile.in kxmleditor-1.1.3-new/kxmleditor/Makefile.in
--- kxmleditor-1.1.3/kxmleditor/Makefile.in	Tue Sep 14 03:48:48 2004
+++ kxmleditor-1.1.3-new/kxmleditor/Makefile.in	Fri Oct 29 15:38:19 2004
@@ -251,6 +251,8 @@
 	kxmleditorshell.cpp kxmleditorshell.h kxmleditorshell.rc \
 	dcopiface_shell.cpp dcopiface_shell.h
 
+xdg_apps_DATA = kxmleditor.desktop
+xdg_appsdir = $(datadir)/applications/kde
 
 ####### kdevelop will overwrite this part!!! (end)############
 # this 10 paths are KDE specific. Use them:
@@ -330,7 +332,7 @@
 CXXLINK = $(LIBTOOL) --mode=link --tag=CXX $(CXXLD) $(AM_CXXFLAGS) $(CXXFLAGS) $(KDE_CXXFLAGS) \
 	$(AM_LDFLAGS) $(LDFLAGS) -o $@
 DIST_SOURCES = $(kxmleditor_SOURCES)
-DATA = $(rc_DATA)
+DATA = $(rc_DATA) $(xdg_apps_DATA)
 
 HEADERS = $(noinst_HEADERS)
 
@@ -460,6 +462,25 @@
 	  rm -f $(DESTDIR)$(rcdir)/$$f; \
 	done
 
+xdg_appsDATA_INSTALL = $(INSTALL_DATA)
+install-xdg_appsDATA: $(xdg_apps_DATA)
+	@$(NORMAL_INSTALL)
+	$(mkinstalldirs) $(DESTDIR)$(xdg_appsdir)
+	@list='$(xdg_apps_DATA)'; for p in $$list; do \
+	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
+	  f="`echo $$p | sed -e 's|^.*/||'`"; \
+	  echo " $(xdg_appsDATA_INSTALL) $$d$$p $(DESTDIR)$(xdg_appsdir)/$$f"; \
+	  $(xdg_appsDATA_INSTALL) $$d$$p $(DESTDIR)$(xdg_appsdir)/$$f; \
+	done
+
+uninstall-xdg_appsDATA:
+	@$(NORMAL_UNINSTALL)
+	@list='$(xdg_apps_DATA)'; for p in $$list; do \
+	  f="`echo $$p | sed -e 's|^.*/||'`"; \
+	  echo " rm -f $(DESTDIR)$(xdg_appsdir)/$$f"; \
+	  rm -f $(DESTDIR)$(xdg_appsdir)/$$f; \
+	done
+
 ETAGS = etags
 ETAGSFLAGS =
 
@@ -555,7 +576,7 @@
 all-am: Makefile $(PROGRAMS) $(DATA) $(HEADERS)
 
 installdirs:
-	$(mkinstalldirs) $(DESTDIR)$(bindir) $(DESTDIR)$(rcdir)
+	$(mkinstalldirs) $(DESTDIR)$(bindir) $(DESTDIR)$(rcdir) $(DESTDIR)$(xdg_appsdir)
 install: install-am
 install-exec: install-exec-am
 install-data: install-data-am
@@ -601,7 +622,7 @@
 
 info-am:
 
-install-data-am: install-data-local install-rcDATA
+install-data-am: install-data-local install-rcDATA install-xdg_appsDATA
 
 install-exec-am: install-binPROGRAMS
 
@@ -629,7 +650,7 @@
 ps-am:
 
 uninstall-am: uninstall-binPROGRAMS uninstall-info-am uninstall-local \
-	uninstall-rcDATA
+	uninstall-rcDATA uninstall-xdg_appsDATA
 
 .PHONY: CTAGS GTAGS all all-am check check-am clean clean-binPROGRAMS \
 	clean-generic clean-libtool ctags distclean distclean-compile \
@@ -642,24 +663,13 @@
 	maintainer-clean-generic mostlyclean mostlyclean-compile \
 	mostlyclean-generic mostlyclean-libtool pdf pdf-am ps ps-am \
 	tags uninstall uninstall-am uninstall-binPROGRAMS \
-	uninstall-info-am uninstall-local uninstall-rcDATA
+	uninstall-info-am uninstall-local uninstall-rcDATA install-xdg_appsDATA \
+	uninstall-xdg_appsDATA
 
 
 install-data-local:
-#>- 	$(mkinstalldirs) $(kde_appsdir)/Applications/
-#>+ 1
-	$(mkinstalldirs) $(DESTDIR)$(kde_appsdir)/Applications/
-#>- 	$(INSTALL_DATA) $(srcdir)/kxmleditor.desktop $(kde_appsdir)/Applications/kxmleditor.desktop
-#>+ 1
-	$(INSTALL_DATA) $(srcdir)/kxmleditor.desktop $(DESTDIR)$(kde_appsdir)/Applications/kxmleditor.desktop
 
 uninstall-local:
-#>- 	-rm -f $(kde_appsdir)/Applications/kxmleditor.desktop
-#>+ 1
-	-rm -f $(DESTDIR)$(kde_appsdir)/Applications/kxmleditor.desktop
-#>- 	-rmdir $(kde_appsdir)/Applications
-#>+ 1
-	-rmdir $(DESTDIR)$(kde_appsdir)/Applications
 
 messages: rc.cpp
 	LIST=`find . -name \*.h -o -name \*.hh -o -name \*.H -o -name \*.hxx -o -name \*.hpp -o -name \*.cpp -o -name \*.cc -o -name \*.cxx -o -name \*.ecpp -o -name \*.C`; \
