diff -uNr kdepim-3.3.0/configure kdepim-3.3.0-new/configure
--- kdepim-3.3.0/configure	Mon Aug 16 05:56:24 2004
+++ kdepim-3.3.0-new/configure	Sun Aug 29 10:51:20 2004
@@ -9629,10 +9629,21 @@
       archive_cmds_need_lc=no
       case "$host_os" in
       rhapsody* | darwin1.[012])
-	allow_undefined_flag='-undefined suppress'
+	allow_undefined_flag='-Wl,-undefined -Wl,suppress'
 	;;
       *) # Darwin 1.3 on
-	test -z ${LD_TWOLEVEL_NAMESPACE} && allow_undefined_flag='-flat_namespace -undefined suppress'
+	if test -z ${MACOSX_DEPLOYMENT_TARGET} ; then
+	  allow_undefined_flag='-Wl,-flat_namespace -Wl,-undefined -Wl,suppress'
+	else
+	  case ${MACOSX_DEPLOYMENT_TARGET} in
+	    10.[012])
+	      allow_undefined_flag='-Wl,-flat_namespace -Wl,-undefined -Wl,suppress'
+	      ;;
+	    10.*)
+	      allow_undefined_flag='-Wl,-undefined -Wl,dynamic_lookup'
+	      ;;
+	  esac
+	fi
 	;;
       esac
     	lt_int_apple_cc_single_mod=no
@@ -11482,7 +11493,18 @@
       allow_undefined_flag='-undefined suppress'
       ;;
     *) # Darwin 1.3 on
-      test -z ${LD_TWOLEVEL_NAMESPACE} && allow_undefined_flag='-flat_namespace -undefined suppress'
+	if test -z ${MACOSX_DEPLOYMENT_TARGET} ; then
+	  allow_undefined_flag='-Wl,-flat_namespace -Wl,-undefined -Wl,suppress'
+	else
+	  case ${MACOSX_DEPLOYMENT_TARGET} in
+	    10.[012])
+	      allow_undefined_flag='-Wl,-flat_namespace -Wl,-undefined -Wl,suppress'
+	      ;;
+	    10.*)
+	      allow_undefined_flag='-Wl,-undefined -Wl,dynamic_lookup'
+	      ;;
+	  esac
+	fi
       ;;
     esac
     output_verbose_link_cmd='echo'
@@ -12533,7 +12555,18 @@
       allow_undefined_flag_CXX='-undefined suppress'
       ;;
     *) # Darwin 1.3 on
-      test -z ${LD_TWOLEVEL_NAMESPACE} && allow_undefined_flag_CXX='-flat_namespace -undefined suppress'
+	if test -z ${MACOSX_DEPLOYMENT_TARGET} ; then
+	  allow_undefined_flag_CXX='-Wl,-flat_namespace -Wl,-undefined -Wl,suppress'
+	else
+	  case ${MACOSX_DEPLOYMENT_TARGET} in
+	    10.[012])
+	      allow_undefined_flag_CXX='-Wl,-flat_namespace -Wl,-undefined -Wl,suppress'
+	      ;;
+	    10.*)
+	      allow_undefined_flag_CXX='-Wl,-undefined -Wl,dynamic_lookup'
+	      ;;
+	  esac
+	fi
       ;;
     esac
     lt_int_apple_cc_single_mod=no
@@ -16356,7 +16389,18 @@
 	allow_undefined_flag_F77='-undefined suppress'
 	;;
       *) # Darwin 1.3 on
-	test -z ${LD_TWOLEVEL_NAMESPACE} && allow_undefined_flag_F77='-flat_namespace -undefined suppress'
+	if test -z ${MACOSX_DEPLOYMENT_TARGET} ; then
+	  allow_undefined_flag_F77='-Wl,-flat_namespace -Wl,-undefined -Wl,suppress'
+	else
+	  case ${MACOSX_DEPLOYMENT_TARGET} in
+	    10.[012])
+	      allow_undefined_flag_F77='-Wl,-flat_namespace -Wl,-undefined -Wl,suppress'
+	      ;;
+	    10.*)
+	      allow_undefined_flag_F77='-Wl,-undefined -Wl,dynamic_lookup'
+	      ;;
+	  esac
+	fi
 	;;
       esac
     	lt_int_apple_cc_single_mod=no
@@ -18638,7 +18682,18 @@
 	allow_undefined_flag_GCJ='-undefined suppress'
 	;;
       *) # Darwin 1.3 on
-	test -z ${LD_TWOLEVEL_NAMESPACE} && allow_undefined_flag_GCJ='-flat_namespace -undefined suppress'
+	if test -z ${MACOSX_DEPLOYMENT_TARGET} ; then
+	  allow_undefined_flag_GCJ='-Wl,-flat_namespace -Wl,-undefined -Wl,suppress'
+	else
+	  case ${MACOSX_DEPLOYMENT_TARGET} in
+	    10.[012])
+	      allow_undefined_flag_GCJ='-Wl,-flat_namespace -Wl,-undefined -Wl,suppress'
+	      ;;
+	    10.*)
+	      allow_undefined_flag_GCJ='-Wl,-undefined -Wl,dynamic_lookup'
+	      ;;
+	  esac
+	fi
 	;;
       esac
     	lt_int_apple_cc_single_mod=no
diff -uNr kdepim-3.3.0/kontact/src/Makefile.in kdepim-3.3.0-new/kontact/src/Makefile.in
--- kdepim-3.3.0/kontact/src/Makefile.in	Mon Aug 16 05:56:14 2004
+++ kdepim-3.3.0-new/kontact/src/Makefile.in	Sun Aug 29 10:52:07 2004
@@ -505,7 +505,11 @@
 libkontact_la_LIBADD = $(LIB_KDECORE)
 #>- libkontact_la_SOURCES = prefs.kcfgc
 #>+ 1
-libkontact_la_SOURCES= prefs.cpp
+libkontact_la_SOURCES= prefs.cpp dummy.cpp
+
+dummy.cpp:
+	echo > dummy.cpp
+
 #>- kontact_METASOURCES = AUTO
 kontact_LDFLAGS = $(all_libraries) $(KDE_RPATH) -lkutils
 kontact_LDADD = $(LIB_KPARTS) $(top_builddir)/libkdepim/libkdepim.la \
diff -uNr kdepim-3.3.0/korganizer/Makefile.in kdepim-3.3.0-new/korganizer/Makefile.in
--- kdepim-3.3.0/korganizer/Makefile.in	Mon Aug 16 05:56:15 2004
+++ kdepim-3.3.0-new/korganizer/Makefile.in	Sun Aug 29 10:53:05 2004
@@ -621,7 +621,7 @@
 
 korganizer_LDFLAGS = $(all_libraries) $(KDE_RPATH)
 korganizer_LDADD = libkorganizer.la
-korganizer_SOURCES = main.cpp korganizer.cpp koapp.cpp
+korganizer_SOURCES = main.cpp koapp.cpp
 korganizer_COMPILE_FIRST = koprefs_base.h
 kde_module_LTLIBRARIES = kcm_korganizer.la libkorganizerpart.la
 kcm_korganizer_la_SOURCES = koprefsdialog.cpp
@@ -712,7 +712,7 @@
 #>- 	freebusymanager.cpp freebusyurldialog.cpp \
 #>- 	eventarchiver.cpp koidentitymanager.cpp
 #>+ 46
-libkorganizer_la_SOURCES= \
+libkorganizer_la_SOURCES= korganizer.cpp \
 	koagendaview.cpp koagenda.cpp koagendaitem.cpp \
 	datenavigator.cpp kdatenavigator.cpp datenavigatorcontainer.cpp \
 	datechecker.cpp \
diff -uNr kdepim-3.3.0/korganizer/plugins/Makefile.in kdepim-3.3.0-new/korganizer/plugins/Makefile.in
--- kdepim-3.3.0/korganizer/plugins/Makefile.in	Mon Aug 16 05:56:15 2004
+++ kdepim-3.3.0-new/korganizer/plugins/Makefile.in	Sun Aug 29 10:53:20 2004
@@ -64,7 +64,7 @@
 	uninstall-recursive nmcheck-recursive bcheck-recursive
 ETAGS = etags
 CTAGS = ctags
-DIST_SUBDIRS = datenums holidays projectview webexport hebrew exchange
+DIST_SUBDIRS = datenums projectview webexport hebrew exchange
 #>- DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 #>+ 1
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST) $(KDE_DIST)
@@ -423,7 +423,7 @@
 xdg_directorydir = @xdg_directorydir@
 xdg_menudir = @xdg_menudir@
 @include_exchange_SUBDIR_TRUE@exchange_SUBDIR = exchange
-SUBDIRS = datenums holidays projectview webexport hebrew $(exchange_SUBDIR) 
+SUBDIRS = datenums projectview webexport hebrew $(exchange_SUBDIR) 
 #>- all: all-recursive
 #>+ 1
 all: docs-am  all-recursive
diff -uNr kdepim-3.3.0/kpilot/conduits/malconduit/mal-conduit.cc kdepim-3.3.0-new/kpilot/conduits/malconduit/mal-conduit.cc
--- kdepim-3.3.0/kpilot/conduits/malconduit/mal-conduit.cc	Fri Jun 25 04:57:51 2004
+++ kdepim-3.3.0-new/kpilot/conduits/malconduit/mal-conduit.cc	Sun Aug 29 10:53:38 2004
@@ -34,6 +34,7 @@
 
 #include "options.h"
 
+#include <stdarg.h>
 #include <qregexp.h>
 #include <kconfig.h>
 #include <kdebug.h>
