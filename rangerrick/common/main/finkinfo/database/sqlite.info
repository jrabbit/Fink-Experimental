Package: sqlite
Version: 2.8.15
Revision: 1

Description: Embedded SQL database
DescDetail: <<
SQLite is a C library that implements an embeddable SQL database engine.
Programs that link with the SQLite library can have SQL database access
without running a separate RDBMS process. The distribution comes with a
standalone command-line access program ( sqlite ) that can be used to
administer an SQLite database and which serves as an example of how to
use the SQLite library.
<<
DescPort: <<
Patch configure to find the Fink readline headers. This package requires 
readline present to build due to issues with the default sqlite configure
script when run on OS X.
<<

License: Public Domain 
Maintainer: Benjamin Reed <ranger@befunk.com>
Homepage: http://www.sqlite.org/

DocFiles: README VERSION LICENSE

Depends: %N-shlibs (>= %v-%r), readline-shlibs, tcltk-shlibs
BuildDepends: readline, tcltk-dev

Source: http://sqlite.org/%n-%v.tar.gz
Source-MD5: 0afa73e107bd106031d046c8ca6a94ab
SourceDirectory: sqlite

# Patch Phase:
PatchScript: <<
sed 's|@PREFIX@|%p|g' < %a/%n.patch | patch -p1
head -10 src/%n.h.in > LICENSE 
<<

NoSetCPPFLAGS: true
NoSetCFLAGS: true
NoSetLDFLAGS: true
SetLIBS: -L/sw/lib
ConfigureParams: --enable-utf8
CompileScript: <<
  ./configure %c
  make LIBTCL="-L%p/lib -ltcl8.4 -ldl" all tclsqlite libtclsqlite.la
<<
InstallScript: <<
  make install DESTDIR="%d"

  install -d -m 755 %i/lib
  install -d -m 755 %i/share/man/man1
  install -d -m 755 %i/share/doc/%N

  ./libtool --mode=install /usr/bin/install -c libtclsqlite.la %i/lib/libtclsqlite.la
  ./libtool --mode=install /usr/bin/install -c tclsqlite       %i/bin/tclsqlite
  install -c -m 755 lemon %i/bin/lemon
  install -c -m 644 sqlite.1 %i/share/man/man1/
  cp -pR www/* %i/share/doc/%N/
<<

SplitOff: << 
  Package: %N-shlibs
  DocFiles: README VERSION LICENSE
  Shlibs: <<
    %p/lib/libsqlite.0.dylib 9.0.0 %n (>= 2.8.15-1)
    %p/lib/libtclsqlite.0.dylib 9.0.0 %n (>= 2.8.15-1)
  <<
  Files: lib/libsqlite.*.dylib lib/libtclsqlite.*.dylib
<<
SplitOff2: << 
  Package: %N-dev
  DocFiles: README VERSION LICENSE
  BuildDependsOnly: True
  Files: <<
    include
    lib
  <<
  Depends: %N-shlibs (>= %v-%r)
<<
