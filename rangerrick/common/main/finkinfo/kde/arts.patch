diff -uNr arts-1.1.94/flow/audioioesd.cc arts-1.1.94-new/flow/audioioesd.cc
--- arts-1.1.94/flow/audioioesd.cc	Fri Feb 14 06:15:18 2003
+++ arts-1.1.94-new/flow/audioioesd.cc	Tue Dec  2 13:47:13 2003
@@ -53,6 +53,12 @@
 
 #include <esd.h>
 
+#ifdef __BIG_ENDIAN__
+#define _format_bits 17
+#else
+#define _format_bits 16
+#endif
+
 namespace Arts {
 
 class AudioIOESD : public AudioIO, public IONotify {
@@ -88,7 +94,7 @@
 	paramStr(deviceName) = "null";
 	param(fragmentSize) = 1024;
 	param(fragmentCount) = 7;
-	param(format) = 16;
+	param(format) = _format_bits;
 	param(channels) = 2;
 	param(direction) = 2;
 
@@ -125,8 +131,8 @@
 	esd_format_t server_format = server_info->format;
 
 	_samplingRate = server_info->rate;
-	_channels     = (server_format & ESD_STEREO) ? 2  : 1;
-	_format       = (server_format & ESD_BITS16) ? 16 : 8;
+	_channels     = (server_format & ESD_STEREO) ? 2            : 1;
+	_format       = (server_format & ESD_BITS16) ? _format_bits : 8;
 
 	esd_free_server_info(server_info);
 	
@@ -209,6 +215,9 @@
 		// ESD handles are actually socket descriptors, and I know not
 		// of any portable way to peek at the socket's send or receive
 		// buffers.
+
+	case autoDetect:
+		return 12;
 
 	default:
 		return param(p);
