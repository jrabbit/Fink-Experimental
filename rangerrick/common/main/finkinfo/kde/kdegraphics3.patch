diff -uNr kdegraphics-3.2.92/kdvi/Makefile.am kdegraphics-3.2.92-new/kdvi/Makefile.am
--- kdegraphics-3.2.92/kdvi/Makefile.am	2004-05-22 16:28:49.000000000 -0400
+++ kdegraphics-3.2.92-new/kdvi/Makefile.am	2004-07-26 09:36:56.000000000 -0400
@@ -1,5 +1,5 @@
 # set the include path for X, qt and KDE
-INCLUDES= -I$(top_srcdir)/kviewshell $(all_includes) $(LIBFREETYPE_CFLAGS)
+INCLUDES= -I/usr/X11R6/include/freetype2 -I$(top_srcdir)/kviewshell $(all_includes) $(LIBFREETYPE_CFLAGS)
 # claim, which subdirectories you want to install
 SUBDIRS = . pix
 
diff -uNr kdegraphics-3.2.92/kfax/Makefile.am kdegraphics-3.2.92-new/kfax/Makefile.am
--- kdegraphics-3.2.92/kfax/Makefile.am	2003-11-30 04:46:01.000000000 -0500
+++ kdegraphics-3.2.92-new/kfax/Makefile.am	2004-07-26 09:37:08.000000000 -0400
@@ -1,3 +1,5 @@
+KDE_OPTIONS = nofinal
+
 AM_LDFLAGS =	$(all_libraries) $(KDE_RPATH)
 LDADD      =       ./libtiffax/libtif.la  -lm $(LIB_KFILE) 
 INCLUDES   =	-I$(srcdir)/libtiffax $(all_includes)
diff -uNr kdegraphics-3.2.92/kfile-plugins/configure.in.in kdegraphics-3.2.92-new/kfile-plugins/configure.in.in
--- kdegraphics-3.2.92/kfile-plugins/configure.in.in	2002-10-11 04:25:30.000000000 -0400
+++ kdegraphics-3.2.92-new/kfile-plugins/configure.in.in	2004-07-26 09:36:56.000000000 -0400
@@ -1,2 +1,3 @@
 DO_NOT_COMPILE="$DO_NOT_COMPILE gif"
 AC_CHECK_PROG(PDFINFO, pdfinfo, yes, no)
+KDE_TRY_TIFFLIB
diff -uNr kdegraphics-3.2.92/kghostview/Makefile.am kdegraphics-3.2.92-new/kghostview/Makefile.am
--- kdegraphics-3.2.92/kghostview/Makefile.am	2004-05-22 16:28:50.000000000 -0400
+++ kdegraphics-3.2.92-new/kghostview/Makefile.am	2004-07-26 09:36:56.000000000 -0400
@@ -4,10 +4,11 @@
 
 ####### Files
 
-bin_PROGRAMS = 	kghostview
+bin_PROGRAMS = 	
 lib_LTLIBRARIES = libkghostviewlib.la
 kde_module_LTLIBRARIES = libkghostviewpart.la
 noinst_LTLIBRARIES = libdscparse.la
+kdeinit_LTLIBRARIES = kghostview.la
 
 libkghostviewlib_la_LDFLAGS = $(all_libraries)
 libkghostviewlib_la_LIBADD = $(LIB_KFILE) $(LIB_KPARTS) -lkdeprint libdscparse.la
@@ -26,9 +27,9 @@
 
 libkghostviewpart_la_SOURCES = part_init.cpp
 
-kghostview_SOURCES = main.cpp
-kghostview_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-kghostview_LDADD = libkghostviewlib.la
+kghostview_la_SOURCES = main.cpp
+kghostview_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module -avoid-version
+kghostview_la_LIBADD = libkghostviewlib.la
 
 libdscparse_la_LDFLAGS = $(all_libraries) -no-undefined
 libdscparse_la_LIBADD = $(LIB_QT)
diff -uNr kdegraphics-3.2.92/kghostview/main.cpp kdegraphics-3.2.92-new/kghostview/main.cpp
--- kdegraphics-3.2.92/kghostview/main.cpp	2004-06-22 13:20:19.000000000 -0400
+++ kdegraphics-3.2.92-new/kghostview/main.cpp	2004-07-26 09:36:56.000000000 -0400
@@ -43,7 +43,7 @@
     KCmdLineLastOption
 };
 
-int main( int argc, char** argv )
+extern "C" int kdemain( int argc, char* argv[] )
 {
     KCmdLineArgs::init( argc, argv, KGVPart::createAboutData() );
     KCmdLineArgs::addCmdLineOptions( options );
diff -uNr kdegraphics-3.2.92/kpdf/xpdf/Makefile.am kdegraphics-3.2.92-new/kpdf/xpdf/Makefile.am
--- kdegraphics-3.2.92/kpdf/xpdf/Makefile.am	2003-09-21 08:28:13.000000000 -0400
+++ kdegraphics-3.2.92-new/kpdf/xpdf/Makefile.am	2004-07-26 09:36:56.000000000 -0400
@@ -1,4 +1,4 @@
-INCLUDES = -I.. -I$(top_srcdir)/kpdf/goo $(all_includes) $(LIBFREETYPE_CFLAGS)
+INCLUDES = -I/usr/X11R6/include/freetype2 -I.. -I$(top_srcdir)/kpdf/goo $(all_includes) $(LIBFREETYPE_CFLAGS)
 
 libxpdf_la_LDFLAGS = $(all_libraries) -no-undefined
 libxpdf_la_LIBADD = $(LIB_X11) $(LIBFREETYPE_LIBS) $(LIBPAPER_LIBS) ../goo/libgoo.la
diff -uNr kdegraphics-3.2.92/kpovmodeler/Makefile.am kdegraphics-3.2.92-new/kpovmodeler/Makefile.am
--- kdegraphics-3.2.92/kpovmodeler/Makefile.am	2004-07-17 13:53:12.000000000 -0400
+++ kdegraphics-3.2.92-new/kpovmodeler/Makefile.am	2004-07-26 09:36:56.000000000 -0400
@@ -1,5 +1,5 @@
 
-INCLUDES = $(LIBFREETYPE_CFLAGS) $(all_includes)
+INCLUDES = -I/usr/X11R6/include/freetype2 $(all_includes) $(LIBFREETYPE_CFLAGS)
 
 SUBDIRS = pics examples
 
diff -uNr kdegraphics-3.2.92/ksvg/impl/libs/libtext2path/src/Makefile.am kdegraphics-3.2.92-new/ksvg/impl/libs/libtext2path/src/Makefile.am
--- kdegraphics-3.2.92/ksvg/impl/libs/libtext2path/src/Makefile.am	2004-05-22 16:29:01.000000000 -0400
+++ kdegraphics-3.2.92-new/ksvg/impl/libs/libtext2path/src/Makefile.am	2004-07-26 09:36:56.000000000 -0400
@@ -1,10 +1,10 @@
 lib_LTLIBRARIES = libtext2path.la
 
 KDE_CXXFLAGS = $(USE_EXCEPTIONS)
-INCLUDES = $(FRIBIDI_CFLAGS) $(FREETYPE_CFLAGS) $(FONTCONFIG_CFLAGS) $(all_includes)
+INCLUDES = $(FREETYPE_CFLAGS) $(FONTCONFIG_CFLAGS) $(FRIBIDI_CFLAGS) $(all_includes)
 
 libtext2path_includedir=$(includedir)/libtext2path-0.1
 libtext2path_include_HEADERS = BezierPath.h Glyph.h GlyphTracer.h
 
 libtext2path_la_SOURCES = Affine.cpp Rectangle.cpp Font.cpp Glyph.cpp GlyphTracer.cpp Converter.cpp QtUnicode.cpp
-libtext2path_la_LDFLAGS = $(FRIBIDI_LIBS) $(FONTCONFIG_LIBS)
+libtext2path_la_LDFLAGS = $(FRIBIDI_LIBS) $(FONTCONFIG_LIBS) $(FREETYPE_LIBS)
diff -uNr kdegraphics-3.2.92/ksvg/plugin/backends/libart/Makefile.am kdegraphics-3.2.92-new/ksvg/plugin/backends/libart/Makefile.am
--- kdegraphics-3.2.92/ksvg/plugin/backends/libart/Makefile.am	2003-10-26 05:52:43.000000000 -0500
+++ kdegraphics-3.2.92-new/ksvg/plugin/backends/libart/Makefile.am	2004-07-26 09:36:56.000000000 -0400
@@ -8,4 +8,4 @@
 kde_services_DATA = ksvglibartcanvas.desktop
 
 KDE_CXXFLAGS = $(USE_EXCEPTIONS)
-INCLUDES = $(KDE_INCLUDES) $(LIBART_CFLAGS) $(FREETYPE_CFLAGS) $(FONTCONFIG_CFLAGS) -I$(top_srcdir)/ksvg/dom -I$(top_srcdir)/ksvg/impl -I$(top_srcdir)/ksvg/ecma -I$(top_srcdir)/ksvg/core -I$(top_srcdir)/ksvg/impl/libs/art_support -I$(top_srcdir)/ksvg/impl/libs/libtext2path/src $(all_includes)
+INCLUDES = $(FREETYPE_CFLAGS) $(FONTCONFIG_CFLAGS) $(KDE_INCLUDES) $(LIBART_CFLAGS) -I$(top_srcdir)/ksvg/dom -I$(top_srcdir)/ksvg/impl -I$(top_srcdir)/ksvg/ecma -I$(top_srcdir)/ksvg/core -I$(top_srcdir)/ksvg/impl/libs/art_support -I$(top_srcdir)/ksvg/impl/libs/libtext2path/src $(all_includes)
