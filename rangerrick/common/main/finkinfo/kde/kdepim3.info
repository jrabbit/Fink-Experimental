Package: kdepim3
Version: 3.3.0
Revision: 1
Description: KDE - tools for managing personal information management
License: GPL/LGPL
Maintainer: Benjamin Reed <ranger@befunk.com>

Depends: kaddressbook (>= %v-%r), kalarm (>= %v-%r), kandy (>= %v-%r), karm (>= %v-%r), kmail (>= %v-%r), knode (>= %v-%r), knotes (>= %v-%r), kontact (>= %v-%r), korganizer (>= %v-%r), korn (>= %v-%r), kpilot (>= %v-%r), ksync (>= %v-%r), ktnef (>= %v-%r)
BuildDepends: arts-dev (>= 1.3.0-1), cctools (>= 446-1) | cctools-single-module, dlcompat-dev (>= 20030629-5), fink (>= 0.20.2.1-1), freetype2 | freetype2-hinting, gtk+ (>= 1.2.10-12), glib (>= 1.2.10-8), kdelibs3-ssl-dev (>= %v-1) | kdelibs3-dev (>= %v-1), libart2, libiconv-dev, libjpeg, libmal, libpng3 (>= 1.2.5-4), ncurses-dev, pcre, pilot-link9 (>= 0.11.7-12), readline, qt3 (>= 3.3.2-1), x11-dev
Replaces: %N-dev (<< %v-1)
GCC: 3.3

CustomMirror: <<
  nam-US: http://ranger.befunk.com/fink
  nam-US: http://astrange.ithinksw.net/~astrange/ranger-fink
  nam-CA: http://www.southofheaven.net/befunk
<<
Source: mirror:kde:stable/3.3/src/kdepim-%v.tar.bz2
Source-MD5: 94520aeae0db2fac5da7d1ece7b575a5
Source2: mirror:custom:kde-build-20040821.tar.bz2
Source2-MD5: 5f222ad99ea992cf9a84d14ae12918cf
Source2ExtractDir: kdepim-%v

PatchScript: <<
  patch -p1 < %a/%n.patch
  perl -pi.bak -e 's,-O2,-Os,; s,doc/HTML,doc/kde,g' configure
<<

NoSetCPPFLAGS: true
NoSetLDFLAGS: true
ConfigureParams: --includedir=%p/include --libdir=%p/lib --prefix=%p --with-qt-dir=%p --with-qt-includes=%p/include/qt --with-extra-libs=%p/lib --with-extra-includes=%p/include --enable-mt --with-pic --enable-rpath --enable-shared=yes --enable-static=no --mandir=%p/share/man --with-xinerama --with-pam --disable-final --with-distribution='Fink/Mac OS X'

CompileScript: <<
#!/bin/sh -e

  export HOME=/tmp
  export PREFIX="%p"
  . ./environment-helper.sh

  ./build-helper.sh configure %N %v %r ./configure %c
  ./build-helper.sh make      %N %v %r make all all_libraries="$ALL_LIBRARIES"
<<

InstallScript: <<
#!/bin/sh -e

  export PREFIX="%p"
  . ./environment-helper.sh

  ./build-helper.sh install %N %v %r make -j1 install DESTDIR=%d

  mkdir -p %i/share/doc/kde-installed-packages
  touch %i/share/doc/kde-installed-packages/%N
  touch %i/share/doc/kde-installed-packages/%N-base

  rm -rf %i/share/doc/kde/en/kontact

  find %i -name \*knewstuff\* -exec rm -rf {} \;
<<

DocFiles: README*
SplitOff: <<
  Package: %N-dev
  Description: KDE - kdepim development headers and libraries
  Depends: %N (>= %v-%r), %N-base (>= %v-%r)
  Replaces: %N (<< %v-1), %N-common (<< %v-1), kdenetwork3-common, kdenetwork3-dev (<< %v-1)
  Recommends: arts-dev (>= 1.3.0-1), dlcompat-dev (>= 20030629-5), fink (>= 0.20.2.1-1), gtk+ (>= 1.2.10-12), glib (>= 1.2.10-8), kdelibs3-ssl-dev (>= %v-1) | kdelibs3-dev (>= %v-1), libart2, libjpeg, libpng3 (>= 1.2.5-4), pilot-link9 (>= 0.11.7-12), readline, qt3 (>= 3.3.2-1), x11-dev
  BuildDependsOnly: true
  Files: <<
    include
    lib/*.la
    lib/libkcal.dylib
    lib/libkdenetwork.dylib
    lib/libkdepim.dylib
    lib/libkgantt.dylib
    lib/libkorganizer.dylib
    lib/libkpilot.dylib
    lib/libkpimexchange.dylib
    lib/libksync.dylib
  <<
<<
SplitOff2: <<
  Package: kaddressbook
  Description: KDE - address book manager
  Depends: %N-base (>= %v-%r), %N-common (>= %v-%r)
  Replaces: %N (<< %v-%r), %N-dev (<< %v-%r), %N-common
  Recommends: %N (>= %v-%r)
  Files: <<
    bin/kabc2mutt
    bin/kaddressbook
    lib/kde3/*kaddressbook*
    share/applications/kde/kaddressbook.desktop
    share/apps/kaddressbook
    share/doc/kde/en/kaddressbook
    share/icons/*/*/apps/kaddressbook*
    share/services/kab*
    share/services/kaddressbook
    share/services/kresources/kabc
    share/services/ldifvcardthumbnail.desktop
    share/servicetypes/dcopaddressbook.desktop
    share/servicetypes/kaddressbook*
  <<
<<
SplitOff3: <<
  Package: kalarm
  Description: KDE - reminder notifications
  Depends: %N-base (>= %v-%r), %N-common (>= %v-%r)
  Replaces: %N (<< %v-%r), %N-dev (<< %v-%r)
  Recommends: %N (>= %v-%r)
  Files: <<
    bin/kalarm*
    share/applications/kde/kalarm.desktop
    share/applnk/.hidden/kalarmd.desktop
    share/applnk/Applications/kalarm.desktop
    share/apps/kalarm*
    share/autostart/kalarm*
    share/doc/kde/en/kalarm
    share/doc/kde/en/kcontrol/kalarmd
    share/icons/*/*/actions/kalarm*
  <<
<<
SplitOff4: <<
  Package: kandy
  Description: KDE - mobile phone synchronization
  Depends: %N-base (>= %v-%r), %N-common (>= %v-%r)
  Replaces: %N (<< %v-%r), %N-dev (<< %v-%r)
  Recommends: %N (>= %v-%r)
  Files: <<
    bin/kandy
    bin/kandy_client
    share/applications/kde/kandy.desktop
    share/applnk/Utilities/kandy.desktop
    share/apps/kandy
    share/config.kcfg/kandy.kcfg
    share/doc/kde/en/kandy
  <<
<<
SplitOff5: <<
  Package: karm
  Description: KDE - time tracker
  Depends: %N-base (>= %v-%r), %N-common (>= %v-%r)
  Replaces: %N (<< %v-%r), %N-dev (<< %v-%r)
  Recommends: %N (>= %v-%r)
  Files: <<
    bin/karm
    share/applications/kde/karm.desktop
    share/applnk/Utilities/karm.desktop
    share/apps/karm
    share/doc/kde/en/karm
    share/icons/*/*/apps/karm*
  <<
<<
SplitOff6: <<
  Package: kmail
  Description: KDE - e-mail client
  Depends: %N-base (>= %v-%r), %N-common (>= %v-%r), kdebase3-ssl-shlibs (>= %v-1) | kdebase3-shlibs (>= %v-1)
  Replaces: %N (<< %v-%r), %N-dev (<< %v-%r), kdenetwork3-common
  Recommends: %N (>= %v-%r)
  Files: <<
    bin/kmail*
    share/applications/kde/KMail.desktop
    share/applnk/Utilities/kmailcvt.desktop
    share/apps/kconf_update/kmail*
    share/apps/kconf_update/kpgp*
    share/apps/kconf_update/upgrade*
    share/apps/kmail*
    share/doc/kde/en/kmail*
    share/icons/*/*/apps/kmail*.png
    share/services/sieve.protocol
    share/servicetypes/dcopmail.desktop
  <<
<<
SplitOff7: <<
  Package: knode
  Description: KDE - usenet news reader
  Depends: %N-base (>= %v-%r), %N-common (>= %v-%r)
  Replaces: %N (<< %v-%r), %N-dev (<< %v-%r)
  Recommends: %N (>= %v-%r)
  Files: <<
    bin/knode
    share/applications/kde/KNode.desktop
    share/apps/knode
    share/doc/kde/en/knode
    share/icons/*/*/apps/knode*
    share/services/knewsservice.protocol
  <<
<<
SplitOff8: <<
  Package: knotes
  Description: KDE - sticky notes
  Depends: %N-base (>= %v-%r), %N-common (>= %v-%r), ncurses-shlibs, pilot-link9-shlibs, readline-shlibs
  Replaces: %N (<< %v-%r), %N-dev (<< %v-%r)
  Recommends: %N (>= %v-%r)
  Files: <<
    bin/knotes
    lib/kde3/*knotes*
    share/applications/kde/knotes.desktop
    share/apps/knotes
    share/doc/kde/en/knotes
    share/icons/*/*/apps/knotes*
  <<
<<
SplitOff9: <<
  Package: kontact
  Description: KDE - groupware
  Depends: %N-base (>= %v-%r), %N-common (>= %v-%r), kaddressbook (>= %v-%r), kmail (>= %v-%r), korganizer (>= %v-%r)
  Replaces: %N (<< %v-%r), %N-dev (<< %v-%r)
  Recommends: %N (>= %v-%r)
  Files: <<
    bin/kontact
    share/applications/kde/Kontact.desktop
    share/apps/kontact*
    share/config.kcfg/kontact.kcfg
    share/icons/*/*/apps/kontact*
    share/services/kontact*
    share/servicetypes/kontact*
  <<
<<
SplitOff10: <<
  Package: korganizer
  Description: KDE - calendar and scheduling
  Depends: %N-base (>= %v-%r), %N-common (>= %v-%r)
  Replaces: %N (<< %v-%r), %N-dev (<< %v-%r)
  Recommends: %N (>= %v-%r)
  Files: <<
    bin/ghns
    bin/khotnewstuff
    bin/korg*
    lib/kde3/*korg*
    share/applications/kde/korganizer.desktop
    share/apps/korganizer
    share/apps/korgac
    share/autostart/korgac.desktop
    share/config.kcfg/korganizer.kcfg
    share/config/khotnewstuffrc
    share/doc/kde/en/korganizer
    share/icons/*/*/actions/knewstuff*
    share/icons/*/*/apps/korganizer*
    share/services/korganizer
    share/services/kresources/kcal
    share/servicetypes/dcopcalendar.desktop
    share/servicetypes/korganizerpart.desktop
  <<
<<
SplitOff11: <<
  Package: korn
  Description: KDE - e-mail monitoring
  Depends: %N-base (>= %v-%r), %N-common (>= %v-%r)
  Replaces: %N (<< %v-%r), %N-dev (<< %v-%r)
  Recommends: %N (>= %v-%r)
  Files: <<
    bin/korn
    share/applications/kde/KOrn.desktop
    share/doc/kde/en/korn
    share/icons/*/*/apps/korn*
  <<
<<
SplitOff12: <<
  Package: kpilot
  Description: KDE - desktop software for handhelds
  Depends: %N-base (>= %v-%r), %N-common (>= %v-%r), libmal-shlibs, pilot-link9-shlibs, readline-shlibs
  Replaces: %N (<< %v-%r), %N-dev (<< %v-%r)
  Recommends: %N (>= %v-%r)
  Files: <<
    bin/kpalmdoc
    bin/kpilot*
    lib/kde3/*conduit*
    share/applications/kde/kpalmdoc.desktop
    share/applications/kde/kpilot*.desktop
    share/apps/kpilot
    share/doc/kde/en/kpilot
    share/icons/*/*/apps/kpalm*
    share/icons/*/*/apps/kpilot*
    share/services/*conduit*
    share/servicetypes/*conduit*
  <<
<<
SplitOff13: <<
  Package: ksync
  Description: KDE - PIM data synchronization tools
  Depends: %N-base (>= %v-%r), %N-common (>= %v-%r)
  Replaces: %N (<< %v-%r), %N-dev (<< %v-%r)
  Recommends: %N (>= %v-%r)
  Files: <<
    bin/ksync
    lib/kde3/libksync*
    share/apps/ksync
  <<
<<
SplitOff14: <<
  Package: ktnef
  Description: KDE - TNEF viewer/converter
  Depends: %N-base (>= %v-%r), %N-common (>= %v-%r)
  Replaces: %N (<< %v-%r), %N-dev (<< %v-%r)
  Recommends: %N (>= %v-%r)
  Files: <<
    bin/ktnef
    share/applications/kde/ktnef.desktop
    share/apps/ktnef
    share/icons/*/*/apps/ktnef*
    share/mimelnk/application/ms-tnef.desktop
  <<
<<
SplitOff15: <<
  Package: %N-common
  Description: KDE - kdepim common files
  Depends: %N-base (>= %v-%r), ncurses-shlibs, pilot-link9-shlibs, readline-shlibs
  Replaces: %N (<< %v-%r), %N-dev (<< %v-%r), kdenetwork3-common, kdenetwork3-dev (<< %v-1)
  Recommends: %N (>= %v-%r)
  Files: <<
    bin/ical2vcal
    bin/konsolekalendar
    lib
    share/applications/kde/konsolekalendar.desktop
    share/apps/kgantt
    share/doc/kde/en/konsolekalendar
    share/services/kfile_vcf*
    share/services/webcal.protocol
    share/servicetypes/calendar*
    share/icons/*/*/apps/konsolekalendar*
  <<
  Shlibs: <<
    %p/lib/libkalarmd.0.dylib 1.0.0 %N-common (>= 3.2.0-11)
    %p/lib/libkcal.2.dylib 3.0.0 %N-common (>= 3.2.0-11)
    %p/lib/libkcalsystem.0.dylib 1.0.0 %N-common (>= 3.2.0-11)
    %p/lib/libkdenetwork.2.dylib 0.0.0 %N-common (>= 3.2.0-1)
    %p/lib/libkdepim.1.dylib 2.0.0 %N-common (>= 3.2.0-11)
    %p/lib/libkgantt.0.dylib 1.0.0 %N-common (>= 3.2.0-11)
    %p/lib/libkorganizer.1.dylib 2.0.0 %N-common (>= 3.2.0-11)
    %p/lib/libkpilot.0.dylib 1.0.0 %N-common (>= 3.2.0-11)
    %p/lib/libkpimexchange.1.dylib 2.0.0 %N-common (>= 3.2.0-11)
    %p/lib/libksync.1.dylib 2.0.0 %N-common (>= 3.2.0-11)
  <<
<<
SplitOff16: <<
  Package: %N-base
  Description: KDE - kdepim base package
  Depends: kdebase3-ssl (>= %v-1) | kdebase3 (>= %v-1)
  Replaces: %N (<< %v-%r), %N-dev (<< %v-%r)
  Recommends: %N (>= %v-%r), kdebase3-ssl (>= %v-1) | kdebase3 (>= %v-1)
  Files: <<
    share/doc/kde-installed-packages/%N-base
  <<
<<

PostInstScript: <<
  env HOME=/tmp/ %p/bin/kbuildsycoca --global
<<

DescDetail: <<
Various tools for KDE Personal Information Management

Install the kdepim3 package if you want to install all of the
kdepim packages.
<<
