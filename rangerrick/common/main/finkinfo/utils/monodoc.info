Package: monodoc
Version: 1.0.6
Revision: 1

Source: http://www.go-mono.org/archive/%v/%n-%v.tar.gz
Source-MD5: f2fc27e8e4717d90dc7efa2450625693
#Patch: %n.patch

Depends: gal199-shlibs, gconf2, glib2-shlibs, gtk+2-shlibs, gtk-sharp (>= 1.0.6-1), gtkhtml3-shlibs, libgdiplus (>= 1.1.4-1), libglade2-shlibs, libgnomecanvas2-shlibs, libgnomeprint2.2-shlibs, libgnomeprintui2.2-shlibs, libsoup-ssl-shlibs, mono (>= 1.1.4-1)
BuildDepends: fink (>= 0.22.2-1), glib2, glib2-dev, gtk-sharp (>= 1.0.6-1), libgdiplus (>= 1.1.4-1), mono-dev (>= 1.1.4-1)
BuildConflicts: monodoc (<< 1.0.2-1)

SetMAKEFLAGS: -j1
NoSetMAKEFLAGS: true

ConfigureParams: --mandir=%p/share/man
CompileScript: <<
#!/bin/sh -ex

  export lt_cv_sys_max_cmd_len=65536
  export MONO_PATH=%b/browser:$MONO_PATH
  ./configure %c
  make
<<
InstallScript: <<
  make install DESTDIR="%d"
  rm -rf %i/lib/monodoc/sources/gtk-sharp*
<<

Description: Mono class documentation and browser
DescDetail: <<
This is the MonoDoc module.  It contains the documentation for
the Mono class libraries, tools to produce and edit the
documentation, and a documentation browser.

The documentation browser consists of a library and two
front-ends: a Gtk#-based one, and an ASP.NET-based version.

This set of tools is under heavy development, please report any bugs 
in the Mono/Doctools module of Ximian Bugzilla (bugzilla.ximian.com)
<<
PreInstScript: <<
  if [ -f "%p/var/lib/dpkg/info/monodoc.postrm" ] && [ `grep -c upgrade "%p/var/lib/dpkg/info/monodoc.postrm"` = 0 ]; then
    sudo echo "#!/bin/sh" > "%p/var/lib/dpkg/info/monodoc.postrm"
    sudo echo "exit 0" >> "%p/var/lib/dpkg/info/monodoc.postrm"
  fi
<<
PostInstScript: <<
  [ -x "%p/bin/monodoc" ] && [ -d "%p/lib/monodoc" ] && "%p/bin/monodoc" --make-index >/dev/null 2>&1 || :
<<
PostRmScript: <<
  if [ "upgrade" != "$1" ]; then
    rm -rf %p/lib/monodoc
  fi
<<
License: GPL
Maintainer: Benjamin Reed <monodoc@fink.racoonfink.com>
Homepage: http://www.go-mono.org/
