Package: coreutils
Version: 5.3.0
Revision: 1
BuildDepends: expat, help2man, libgettext3-dev, gettext-bin, gettext-tools, libiconv-dev
Depends: fileutils (>= %v-%r), shellutils (>= %v-%r), textutils (>= %v-%r)
NoSetLDFLAGS: true
SetLIBS: -L%p/lib
Source: ftp://alpha.gnu.org/gnu/coreutils/%n-%v.tar.bz2
Source-MD5: 903890208248639ac723d2c4988e04bd
InfoDocs: coreutils.info
ConfigureParams: --mandir=%p/share/man --infodir=%p/share/info
CompileScript: <<
#!/bin/sh -ex

  ./configure %c
  make
<<
InstallScript: <<
#!/bin/sh -ex
  make install DESTDIR=%d

  # stuff provided by dpkg
  rm -rf %i/bin/md5sum
  rm -rf %i/share/man/man1/md5sum*

  # stuff provided by debianutils
  rm -rf %i/bin/readlink
  rm -rf %i/share/man/man1/readlink*

  mv %i/bin/rm %i/bin/rm.gnu
  mv %i/share/man/man1/rm.1 %i/share/man/man1/rm.gnu.1
  rm -f %i/lib/charset.alias

  mv %i/bin/tsort %i/bin/tsort.gnu
  mv %i/share/man/man1/tsort.1 %i/share/man/man1/tsort.gnu.1

  mv %i/bin/nice %i/bin/nice.gnu
  mv %i/share/man/man1/nice.1 %i/share/man/man1/nice.gnu.1

  mkdir -p %i/share/doc/installed-packages
  touch %i/share/doc/installed-packages/%N
<<
Description: Core utilities
DescDetail: <<
The GNU Core Utilities are the basic file, shell and text manipulation
utilities of the GNU operating system.  These are the core utilities
which are expected to exist on every operating system.

Previously these utilities were offered as three individual sets of
GNU utilities, fileutils, shellutils, and textutils. Those three have
been combined into a single set of utilities called the coreutils.
<<
SplitOff: <<
  Package: fileutils
  Depends: libgettext3-shlibs, libiconv
  Description: Common shell commands like ls, touch, chmod
  DescDetail: <<
The GNU fileutils package contains common shell commands that work on
files and directories. This includes stuff like ls, mkdir, cp, rm,
chmod and touch. The GNU versions of these utilities often have extra
features like colored directory listings and heaps of command line
options.
  <<
  DescPort: <<
There are problems with rm (and recursive mv) which may have their
origin in the Darwin kernel. Since this breaks 'rm -rf', rm is
disabled by renaming it to rm.gnu. This appears to be fixed in 10.1,
but the fix persists while we still support 10.0.x.

The exotic commands like mknod may or may not work in a useful manner
on Darwin.

charset.alias is deleted because it is empty on Darwin anyway and
causes unnecessary conflicts between packages.
  <<
  PostInstScript: <<
  if [ -L %p/etc/alternatives/charset.alias ]; then
    update-alternatives --remove charset.alias %p/lib/charset.alias.fileutils
  fi
  <<
  Files: <<
    bin/chgrp
    bin/chmod
    bin/chown
    bin/cp
    bin/dd
    bin/df
    bin/dir
    bin/dircolors
    bin/du
    bin/install
    bin/link
    bin/ln
    bin/ls
    bin/mkdir
    bin/mkfifo
    bin/mknod
    bin/mv
    bin/rm.gnu
    bin/rmdir
    bin/shred
    bin/stat
    bin/sync
    bin/touch
    bin/unlink
    bin/vdir
    share/man/man1/chgrp.*
    share/man/man1/chmod.*
    share/man/man1/chown.*
    share/man/man1/cp.*
    share/man/man1/dd.*
    share/man/man1/df.*
    share/man/man1/dir.*
    share/man/man1/dircolors.*
    share/man/man1/du.*
    share/man/man1/install.*
    share/man/man1/link.*
    share/man/man1/ln.*
    share/man/man1/ls.*
    share/man/man1/mkdir.*
    share/man/man1/mkfifo.*
    share/man/man1/mknod.*
    share/man/man1/mv.*
    share/man/man1/rm.gnu.*
    share/man/man1/rmdir.*
    share/man/man1/shred.*
    share/man/man1/stat.*
    share/man/man1/sync.*
    share/man/man1/touch.*
    share/man/man1/unlink.*
    share/man/man1/vdir.*
  <<
<<
SplitOff2: <<
  Package: textutils
  Depends: libgettext3-shlibs, libiconv
  Description: Text file processing utilities
  DescPort: <<
md5sum is removed, it is already contained in the dpkg package.

tsort (topological sort) is renamed to tsort.gnu because it breaks
other packages. The GNU version of tsort doesn't output files that are
part of a cycle, while the BSD tsort that ships with Darwin does.

charset.alias is deleted because it is empty on Darwin anyway and
causes unnecessary conflicts between packages.
  <<
  Files: <<
    bin/cat
    bin/cksum
    bin/comm
    bin/csplit
    bin/cut
    bin/expand
    bin/fmt
    bin/fold
    bin/head
    bin/join
    bin/nl
    bin/od
    bin/paste
    bin/pr
    bin/ptx
    bin/sha1sum
    bin/sort
    bin/split
    bin/sum
    bin/tac
    bin/tail
    bin/tr
    bin/tsort.gnu
    bin/unexpand
    bin/uniq
    bin/wc
    share/man/man1/cat.*
    share/man/man1/cksum.*
    share/man/man1/comm.*
    share/man/man1/csplit.*
    share/man/man1/cut.*
    share/man/man1/expand.*
    share/man/man1/fmt.*
    share/man/man1/fold.*
    share/man/man1/head.*
    share/man/man1/join.*
    share/man/man1/nl.*
    share/man/man1/od.*
    share/man/man1/paste.*
    share/man/man1/pr.*
    share/man/man1/ptx.*
    share/man/man1/sha1sum.*
    share/man/man1/sort.*
    share/man/man1/split.*
    share/man/man1/sum.*
    share/man/man1/tac.*
    share/man/man1/tail.*
    share/man/man1/tr.*
    share/man/man1/tsort.gnu.*
    share/man/man1/unexpand.*
    share/man/man1/uniq.*
    share/man/man1/wc.*
  <<
<<
SplitOff3: <<
  Package: shellutils
  Depends: libgettext3-shlibs, libiconv
  Description: Command-line (shell) utilities
  DescDetail: <<
The GNU Shell Utilities are the basic shell-manipulation utilities
of the GNU Operating System.
  <<
  Files: <<
    bin
    share/man
  <<
<<
License: GPL
Maintainer: Benjamin Reed <ranger@befunk.com>
Homepage: http://www.gnu.org/software/coreutils/
