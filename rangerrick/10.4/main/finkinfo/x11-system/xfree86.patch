--- xc/extras/freetype2/builds/unix/detect.mk	Mon Apr 26 11:40:03 2004
+++ xc-new/extras/freetype2/builds/unix/detect.mk	Fri Mar 18 11:13:14 2005
@@ -20,7 +20,8 @@
   #
   is_unix := $(strip $(wildcard /sbin/init) \
                      $(wildcard /usr/sbin/init) \
-                     $(wildcard /hurd/auth))
+                     $(wildcard /hurd/auth) \
+                     $(wildcard /sbin/launchd))
   ifneq ($(is_unix),)
 
     PLATFORM := unix
--- xc/extras/freetype2/include/freetype/freetype.h	Mon Apr 26 11:40:13 2004
+++ xc-new/extras/freetype2/include/freetype/freetype.h	Fri Mar 18 11:13:14 2005
@@ -17,11 +17,7 @@
 
 
 #ifndef FT_FREETYPE_H
-#error "`ft2build.h' hasn't been included yet!"
-#error "Please always use macros to include FreeType header files."
-#error "Example:"
-#error "  #include <ft2build.h>"
-#error "  #include FT_FREETYPE_H"
+#include <ft2build.h>
 #endif
 
 
--- xc/extras/freetype2/src/base/ftapi.c	Mon Feb 28 18:19:13 2005
+++ xc-new/extras/freetype2/src/base/ftapi.c	Fri Mar 18 13:54:19 2005
@@ -161,5 +161,17 @@
     FT_Stream_ExitFrame( stream );
   }
                    
+  FT_BASE_DEF( FT_Short )
+  FT_Get_Short( FT_Stream stream )
+  {
+    return FT_GET_SHORT();
+  }
+
+
+  FT_BASE_DEF( FT_Long )
+  FT_Get_Long( FT_Stream stream )
+  {
+    return FT_GET_LONG();
+  }
 
 /* END */
--- xc/extras/freetype2/src/truetype/ttinterp.c	Mon Apr 26 11:40:59 2004
+++ xc-new/extras/freetype2/src/truetype/ttinterp.c	Fri Mar 18 11:13:14 2005
@@ -2474,7 +2474,7 @@
     W = Vx * Vx + Vy * Vy;
 
     /* Now, we want that Sqrt( W ) = 0x4000 */
-    /* Or 0x1000000 <= W < 0x1004000        */
+    /* Or 0x10000000 <= W < 0x10004000        */
 
     if ( Vx < 0 )
     {
@@ -2492,7 +2492,7 @@
     else
       S2 = FALSE;
 
-    while ( W < 0x1000000L )
+    while ( W < 0x10000000L )
     {
       /* We need to increase W by a minimal amount */
       if ( Vx < Vy )
@@ -2503,7 +2503,7 @@
       W = Vx * Vx + Vy * Vy;
     }
 
-    while ( W >= 0x1004000L )
+    while ( W >= 0x10004000L )
     {
       /* We need to decrease W by a minimal amount */
       if ( Vx < Vy )
--- xc/lib/GL/apple/dri_driver.h	2004-04-23 14:43:09.000000000 -0400
+++ xc-new/lib/GL/apple/dri_driver.h	2005-04-12 15:11:22.000000000 -0400
@@ -40,6 +40,12 @@
 #include "Xthreads.h"
 #include <CoreGraphics/CoreGraphics.h>
 #include <OpenGL/OpenGL.h>
+
+#ifndef GL_TYPEDEFS_2_0
+#define GL_TYPEDEFS_2_0
+    typedef char GLchar;
+#endif
+
 #include <OpenGL/CGLContext.h>
 
 #ifdef GLX_DIRECT_RENDERING
--- xc/lib/GL/apple/dri_glx.c	2004-07-27 16:23:58.000000000 -0400
+++ xc-new/lib/GL/apple/dri_glx.c	2005-04-12 15:07:22.000000000 -0400
@@ -51,10 +51,10 @@
 
 /* Apple OpenGL "driver" information. */
 static const char *__driDriverName = "apple";
-static const char __driConfigOptions[] = "";
-static const int __driDriverMajor = 1;
-static const int __driDriverMinor = 0;
-static const int __driDriverPatch = 0;
+const char __driConfigOptions[] = "";
+const int __driDriverMajor = 1;
+const int __driDriverMinor = 0;
+const int __driDriverPatch = 0;
 
 
 /*
--- xc/programs/Xserver/hw/darwin/darwinKeyboard.c	2004-04-23 15:06:15.000000000 -0400
+++ xc-new/programs/Xserver/hw/darwin/darwinKeyboard.c	2005-04-12 15:02:59.000000000 -0400
@@ -64,10 +64,10 @@
 /* Define this to use Alt for Mode_switch. */
 #define ALT_IS_MODE_SWITCH 1
 
-#include <drivers/event_status_driver.h>
-#include <IOKit/hidsystem/ev_keymap.h>
 #include <stdio.h>
 #include <stdlib.h>
+#include <drivers/event_status_driver.h>
+#include <IOKit/hidsystem/ev_keymap.h>
 #include <errno.h>
 #include <sys/stat.h>
 #include <architecture/byte_order.h>  // For the NXSwap*
--- xc/programs/Xserver/hw/darwin/quartz/applewm.c	2004-04-23 15:15:17.000000000 -0400
+++ xc-new/programs/Xserver/hw/darwin/quartz/applewm.c	2005-04-12 16:05:32.000000000 -0400
@@ -59,7 +59,7 @@
 
 DEFINE_ATOM_HELPER(xa_native_screen_origin, "_NATIVE_SCREEN_ORIGIN")
 
-static AppleWMProcsPtr appleWMProcs;
+AppleWMProcsPtr appleWMProcs;
 
 static int WMErrorBase;
 
