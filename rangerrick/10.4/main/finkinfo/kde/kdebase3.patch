diff -uNr kdebase-3.3.92/kdeprint/kprinter/printwrapper.cpp kdebase-3.3.92-new/kdeprint/kprinter/printwrapper.cpp
--- kdebase-3.3.92/kdeprint/kprinter/printwrapper.cpp	Fri Nov 26 07:07:25 2004
+++ kdebase-3.3.92-new/kdeprint/kprinter/printwrapper.cpp	Mon Feb 14 09:15:25 2005
@@ -137,10 +137,6 @@
 {
 	KCmdLineArgs	*args = KCmdLineArgs::parsedArgs();
 
-#if defined(HAVE_SIGACTION) && !defined(HAVE_SIGSET)
-	struct sigaction action;
-#endif /* HAVE_SIGACTION && !HAVE_SIGSET*/
-
 	// read variables from command line
 	QString	printer = args->getOption("d");
 	QString	title = args->getOption("t");
@@ -324,6 +320,10 @@
 			errormsg(i18n("Nothing to print."));
 
 		// print from stdin
+
+#if defined(HAVE_SIGACTION) && !defined(HAVE_SIGSET)
+	struct sigaction action;
+#endif /* HAVE_SIGACTION && !HAVE_SIGSET*/
 
 #  if defined(HAVE_SIGSET)
 		sigset(SIGHUP, signal_handler);
diff -uNr kdebase-3.3.92/kioslave/info/kde-info2html.conf kdebase-3.3.92-new/kioslave/info/kde-info2html.conf
--- kdebase-3.3.92/kioslave/info/kde-info2html.conf	Tue Feb 24 06:30:11 2004
+++ kdebase-3.3.92-new/kioslave/info/kde-info2html.conf	Mon Feb 14 09:15:25 2005
@@ -25,6 +25,7 @@
 
 #-- location of info files.
 our @INFODIR = (
+	    "@FINKPREFIX@/share/info",
 	    "/usr/share/info",
 	    "/usr/info",
 	    "/usr/lib/info",
diff -uNr kdebase-3.3.92/kioslave/man/kio_man.cpp kdebase-3.3.92-new/kioslave/man/kio_man.cpp
--- kdebase-3.3.92/kioslave/man/kio_man.cpp	Mon Nov 15 21:10:34 2004
+++ kdebase-3.3.92-new/kioslave/man/kio_man.cpp	Mon Feb 14 09:15:25 2005
@@ -50,7 +50,7 @@
 
 MANProtocol *MANProtocol::_self = 0;
 
-#define SGML2ROFF_DIRS "/usr/lib/sgml"
+#define SGML2ROFF_DIRS "@FINKPREFIX@/share/sgml"
 
 /*
  * Drop trailing ".section[.gz]" from name
@@ -862,6 +862,7 @@
                         "/usr/sunpc/man",
                         "/usr/ncd/man",
                         "/usr/newsprint/man",
+                        "@FINKPREFIX@/share/man",
                         NULL };
 
 
diff -uNr kdebase-3.3.92/libkonq/Makefile.am kdebase-3.3.92-new/libkonq/Makefile.am
--- kdebase-3.3.92/libkonq/Makefile.am	Sun Nov 21 05:07:01 2004
+++ kdebase-3.3.92-new/libkonq/Makefile.am	Mon Feb 14 09:38:58 2005
@@ -21,7 +21,7 @@
 
 lib_LTLIBRARIES = libkonq.la
 libkonq_la_LDFLAGS = $(all_libraries) -version-info 6:0:2 -no-undefined
-libkonq_la_LIBADD = $(LIB_KPARTS)
+libkonq_la_LIBADD = $(LIB_KPARTS) $(LIBZ)
 
 libkonq_la_SOURCES = konq_popupmenu.cc knewmenu.cc \
    konq_xmlguiclient.cc\
diff -uNr kdebase-3.3.92/startkde kdebase-3.3.92-new/startkde
--- kdebase-3.3.92/startkde	Thu Feb  3 18:18:46 2005
+++ kdebase-3.3.92-new/startkde	Mon Feb 14 09:15:25 2005
@@ -3,6 +3,14 @@
 #  DEFAULT KDE STARTUP SCRIPT ( KDE-3.3.92 )
 #
 
+source @FINKPREFIX@/bin/init.sh
+
+for KEY in Up Down Left Right; do
+	FOO=$(xmodmap -pk | grep "($KEY)" | grep -i slash | cut -f 1); xmodmap -e"keycode $FOO = $KEY"
+done
+
+source "@FINKPREFIX@/bin/init.sh"
+
 # When the X server dies we get a HUP signal from xinit. We must ignore it
 # because we still need to do some cleanup.
 trap 'echo GOT SIGHUP' HUP
@@ -179,21 +187,24 @@
 
 echo 'startkde: Starting up...'  1>&2
 
-# run KPersonalizer before the session, if this is the first login
-if kreadconfig --file kpersonalizerrc --group General --key FirstLogin --default true --type bool; then
-    # start only dcopserver, don't start whole kdeinit (takes too long)
-    echo 'startkde: Running kpersonalizer...'  1>&2
-    dcopserver
-    kwin --lock &
-    kpersonalizer --before-session
-    # handle kpersonalizer restarts (language change)
-    while test $? -eq 1; do
-        kpersonalizer --r --before-session
-    done
-    dcopserver_shutdown
-    # shutdown will also make kwin quit, give it time to do so
-    sleep 1
-fi
+# on osx we skip this, the defaults are sane and most people
+# do bad things like "mac os menus" which makes it worse
+
+## run KPersonalizer before the session, if this is the first login
+#if kreadconfig --file kpersonalizerrc --group General --key FirstLogin --default true --type bool; then
+#    # start only dcopserver, don't start whole kdeinit (takes too long)
+#    echo 'startkde: Running kpersonalizer...'  1>&2
+#    dcopserver
+#    kwin --lock &
+#    kpersonalizer --before-session
+#    # handle kpersonalizer restarts (language change)
+#    while test $? -eq 1; do
+#        kpersonalizer --r --before-session
+#    done
+#    dcopserver_shutdown
+#    # shutdown will also make kwin quit, give it time to do so
+#    sleep 1
+#fi
 
 # the splashscreen and progress indicator
 splash=`kreadconfig --file ksplashrc --group KSplash --key Theme`
@@ -227,7 +238,29 @@
 # We only check for 255 which means that the ksmserver process could not be 
 # started, any problems thereafter, e.g. ksmserver failing to initialize, 
 # will remain undetected.
-test -n "$KDEWM" && KDEWM="--windowmanager $KDEWM"
+
+USE_PROXY=0
+if test -n "$KDEWM"; then
+  if test -z `expr "$KDEWM" : '\(.*quartz-wm.*\)'`; then
+    USE_PROXY=1
+  fi
+  KDEWM="--windowmanager $KDEWM"
+else
+  KDEWM="--windowmanager kwin"
+  USE_PROXY=1
+fi
+
+if test "$USE_PROXY" = "1"; then
+  if test -x /usr/X11R6/bin/quartz-wm; then
+    /usr/X11R6/bin/quartz-wm --only-proxy >/dev/null 2>&1 &
+  else
+    AUTOCUTSEL=`which autocutsel 2>/dev/null`
+    if test -n "$AUTOCUTSEL" && test -x "$AUTOCUTSEL"; then
+      $AUTOCUTSEL >/dev/null 2>&1 &
+    fi
+  fi
+fi
+
 kwrapper ksmserver $KDEWM 
 if test $? -eq 255; then
   # Startup error
