Package: gemrb
Version: 0.2.6
Revision: 1021
Description: Infinity game engine clone
License: GPL
Maintainer: None <fink-devel@lists.sourceforge.net>

Depends: libogg-shlibs, libvorbis-shlibs, sdl-shlibs (>= 1.2.9-1001), x11-shlibs, python24-shlibs (>= 1:2.4.2-1004)
BuildDepends: libogg, libvorbis, sdl (>= 1.2.9-1001), x11-dev, python24 (>= 1:2.4.2-1004)
GCC: 4.0

Source: mirror:sourceforge:%n/%n-%v.tar.gz
Source-MD5: efff48f8845e47bab499e6eb7cab62e6
Patch: %n.patch

SetCPPFLAGS: -no-cpp-precomp -I%p/include/SDL
SetLIBS: -L%p/lib
NoSetLDFLAGS: true
ConfigureParams: --with-sdl-prefix=%p --disable-sdltest
CompileScript: <<
#!/bin/sh -ex

	ln -s /System/Library/Frameworks/OpenAL.framework/Headers AL
	./configure %c
	make
<<

InstallScript: <<
#!/bin/sh -ex
	make install DESTDIR=%d
	rm -rf %i/bin/Cache
	install -d -m 755 %i/var/cache/gemrb
	perl -pi -e 's,^CachePath=.*,CachePath=%p/var/cache/gemrb,; s,^GUIScriptsPath=.*,GUIScriptsPath=%p/share/gemrb/GUIScripts,; s,^.PluginsPath=.*,PluginsPath=%p/lib/gemrb,' %i/etc/GemRB.cfg
<<
DocFiles: AUTHORS COPYING ChangeLog INSTALL NEWS README TODO

ConfFiles: %p/etc/GemRB.cfg

DescDetail: <<
GemRB is an Infinity Engine clone that will run games like
Baldur's Gate, Icewind Dale, Planescape Torment, etc.
<<
DescUsage: <<
You will probably need to edit %p/etc/GemRB.cfg to be able to
use this application.
<<

