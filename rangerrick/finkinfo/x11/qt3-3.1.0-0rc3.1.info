Package: qt3
Version: 3.1.0
Revision: 0rc3.1
GCC: 3.1
#Source: ftp://ftp.trolltech.com/qt/source/qt-x11-free-%v-rc3.tar.bz2
#SourceDirectory: qt-x11-free-%v-b2
Source: ftp://ktown.kde.org/pub/kde/unstable/kde-3.1-rc2/src/qt-x11-free-%v-rc3.tar.gz
SourceDirectory: qt-x11-free-%v
Description: Cross-Platform GUI application framework.
Depends: %N-shlibs, %N-dev, %N-designer, %N-linguist, %N-doc
Suggests: libpng3, libjpeg, freetype2
BuildDepends: dlcompat (>= 20020929), libgl, freetype2 (>= 2.0.8), libpng3 (>= 1.2.5), libjpeg (>= 6b), cups-dev (>= 1.1.15), x11
Replaces: qt, qt2, %N-doc
Conflicts: qt, qt2
BuildDependsOnly: true
PatchScript: sed 's|@PREFIX@|%p|g' <%a/%f.patch | patch -p1
CompileScript: <<
#!/bin/sh
 export QTDIR=`pwd`
 export DYLD_LIBRARY_PATH="$QTDIR/lib:%p/lib:$DYLD_LIBRARY_PATH"
 export PATH="$QTDIR/bin:$PATH"
 export QMAKESPEC=$QTDIR/mkspecs/darwin-g++
 if test -r /usr/X11R6/lib/libXft.2.dylib; then
  FONTCONFIG="-lfontconfig"
 fi
 # we have to force header/lib ordering or things get really wiggy
 # looks ugly, but it's better than patching the source
 echo "yes" | ./configure -I/usr/X11R6/include/freetype2 -I/usr/X11R6/include \
	-I. -I../../../../include -I../../../include -I../../include -I../include \
	-I%p/include -L. -L../../../../lib -L../../../lib -L../../lib -L../lib \
	-L%p/lib -L/usr/X11R6/lib -DQ_OS_DARWIN $FONTCONFIG -DQ_OS_FREEBSD \
	-buildkey qt3-jaguar -platform darwin-g++ -xplatform darwin-g++ \
	-prefix %p -bindir %p/bin -libdir %p/lib -docdir %p/share/doc/%n \
	-datadir %p/share/qt3 -headerdir %p/include/qt -plugindir %p/lib/qt3-plugins \
	-release -shared -fast -no-exceptions -thread -cups -stl \
	-qt-gif -plugin-imgfmt-png -plugin-imgfmt-jpeg -plugin-imgfmt-mng \
	-system-libpng -system-libjpeg -system-zlib -largefile \
	-sm -xinerama -xrender -xft -xkb `cat /tmp/qt-build-options`

 make -j2 INSTALLPREFIX=%p symlinks src-qmake src-moc sub-src sub-tools
<<
InstallScript: <<
#!/bin/sh
 mkdir -p %i/share/qt3
 export QTDIR=`pwd`
 export DYLD_LIBRARY_PATH="$QTDIR/lib:%p/lib:$DYLD_LIBRARY_PATH"
 export PATH="$QTDIR/bin:$PATH"
 export QMAKESPEC=$QTDIR/mkspecs/darwin-g++
 make -j2 install INSTALL_ROOT=%d INSTALLPREFIX=%p
<<
SplitOff: <<
  Package: %N-shlibs
  RuntimeVars: <<
    QTDIR: %p
    QMAKESPEC: %p/share/qt3/mkspecs/darwin-g++
  <<
  Suggests: %N-dev, %N-designer, %N-linguist, %N-doc
  Replaces: qt-shlibs, qt
  Conflicts: qt-shlibs, qt
  Depends: dlcompat (>= 20020929), libgl, freetype2-shlibs (>= 2.0.8), libpng3-shlibs (>= 1.2.5), libjpeg-shlibs (>= 6b)
  BuildDependsOnly: true
  Files: <<
    lib/libqt-mt.*.dylib
    lib/libeditor.*.dylib
    lib/libqui.*.dylib
    lib/qt3-plugins/imageformats
  <<
<<
SplitOff2: <<
  Package: %N-designer
  Depends: %N-shlibs (>= %v-%r), %N-dev (>= %v-%r), dlcompat (>= 20020929), freetype2-shlibs (>= 2.0.8), libjpeg-shlibs (>= 6b), libpng3-shlibs (>= 1.2.5), x11
  BuildDependsOnly: true
  Replaces: %N-bin
  Conflicts: %N-bin
  Files: <<
    bin/designer
    lib/libdesigner*
    lib/qt3-plugins/designer
  <<
<<
SplitOff3: <<
  Package: %N-linguist
  Depends: %N-shlibs (>= %v-%r), dlcompat (>= 20020929), freetype2-shlibs (>= 2.0.8), libjpeg-shlibs (>= 6b), libpng3-shlibs (>= 1.2.5), x11
  BuildDependsOnly: true
  Replaces: %N-bin
  Conflicts: %N-bin
  Files: <<
    bin/l*
    bin/qm2ts
    share/qt3/phrasebooks
  <<
<<
SplitOff4: <<
  Package: %N-dev
  Depends: %N-shlibs (>= %v-%r), dlcompat (>= 20020929), freetype2-shlibs (>= 2.0.8), libjpeg-shlibs (>= 6b), libpng3-shlibs (>= 1.2.5), x11
  BuildDependsOnly: true
  Replaces: %N-bin, %N
  Conflicts: %N-bin
  Files: <<
    bin/assistant
    bin/moc
    bin/qmake
    bin/uic
    include
    lib/*.a
    lib/*.prl
    lib/*.dylib
    share/qt3/mkspecs
    share/qt3/templates
  <<
<<
SplitOff5: <<
  Package: %N-doc
  Replaces: qt-doc, qt2, qt
  Conflicts: qt-doc, qt2, qt
  Depends: %N-shlibs (>= %v-%r)
  Files: share/doc/%N/
<<
DocFiles: FAQ INSTALL LICENSE* MANIFEST PLATFORMS README
DescPort: <<
Had to rework some of the code's assumptions that because we're
on mac, we're building Qt/Mac.
<<
License: GPL
Maintainer: Benjamin Reed <ranger@befunk.com>
Homepage: http://www.trolltech.com/
