Index: lib/catalog/Makefile.am
===================================================================
RCS file: /home/kde/kdevelop/lib/catalog/Makefile.am,v
retrieving revision 1.3
diff -u -r1.3 Makefile.am
--- lib/catalog/Makefile.am	6 Jun 2003 14:59:02 -0000	1.3
+++ lib/catalog/Makefile.am	9 Nov 2003 06:25:51 -0000
@@ -1,7 +1,8 @@
 INCLUDES = $(all_includes)
 lib_LTLIBRARIES =  libkdevcatalog.la
 libkdevcatalog_la_SOURCES = tag.cpp
-libkdevcatalog_la_LIBADD = -ldb
+libkdevcatalog_la_LIBADD = $(LIB_QT) $(LIB_X11) -ldb
+libkdevcatalog_la_LDFLAGS = $(all_libraries) -no-undefined
 
 kdevcatalogincludedir = $(includedir)/kdevelop/catalog
 kdevcataloginclude_HEADERS = gcatalog.h gcatalog.tcc catalog.h tag.h
Index: lib/cppparser/Makefile.am
===================================================================
RCS file: /home/kde/kdevelop/lib/cppparser/Makefile.am,v
retrieving revision 1.2
diff -u -r1.2 Makefile.am
--- lib/cppparser/Makefile.am	30 May 2003 17:12:21 -0000	1.2
+++ lib/cppparser/Makefile.am	9 Nov 2003 06:25:51 -0000
@@ -1,6 +1,7 @@
 INCLUDES = $(all_includes)
 lib_LTLIBRARIES =  libkdevcppparser.la
-libkdevcppparser_la_LDFLAGS = $(all_libraries)
+libkdevcppparser_la_LIBADD  = $(LIB_QT) $(LIB_KDECORE)
+libkdevcppparser_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -no-undefined
 libkdevcppparser_la_SOURCES =  ast.cpp driver.cpp errors.cpp lexer.cpp lookup.cpp parser.cpp tree_parser.cpp
 
 kdevcppparserincludedir = $(includedir)/kdevelop/cppparser
Index: parts/cppsupport/main.cpp
===================================================================
RCS file: /home/kde/kdevelop/parts/cppsupport/Attic/main.cpp,v
retrieving revision 1.16
diff -u -r1.16 main.cpp
--- parts/cppsupport/main.cpp	30 May 2003 16:43:14 -0000	1.16
+++ parts/cppsupport/main.cpp	9 Nov 2003 06:25:51 -0000
@@ -186,7 +186,7 @@
     }
 }
 
-int main( int argc, char* argv[] )
+extern "C" int kdemain( int argc, char* argv[] )
 {
     KStandardDirs stddir;
 
Index: parts/doctreeview/Makefile.am
===================================================================
RCS file: /home/kde/kdevelop/parts/doctreeview/Makefile.am,v
retrieving revision 1.17
diff -u -r1.17 Makefile.am
--- parts/doctreeview/Makefile.am	16 May 2003 21:03:05 -0000	1.17
+++ parts/doctreeview/Makefile.am	9 Nov 2003 06:25:52 -0000
@@ -11,13 +11,13 @@
 
 libkdevdoctreeview_la_SOURCES = doctreeviewfactory.cpp 				doctreeviewpart.cpp 				doctreeviewwidget.cpp  				doctreeglobalconfigwidgetbase.ui 				doctreeglobalconfigwidget.cpp 				adddocitemdlg.cpp 				docindexdlg.cpp 				docsearchdlg.cpp 				misc.cpp 				librarydocdlgbase.ui 				doctreeprojectconfigwidgetbase.ui 				doctreeprojectconfigwidget.cpp librarydocdlg.cpp librarydocdlg.h doclineedit.cpp doclineedit.h choosedlg.cpp choosedlg.h
 
-bin_PROGRAMS = kdevelop-htdig
-kdevelop_htdig_SOURCES = htdigindex.cpp
+bin_PROGRAMS =
+lib_LTLIBRARIES =
+kdeinit_LTLIBRARIES = kdevelop-htdig.la
 
-# gideon_index_CXXFLAGS = -DINDEXER ## makes problems with automake 1.5 and am_edit (Walter/2.01.2002)
-
-kdevelop_htdig_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-kdevelop_htdig_LDADD = $(LIB_KIO) $(LIB_KDEUI)
+kdevelop_htdig_la_SOURCES = htdigindex.cpp
+kdevelop_htdig_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module -avoid-version
+kdevelop_htdig_la_LIBADD = $(LIB_KIO) $(LIB_KDEUI)
 
 kio_kdeapi_la_SOURCES = kio_kdeapi.cpp
 kio_kdeapi_la_LIBADD = $(LIB_KIO)
Index: src/Makefile.am
===================================================================
RCS file: /home/kde/kdevelop/src/Makefile.am,v
retrieving revision 1.33
diff -u -r1.33 Makefile.am
--- src/Makefile.am	6 Jun 2003 19:56:00 -0000	1.33
+++ src/Makefile.am	9 Nov 2003 06:25:52 -0000
@@ -6,9 +6,11 @@
 	   -I$(top_srcdir)/lib/structure \
 	   $(all_includes)
 
-bin_PROGRAMS = gideon
+bin_PROGRAMS =
+lib_LTLIBRARIES =
+kdeinit_LTLIBRARIES = gideon.la
 
-gideon_SOURCES = main.cpp mainwindow.cpp core.cpp partcontroller.cpp \
+gideon_la_SOURCES = main.cpp mainwindow.cpp core.cpp partcontroller.cpp \
 		 projectmanager.cpp plugincontroller.cpp api.cpp \
 		 partselectwidget.cpp settingswidget.ui toplevel.cpp \
 		 mainwindowideal.cpp statusbar.cpp editorproxy.cpp \
@@ -16,9 +18,9 @@
 		 projectsession.cpp mainwindowshare.cpp \
 		 generalinfowidgetbase.ui generalinfowidget.cpp
 
-gideon_METASOURCES = AUTO
-gideon_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-gideon_LDADD = $(top_builddir)/lib/widgets/libwidgets.la \
+gideon_la_METASOURCES = AUTO
+gideon_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module -avoid-version
+gideon_la_LIBADD = $(top_builddir)/lib/widgets/libwidgets.la \
 	       	$(LIB_KDEUI) $(LIB_KPARTS) $(LIB_KHTML) \
 		-lktexteditor \
 		$(top_builddir)/lib/interfaces/libkdevinterfaces.la \
Index: src/main.cpp
===================================================================
RCS file: /home/kde/kdevelop/src/main.cpp,v
retrieving revision 1.59
diff -u -r1.59 main.cpp
--- src/main.cpp	27 Jun 2003 21:35:30 -0000	1.59
+++ src/main.cpp	9 Nov 2003 06:25:52 -0000
@@ -25,7 +25,7 @@
     { 0,0,0 }
 };
 
-int main(int argc, char *argv[])
+extern "C" int kdemain(int argc, char *argv[])
 {
   static const char description[] = I18N_NOOP("Gideon");
   KAboutData aboutData("gideon", I18N_NOOP("Gideon"),
Index: parts/doctreeview/htdigindex.cpp
===================================================================
RCS file: /home/kde/kdevelop/parts/doctreeview/htdigindex.cpp,v
retrieving revision 1.18
diff -u -u -r1.18 htdigindex.cpp
--- parts/doctreeview/htdigindex.cpp	30 Jun 2003 13:46:52 -0000	1.18
+++ parts/doctreeview/htdigindex.cpp	9 Nov 2003 06:29:03 -0000
@@ -548,7 +548,7 @@
 	}
 }
 
-int main(int argc, char *argv[])
+extern "C" int kdemain(int argc, char *argv[])
 {
 #if 0
     static KCmdLineOptions options[] = {
