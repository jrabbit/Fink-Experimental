diff -uNbr kopete-0.6.0/kopete/plugins/importer/Makefile.am kopete-0.6.0-new/kopete/plugins/importer/Makefile.am
--- kopete-0.6.0/kopete/plugins/importer/Makefile.am	Sat Feb  8 20:04:12 2003
+++ kopete-0.6.0-new/kopete/plugins/importer/Makefile.am	Sun Feb  9 22:15:21 2003
@@ -5,7 +5,7 @@
 kopete_importer_la_SOURCES     = importerplugin.cpp importer.cpp imp.cpp importeruibase.ui
 kopete_importer_la_METASOURCES = AUTO
 kopete_importer_la_LDFLAGS     = -module
-kopete_importer_la_LIBADD      = ../../libkopete/libkopete.la ../../protocols/msn/kopete_msn.la ../../protocols/icq_new/kopete_icq.la -lkio
+kopete_importer_la_LIBADD      = ../../libkopete/libkopete.la ../../protocols/msn/libkopete_msn_shared.la ../../protocols/icq_new/libkopete_icq_shared.la -lkio
 
 data_DATA = importer.plugin
 datadir = $(kde_datadir)/kopete
diff -uNbr kopete-0.6.0/kopete/protocols/icq_new/Makefile.am kopete-0.6.0-new/kopete/protocols/icq_new/Makefile.am
--- kopete-0.6.0/kopete/protocols/icq_new/Makefile.am	Sat Feb  8 20:04:12 2003
+++ kopete-0.6.0-new/kopete/protocols/icq_new/Makefile.am	Sun Feb  9 22:14:27 2003
@@ -8,18 +8,24 @@
 	-I../../libkopete/ui \
 	$(all_includes)
 
-kde_module_LTLIBRARIES = kopete_icq.la
+kde_module_LTLIBRARIES = kopete_icq.la libkopete_icq_shared.la
 
-kopete_icq_la_SOURCES = icqprotocol.cpp icqpreferences.cpp \
+libkopete_icq_shared_la_SOURCES = icqprotocol.cpp icqpreferences.cpp \
     icqaddcontactpage.cpp icqcontact.cpp  \
     icqfiletransfer.cpp icqchangestatus.cpp icquserinfo.cpp \
 	icquserreason.cpp enable.cpp client.cpp
-kopete_icq_la_LDFLAGS = -no-undefined -module $(KDE_PLUGIN) $(all_libraries)
-kopete_icq_la_LIBADD  = ./ui/libkopeteicqui.la \
+libkopete_icq_shared_la_LDFLAGS = -no-undefined $(all_libraries)
+libkopete_icq_shared_la_LIBADD  = ./ui/libkopeteicqui.la \
 		       ./libicq/libicq.la \
 		       	$(top_builddir)/kopete/libkopete/libkopete.la \
 			$(LIB_KIO)
 
+kopete_icq_la_SOURCES = dummy.cpp
+kopete_icq_la_LDFLAGS = -no-undefined -avoid-version $(all_libraries) -module $(KDE_PLUGIN)
+kopete_icq_la_LIBADD  = libkopete_icq_shared.la
+
 data_DATA = icq.plugin
 datadir = $(kde_datadir)/kopete
 
+dummy.cpp:
+	echo > dummy.cpp
diff -uNbr kopete-0.6.0/kopete/protocols/icq_new/libicq/Makefile.am kopete-0.6.0-new/kopete/protocols/icq_new/libicq/Makefile.am
--- kopete-0.6.0/kopete/protocols/icq_new/libicq/Makefile.am	Sat Feb  8 20:04:12 2003
+++ kopete-0.6.0-new/kopete/protocols/icq_new/libicq/Makefile.am	Sun Feb  9 21:13:44 2003
@@ -1,3 +1,5 @@
+KDE_OPTIONS = nofinal
+
 noinst_LTLIBRARIES = libicq.la
 
 libicq_la_METASOURCES = AUTO
diff -uNbr kopete-0.6.0/kopete/protocols/icq_new/libicq/message.cpp kopete-0.6.0-new/kopete/protocols/icq_new/libicq/message.cpp
--- kopete-0.6.0/kopete/protocols/icq_new/libicq/message.cpp	Sat Feb  8 20:04:12 2003
+++ kopete-0.6.0-new/kopete/protocols/icq_new/libicq/message.cpp	Sun Feb  9 21:29:26 2003
@@ -859,7 +859,7 @@
             }
             if (f->files.size() > 1){
                 char b[32];
-                snprintf(b, sizeof(b), "%u Files", f->files.size());
+                snprintf(b, sizeof(b), "%u Files", (unsigned int)f->files.size());
                 f->Name = b;
             }else{
                 f->Name = f->shortName();
diff -uNbr kopete-0.6.0/kopete/protocols/irc/libkirc/kirc.cpp kopete-0.6.0-new/kopete/protocols/irc/libkirc/kirc.cpp
--- kopete-0.6.0/kopete/protocols/irc/libkirc/kirc.cpp	Sat Feb  8 20:04:12 2003
+++ kopete-0.6.0-new/kopete/protocols/irc/libkirc/kirc.cpp	Sun Feb  9 21:31:37 2003
@@ -17,6 +17,7 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "config.h"
 #include "kirc.h"
 
 #include <kdebug.h>
diff -uNbr kopete-0.6.0/kopete/protocols/jabber/Makefile.am kopete-0.6.0-new/kopete/protocols/jabber/Makefile.am
--- kopete-0.6.0/kopete/protocols/jabber/Makefile.am	Sat Feb  8 20:04:12 2003
+++ kopete-0.6.0-new/kopete/protocols/jabber/Makefile.am	Sun Feb  9 21:26:24 2003
@@ -15,7 +15,7 @@
 kopete_jabber_la_LDFLAGS = -no-undefined -module $(KDE_PLUGIN)
 kopete_jabber_la_LIBADD  = ../../libkopete/libkopete.la \
 	ui/libkopetejabberui.la \
-	./psi/libpsi/src/libpsi.la 
+	./psi/libpsi/src/libpsi.la -lcrypto
 
 data_DATA = jabber.plugin
 datadir = $(kde_datadir)/kopete
diff -uNbr kopete-0.6.0/kopete/protocols/msn/Makefile.am kopete-0.6.0-new/kopete/protocols/msn/Makefile.am
--- kopete-0.6.0/kopete/protocols/msn/Makefile.am	Sat Feb  8 20:04:12 2003
+++ kopete-0.6.0-new/kopete/protocols/msn/Makefile.am	Sun Feb  9 22:10:23 2003
@@ -7,15 +7,22 @@
 	-I../../libkopete/ui \
 	$(all_includes)
 
-kde_module_LTLIBRARIES = kopete_msn.la
+kde_module_LTLIBRARIES = kopete_msn.la libkopete_msn_shared.la
 
-kopete_msn_la_SOURCES = msnprotocol.cpp msnidentity.cpp \
+libkopete_msn_shared_la_SOURCES = msnprotocol.cpp msnidentity.cpp \
 	msnpreferences.cpp msnaddcontactpage.cpp \
 	msncontact.cpp msnsocket.cpp msnauthsocket.cpp msndispatchsocket.cpp msnmessagemanager.cpp\
 	msndebugrawcmddlg.cpp msnnotifysocket.cpp msnswitchboardsocket.cpp msnfiletransfersocket.cpp
-kopete_msn_la_LDFLAGS = -no-undefined -module $(KDE_PLUGIN) $(all_libraries)
-kopete_msn_la_LIBADD  = ./ui/libkopetemsnui.la \
+libkopete_msn_shared_la_LDFLAGS = -no-undefined $(all_libraries)
+libkopete_msn_shared_la_LIBADD  = ./ui/libkopetemsnui.la \
 	../../libkopete/libkopete.la  $(LIB_KIO)
 
+kopete_msn_la_SOURCES = dummy.cpp
+kopete_msn_la_LIBADD  = libkopete_msn_shared.la
+kopete_msn_la_LDFLAGS = -no-undefined -module $(KDE_PLUGIN) $(all_libraries) -avoid-version
+
 data_DATA = msn.plugin
 datadir = $(kde_datadir)/kopete
+
+dummy.cpp:
+	echo > dummy.cpp
diff -uNbr kopete-0.6.0/kopete/protocols/oscar/Makefile.am kopete-0.6.0-new/kopete/protocols/oscar/Makefile.am
--- kopete-0.6.0/kopete/protocols/oscar/Makefile.am	Sat Feb  8 20:04:12 2003
+++ kopete-0.6.0-new/kopete/protocols/oscar/Makefile.am	Sun Feb  9 21:59:00 2003
@@ -1,3 +1,5 @@
+KDE_OPTIONS = nofinal
+
 SUBDIRS = ui pixmaps oscarsocket data
 METASOURCES = AUTO
 AM_CPPFLAGS = -I$(srcdir)/ui \
diff -uNbr kopete-0.6.0/kopete/protocols/oscar/oscarcontact.cpp kopete-0.6.0-new/kopete/protocols/oscar/oscarcontact.cpp
--- kopete-0.6.0/kopete/protocols/oscar/oscarcontact.cpp	Sat Feb  8 20:04:12 2003
+++ kopete-0.6.0-new/kopete/protocols/oscar/oscarcontact.cpp	Sun Feb  9 21:53:35 2003
@@ -15,6 +15,7 @@
     *************************************************************************
 */
 
+#include <sys/types.h>
 #include "oscarcontact.h"
 
 #include <time.h>
