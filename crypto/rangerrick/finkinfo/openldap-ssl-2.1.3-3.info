Package: openldap-ssl
Version: 2.1.3
Revision: 3
Source: ftp://ftp.OpenLDAP.org/pub/OpenLDAP/openldap-release/openldap-%v.tgz
Patch: %f.patch
Depends: %N-shlibs (= %v-%r)
BuildDepends: readline, openssl, openssl-dev, cyrus-sasl (>= 1.5.27-6), cyrus-sasl-dev (>= 1.5.27-6), libtool14, db4
Provides: openldap
Conflicts: openldap
Replaces: openldap
SetCFLAGS: -fno-common
SetCPPFLAGS: -I%b/include -I%p/include -I%p/include/cyrus-sasl -I%p/include/db4 -no-cpp-precomp
SetLDFLAGS: -L%b/libraries/libavl -L%b/libraries/liblber -L%b/libraries/libldap -L%b/libraries/libldap_r -L%b/libraries/libldbm -L%b/libraries/libldif -L%b/libraries/liblunicode -L%b/libraries/liblutil -L%b/libraries/librewrite -L%i/lib -L%p/lib
UpdateConfigGuessInDirs: build
ConfigureParams: --prefix=%p --libexecdir=%p/sbin --mandir=%p/share/man --infodir=%p/share/info/%n --enable-modules --with-pic --includedir=%p/include --enable-bdb --enable-crypt --enable-kpasswd --enable-spasswd --enable-rewrite --enable-dnssrv --enable-ldap --with-ldap-module=static --enable-ldbm --with-ldbm-module=static --enable-meta --with-meta-module=static --enable-monitor --with-monitor-module=static --enable-null --with-null-module=static --enable-perl --with-perl-module=static --enable-shell --with-shell-module=static --enable-slurpd --enable-ssl
CompileScript: <<
  (unset DYLD_LIBRARY_PATH; ./configure %c)
  (unset DYLD_LIBRARY_PATH; make)
  (unset DYLD_LIBRARY_PATH; cd libraries; find . -name \*.la -exec rm -rf {} \;; make)
<<
DocFiles: ANNOUNCEMENT CHANGES COPYRIGHT INSTALL LICENSE README doc/drafts/draft*
InstallScript: <<
  (unset DYLD_LIBRARY_PATH; make install DESTDIR=%d)
<<
ConfFiles: <<
  %p/etc/openldap/ldap.conf
  %p/etc/openldap/ldapfilter.conf
  %p/etc/openldap/schema/corba.schema
  %p/etc/openldap/schema/core.schema
  %p/etc/openldap/schema/cosine.schema
  %p/etc/openldap/schema/inetorgperson.schema
  %p/etc/openldap/schema/java.schema
  %p/etc/openldap/schema/misc.schema
  %p/etc/openldap/schema/nis.schema
  %p/etc/openldap/schema/openldap.schema
  %p/etc/openldap/slapd.conf
<<
DaemonicFile: <<
<service>
<description>OpenLDAP Server</description>
<message>OpenLDAP Server</message>

<daemon name="openldap-ssl">
<executable checkexit="true">%p/sbin/slapd</executable>
<configfile>%p/etc/openldap/ldap.conf</configfile>
</daemon>

</service>
<<
PostInstScript: <<
# update daemonic init script if necessary
daemonic install %N
<<
PreRmScript: <<
# clean up
if [ $1 != "upgrade" ]; then
  daemonic remove %N
fi
<<
SplitOff: <<
  Package: %N-shlibs
  Depends: readline-shlibs, openssl-shlibs, cyrus-sasl-shlibs (>= 1.5.27-6), libtool14-shlibs, daemonic, db4-shlibs
  Replaces: openldap
  Description: shared libraries for LDAP
  Files: lib/liblber.2*.dylib lib/libldap.2*.dylib lib/libldap_r.2*.dylib
<<
SplitOff2: <<
  Package: %N-dev
  Depends: %N-shlibs (= %v-%r)
  Description: libraries and headers for LDAP development
  Files: include/ lib/*.a lib/*.la lib/liblber.dylib lib/libldap.dylib lib/libldap_r.dylib share/man/man3/
<<
Description: An LDAP directory services implementation
DescDetail: <<
OpenLDAP is an open source implementation of the Lightweight Directory
Access Protocol. The suite includes:
*  slapd - stand-alone LDAP server
*  slurpd - stand-alone LDAP replication server
*  libraries implementing the LDAP protocol, and
*  utilities, tools, and sample clients.
<<
DescPort: <<
OpenLDAP built with Cyrus SASL and OpenSSL support.
<<
License: Restrictive
Maintainer: Michael McKibben <mmckibben@users.sourceforge.net>
Homepage: http://www.openldap.org/
