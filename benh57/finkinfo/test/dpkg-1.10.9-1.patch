diff -ruN dpkg-1.10.9/Makefile.conf.in dpkg-1.10.9-patched/Makefile.conf.in
--- dpkg-1.10.9/Makefile.conf.in	2002-07-14 13:15:06.000000000 -0700
+++ dpkg-1.10.9-patched/Makefile.conf.in	2002-12-01 15:12:04.000000000 -0800
@@ -60,13 +60,13 @@
 
 CPPFLAGS		= @CPPFLAGS@
 LD			= @LD@
-LDFLAGS			= @LDFLAGS@ -L../lib -L../optlib
+LDFLAGS			= @LDFLAGS@ -L../lib -L../optlib -framework CoreFoundation
 LIBS			= @LIBS@ -ldpkg -lopt $(ZLIB_LIBS)
 
 RANLIB			= @RANLIB@
 
 DEFS			= @DEFS@ -D_GNU_SOURCE
-INCLUDE_CFLAGS		= -I$(top_srcdir)/include -I$(top_srcdir) -I$(srcdir) -I../include -I.. -I. -I$(top_srcdir)/optlib
+INCLUDE_CFLAGS		= -I$(top_srcdir)/include -I$(top_srcdir) -I$(srcdir) -I../include -I.. -I. -I$(top_srcdir)/optlib -F/System/Library/Frameworks/CoreFoundation.framework
 
 NLS_CFLAGS		= -DLOCALEDIR=\"$(localedir)\" -I$(top_srcdir)/intl -I../intl
 NLS_LIBS		= @INTLLIBS@ 
Binary files dpkg-1.10.9/lib/.DS_Store and dpkg-1.10.9-patched/lib/.DS_Store differ
diff -ruN dpkg-1.10.9/lib/nfmalloc.c dpkg-1.10.9-patched/lib/nfmalloc.c
--- dpkg-1.10.9/lib/nfmalloc.c	2002-09-03 16:34:50.000000000 -0700
+++ dpkg-1.10.9-patched/lib/nfmalloc.c	2002-12-01 14:31:09.000000000 -0800
@@ -26,7 +26,7 @@
 #include <dpkg.h>
 #include <dpkg-db.h>
 
-#include <obstack.h>
+#include "obstack.h"
 
 #define obstack_chunk_alloc m_malloc
 #define obstack_chunk_free free
Binary files dpkg-1.10.9/main/.DS_Store and dpkg-1.10.9-patched/main/.DS_Store differ
diff -ruN dpkg-1.10.9/main/archives.c dpkg-1.10.9-patched/main/archives.c
--- dpkg-1.10.9/main/archives.c	2002-08-24 12:22:33.000000000 -0700
+++ dpkg-1.10.9-patched/main/archives.c	2002-12-01 15:02:22.000000000 -0800
@@ -547,12 +547,10 @@
     debug(dbg_eachfiledetail,"tarobject SymbolicLink creating");
 #ifdef HAVE_LCHOWN
     if (lchown(fnamenewvb.buf,
-#else
-    if (chown(fnamenewvb.buf,
-#endif
 	    nifd->namenode->statoverride ? nifd->namenode->statoverride->uid : ti->UserID,
 	    nifd->namenode->statoverride ? nifd->namenode->statoverride->gid : ti->GroupID))
       ohshite(_("error setting ownership of symlink `%.255s'"),ti->Name);
+#endif
     break;
   case Directory:
     /* We've already checked for an existing directory. */
@@ -608,10 +606,8 @@
         ohshite(_("unable to make backup symlink for `%.255s'"),ti->Name);
 #ifdef HAVE_LCHOWN
       if (lchown(fnametmpvb.buf,stab.st_uid,stab.st_gid))
-#else
-      if (chown(fnametmpvb.buf,stab.st_uid,stab.st_gid))
-#endif
         ohshite(_("unable to chown backup symlink for `%.255s'"),ti->Name);
+#endif
     } else {
       debug(dbg_eachfiledetail,"tarobject nondirectory, `link' backup");
       if (link(fnamevb.buf,fnametmpvb.buf))
diff -ruN dpkg-1.10.9/main/configure.c dpkg-1.10.9-patched/main/configure.c
--- dpkg-1.10.9/main/configure.c	2002-08-29 12:58:11.000000000 -0700
+++ dpkg-1.10.9-patched/main/configure.c	2002-12-01 14:11:07.000000000 -0800
@@ -476,9 +476,10 @@
 static void suspend(void) {
 	const char*	s;
 	int		pid;
-
+#ifndef __APPLE__
 	s= getenv(NOJOBCTRLSTOPENV);
 	if (s && *s) {
+#endif
 		/* Do not job control to suspend but fork and start a new shell
 		 * instead.
 		 */
@@ -506,11 +507,13 @@
 			onerr_abort++;
 			ohshite(_("wait for shell failed"));
 		}
+#ifndef __APPLE__
 	} else {
 		fputs(_("Don't forget to foreground (`fg') this "
 					"process when you're done !\n"), stderr);
 		kill(-getpgid(0),SIGTSTP);
 	}
+#endif
 }
 
 
diff -ruN dpkg-1.10.9/main/help.c dpkg-1.10.9-patched/main/help.c
--- dpkg-1.10.9/main/help.c	2002-09-15 10:55:51.000000000 -0700
+++ dpkg-1.10.9-patched/main/help.c	2002-12-01 15:37:43.000000000 -0800
@@ -69,11 +69,18 @@
 
 void checkpath(void) {
 /* Verify that some programs can be found in the PATH. */
-  static const char *const checklist[]= { "ldconfig", 
+  static const char *const checklist[]= { 
+#ifndef __APPLE__
+    "ldconfig", 
+#endif
 #ifdef USE_START_STOP_DAEMON
     "start-stop-daemon",
 #endif    
-    "install-info", "update-rc.d", 0
+    "install-info",
+#ifndef __APPLE__
+   "update-rc.d",
+#endif
+    0
   };
 
   struct stat stab;
diff -ruN dpkg-1.10.9/main/main.c dpkg-1.10.9-patched/main/main.c
--- dpkg-1.10.9/main/main.c	2002-08-31 21:47:05.000000000 -0700
+++ dpkg-1.10.9-patched/main/main.c	2002-12-01 14:53:17.000000000 -0800
@@ -38,6 +38,11 @@
 #include <version.h>
 #include <myopt.h>
 
+/* FINK LOCAL begin */
+#include <sys/utsname.h>
+#include <CoreFoundation/CoreFoundation.h>
+/* FINK LOCAL end */
+
 #include "main.h"
 
 static void printversion(void) {
@@ -543,6 +548,84 @@
   }
 }
 
+/* FINK LOCAL begin */
+struct versionrevision darwin_version = {0,NULL,NULL};
+struct versionrevision macosx_version = {0,NULL,NULL};
+
+static void finkinit()
+{
+  Boolean status;
+  SInt32 errorCode;
+  CFURLRef fileURL = NULL;
+  CFDataRef resourceData = NULL;
+  CFPropertyListRef propertyList = NULL;
+  CFStringRef string;
+  static char buffer[256];	// This is static, to ensure the buffer stays around
+
+  static struct utsname ver;	// This is static, to ensure the buffer stays around
+  
+  /* Determine system version */
+  /* TODO - should maybe check if this is really Darwin? */
+  if (!uname(&ver)) {
+    darwin_version.version = ver.release;
+  }
+
+  /* Check whether this is Mac OS X, and which version of it */
+
+  fileURL = CFURLCreateWithFileSystemPath( NULL, 	
+		CFSTR("/System/Library/CoreServices/SystemVersion.plist"),
+		kCFURLPOSIXPathStyle,				
+		false );
+  if (!fileURL)
+    goto BAIL;
+  
+  /* Read the XML */
+  status = CFURLCreateDataAndPropertiesFromResource(
+		NULL,
+		fileURL,
+		&resourceData,
+		NULL,		
+		NULL,
+		&errorCode);
+  if (!status || errorCode != 0)
+    goto BAIL;
+  
+  /* Reconstitute the dictionary using the XML data. */
+  propertyList = CFPropertyListCreateFromXMLData( NULL,
+		resourceData,
+		kCFPropertyListImmutable,
+		&string);
+  if (!propertyList)
+    goto BAIL;
+  
+  /* Try to read the system version from it. */
+  status = CFDictionaryGetValueIfPresent( propertyList,
+		CFSTR("ProductVersion"),
+		(void*)&string);
+  if (!status)
+    goto BAIL;
+  
+  /* Convert into a C string */
+  status = CFStringGetCString( string,
+		buffer,
+		sizeof(buffer),
+		kCFStringEncodingISOLatin1);
+  if (!status)
+    goto BAIL;
+  
+  /* Finally link the buffer into the macosx_version struct. */
+  macosx_version.version = buffer;
+  
+BAIL:
+  // Release all of the CF objects we're responsible for.
+  if (fileURL)
+    CFRelease(fileURL);
+  if (resourceData)
+    CFRelease(resourceData);
+  if (propertyList)
+    CFRelease(propertyList);
+}
+/* FINK LOCAL end */
 
 int main(int argc, const char *const *argv) {
   jmp_buf ejbuf;
@@ -553,7 +636,9 @@
 
   setvbuf(stdout,0,_IONBF,0);
   filesdbinit();
-
+  /* FINK LOCAL begin */
+  finkinit();
+  /* FINK LOCAL end */
   actionfunction= (void (*)(const char* const*))cipaction->farg;
 
   actionfunction(argv);
diff -ruN dpkg-1.10.9/main/main.h dpkg-1.10.9-patched/main/main.h
--- dpkg-1.10.9/main/main.h	2002-05-19 22:56:01.000000000 -0700
+++ dpkg-1.10.9-patched/main/main.h	2002-12-01 14:19:17.000000000 -0800
@@ -93,6 +93,11 @@
 extern const char *instdir;
 extern struct packageinlist *ignoredependss;
 extern const char architecture[];
+ 
+/* FINK LOCAL begin */
+extern struct versionrevision darwin_version;
+extern struct versionrevision macosx_version;
+/* FINK LOCAL end */
 
 /* from filesdb.c */
 
diff -ruN dpkg-1.10.9/main/packages.c dpkg-1.10.9-patched/main/packages.c
--- dpkg-1.10.9/main/packages.c	2002-05-06 09:18:15.000000000 -0700
+++ dpkg-1.10.9-patched/main/packages.c	2002-12-01 14:21:36.000000000 -0800
@@ -331,6 +331,24 @@
     return thisf;
   }
 }
+ 
+/* FINK LOCAL begin */
+static int check_pseudo_package(const struct versionrevision *versrev, const struct deppossi *possi,
+                                int *interestingwarnings, struct varbuf *oemsgs) {
+
+  if (versionsatisfied3(versrev,&possi->version,possi->verrel)) {
+    return 3;
+  } else {
+    varbufaddstr(oemsgs, _("  Version of "));
+    varbufaddstr(oemsgs, possi->ed->name);
+    varbufaddstr(oemsgs, _(" on system is "));
+    varbufaddstr(oemsgs, versiondescribe(versrev, vdew_nonambig));
+    varbufaddstr(oemsgs, ".\n");
+    (*interestingwarnings)++;
+    return 0;
+  }
+}
+/* FINK LOCAL end */
 
 int dependencies_ok(struct pkginfo *pkg, struct pkginfo *removing,
                     struct varbuf *aemsgs) {
@@ -352,6 +370,18 @@
     found= 0; /* 0=none, 1=defer, 2=withwarning, 3=ok */
     for (possi= dep->list; found != 3 && possi; possi= possi->next) {
       debug(dbg_depcondetail,"    checking possibility  -> %s",possi->ed->name);
+      /* FINK LOCAL begin */
+      if (0==strcmp(possi->ed->name,"darwin") && darwin_version.version) {
+        debug(dbg_depcondetail,"        pseudo package darwin");
+        found= check_pseudo_package(&darwin_version,possi,&interestingwarnings,&oemsgs);
+        break;
+      }
+      else if (0==strcmp(possi->ed->name,"macosx") && macosx_version.version) {
+        debug(dbg_depcondetail,"        pseudo package macosx");
+        found= check_pseudo_package(&macosx_version,possi,&interestingwarnings,&oemsgs);
+        break;
+      }
+      /* FINK LOCAL end */
       if (possi->cyclebreak) {
         debug(dbg_depcondetail,"      break cycle so ok and found");
         found= 3; break;
diff -ruN dpkg-1.10.9/man/pt_BR/Makefile.in dpkg-1.10.9-patched/man/pt_BR/Makefile.in
--- dpkg-1.10.9/man/pt_BR/Makefile.in	2002-05-19 21:40:28.000000000 -0700
+++ dpkg-1.10.9-patched/man/pt_BR/Makefile.in	2002-12-01 15:26:40.000000000 -0800
@@ -19,10 +19,10 @@
 install: install-doc
 
 install-doc:
-	$(mkinstalldirs) $(DESTDIR)$(svman8dir) 
+	$(mkinstalldirs) $(DESTDIR)$(ptman8dir) 
 	set -e ; for i in $(MAN8PAGES) ; do \
 	    if test -f $$i ; then d= ; else d="$(srcdir)/" ; fi ; \
-	    $(INSTALL_DATA) $$d$$i $(DESTDIR)$(svman8dir) ; \
+	    $(INSTALL_DATA) $$d$$i $(DESTDIR)$(ptman8dir) ; \
 	done
 
 .PHONY: all clean distclean install install-doc
diff -ruN dpkg-1.10.9/origin.fink dpkg-1.10.9-patched/origin.fink
--- dpkg-1.10.9/origin.fink	1969-12-31 16:00:00.000000000 -0800
+++ dpkg-1.10.9-patched/origin.fink	2002-12-01 14:23:59.000000000 -0800
@@ -0,0 +1,3 @@
+Vendor: Fink
+Vendor-URL: http://fink.sourceforge.net/
+Bugs: http://fink.sourceforge.net/
diff -ruN dpkg-1.10.9/scripts/update-alternatives.pl dpkg-1.10.9-patched/scripts/update-alternatives.pl
--- dpkg-1.10.9/scripts/update-alternatives.pl	2002-04-28 12:34:07.000000000 -0700
+++ dpkg-1.10.9-patched/scripts/update-alternatives.pl	2002-12-01 14:24:27.000000000 -0800
@@ -56,7 +56,7 @@
 sub quit { print STDERR "update-alternatives: @_\n"; exit(2); }
 sub badusage { print STDERR "update-alternatives: @_\n\n"; &usageversion; exit(2); }
 
-$altdir= '/etc/alternatives';
+$altdir= '@ADMINPREFIX@/etc/alternatives';
 $admindir= $admindir . '/alternatives';
 $testmode= 0;
 $verbosemode= 0;
