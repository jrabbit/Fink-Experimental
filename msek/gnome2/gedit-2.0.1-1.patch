diff -Naur gedit-2.0.1.old/configure gedit-2.0.1.new/configure
--- gedit-2.0.1.old/configure	Mon Jul 15 22:20:55 2002
+++ gedit-2.0.1.new/configure	Tue Jul 16 04:35:45 2002
@@ -4566,7 +4566,7 @@
     # FIXME: Relying on posixy $() will cause problems for
     #        cross-compilation, but unfortunately the echo tests do not
     #        yet detect zsh echo's removal of \ escapes.
-    archive_cmds='$nonopt $(test "x$module" = xyes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib $libobjs $deplibs$linker_flags -install_name $rpath/$soname $verstring'
+    archive_cmds='$nonopt $(test x$module = xyes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib $libobjs $deplibs$linker_flags $(test .$module != .yes && echo -install_name $rpath/$soname $tmp_verstring)'
     # We need to add '_' to the symbols in $export_symbols first
     #archive_expsym_cmds="$archive_cmds"' && strip -s $export_symbols'
     hardcode_direct=yes
diff -Naur gedit-2.0.1.old/ltmain.sh gedit-2.0.1.new/ltmain.sh
--- gedit-2.0.1.old/ltmain.sh	Wed Jul 10 17:55:31 2002
+++ gedit-2.0.1.new/ltmain.sh	Tue Jul 16 04:35:45 2002
@@ -2894,6 +2894,11 @@
 	if test -n "$export_symbols" && test -n "$archive_expsym_cmds"; then
 	  eval cmds=\"$archive_expsym_cmds\"
 	else
+	  if test "x$verstring" = "x0.0"; then
+	    tmp_verstring=
+	  else
+	    tmp_verstring="$verstring"
+	  fi
 	  eval cmds=\"$archive_cmds\"
 	fi
 	save_ifs="$IFS"; IFS='~'
diff -Naur gedit-2.0.1.old/plugins/ASCII/Makefile.in gedit-2.0.1.new/plugins/ASCII/Makefile.in
--- gedit-2.0.1.old/plugins/ASCII/Makefile.in	Mon Jul 15 22:25:01 2002
+++ gedit-2.0.1.new/plugins/ASCII/Makefile.in	Tue Jul 16 04:35:45 2002
@@ -148,7 +148,7 @@
 CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
-libasciitable_la_LDFLAGS = 
+libasciitable_la_LDFLAGS = -module -avoid-version
 libasciitable_la_LIBADD = 
 libasciitable_la_OBJECTS =  ascii.lo
 CFLAGS = @CFLAGS@
diff -Naur gedit-2.0.1.old/plugins/cvschangelog/Makefile.in gedit-2.0.1.new/plugins/cvschangelog/Makefile.in
--- gedit-2.0.1.old/plugins/cvschangelog/Makefile.in	Mon Jul 15 22:25:07 2002
+++ gedit-2.0.1.new/plugins/cvschangelog/Makefile.in	Tue Jul 16 04:35:45 2002
@@ -143,7 +143,7 @@
 CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
-libcvschangelog_la_LDFLAGS = 
+libcvschangelog_la_LDFLAGS = -module -avoid-version
 libcvschangelog_la_LIBADD = 
 libcvschangelog_la_OBJECTS =  cvschangelog.lo
 CFLAGS = @CFLAGS@
diff -Naur gedit-2.0.1.old/plugins/diff/Makefile.in gedit-2.0.1.new/plugins/diff/Makefile.in
--- gedit-2.0.1.old/plugins/diff/Makefile.in	Mon Jul 15 22:25:02 2002
+++ gedit-2.0.1.new/plugins/diff/Makefile.in	Tue Jul 16 04:35:45 2002
@@ -148,7 +148,7 @@
 CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
-libdiff_la_LDFLAGS = 
+libdiff_la_LDFLAGS = -module -avoid-version
 libdiff_la_LIBADD = 
 libdiff_la_OBJECTS =  diff.lo
 CFLAGS = @CFLAGS@
diff -Naur gedit-2.0.1.old/plugins/docinfo/Makefile.in gedit-2.0.1.new/plugins/docinfo/Makefile.in
--- gedit-2.0.1.old/plugins/docinfo/Makefile.in	Mon Jul 15 22:25:04 2002
+++ gedit-2.0.1.new/plugins/docinfo/Makefile.in	Tue Jul 16 04:35:45 2002
@@ -148,7 +148,7 @@
 CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
-libdocinfo_la_LDFLAGS = 
+libdocinfo_la_LDFLAGS = -module -avoid-version
 libdocinfo_la_LIBADD = 
 libdocinfo_la_OBJECTS =  docinfo.lo
 CFLAGS = @CFLAGS@
diff -Naur gedit-2.0.1.old/plugins/sample/Makefile.in gedit-2.0.1.new/plugins/sample/Makefile.in
--- gedit-2.0.1.old/plugins/sample/Makefile.in	Mon Jul 15 22:25:05 2002
+++ gedit-2.0.1.new/plugins/sample/Makefile.in	Tue Jul 16 04:35:45 2002
@@ -143,7 +143,7 @@
 CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
-libsample_la_LDFLAGS = 
+libsample_la_LDFLAGS = -module -avoid-version
 libsample_la_LIBADD = 
 libsample_la_OBJECTS =  sample.lo
 CFLAGS = @CFLAGS@
diff -Naur gedit-2.0.1.old/plugins/shell_output/Makefile.in gedit-2.0.1.new/plugins/shell_output/Makefile.in
--- gedit-2.0.1.old/plugins/shell_output/Makefile.in	Mon Jul 15 22:25:12 2002
+++ gedit-2.0.1.new/plugins/shell_output/Makefile.in	Tue Jul 16 04:35:45 2002
@@ -148,7 +148,7 @@
 CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
-libshell_output_la_LDFLAGS = 
+libshell_output_la_LDFLAGS = -module -avoid-version
 libshell_output_la_LIBADD = 
 libshell_output_la_OBJECTS =  shell_output.lo
 CFLAGS = @CFLAGS@
diff -Naur gedit-2.0.1.old/plugins/taglist/Makefile.in gedit-2.0.1.new/plugins/taglist/Makefile.in
--- gedit-2.0.1.old/plugins/taglist/Makefile.in	Mon Jul 15 22:25:09 2002
+++ gedit-2.0.1.new/plugins/taglist/Makefile.in	Tue Jul 16 04:35:45 2002
@@ -150,7 +150,7 @@
 CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
-libtaglist_la_LDFLAGS = 
+libtaglist_la_LDFLAGS = -module -avoid-version
 libtaglist_la_LIBADD = 
 libtaglist_la_OBJECTS =  gedit-taglist-plugin-parser.lo \
 gedit-taglist-plugin-window.lo gedit-taglist-plugin.lo
diff -Naur gedit-2.0.1.old/plugins/time/Makefile.in gedit-2.0.1.new/plugins/time/Makefile.in
--- gedit-2.0.1.old/plugins/time/Makefile.in	Mon Jul 15 22:25:10 2002
+++ gedit-2.0.1.new/plugins/time/Makefile.in	Tue Jul 16 04:35:45 2002
@@ -148,7 +148,7 @@
 CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
-libtime_la_LDFLAGS = 
+libtime_la_LDFLAGS = -module -avoid-version
 libtime_la_LIBADD = 
 libtime_la_OBJECTS =  time.lo
 CFLAGS = @CFLAGS@
diff -Naur gedit-2.0.1.old/src/gedit-plugins-engine.c gedit-2.0.1.new/src/gedit-plugins-engine.c
--- gedit-2.0.1.old/src/gedit-plugins-engine.c	Tue Mar 19 00:21:49 2002
+++ gedit-2.0.1.new/src/gedit-plugins-engine.c	Tue Jul 16 04:35:45 2002
@@ -31,6 +31,7 @@
 #include <config.h>
 #endif
 
+#include <sys/types.h> 
 #include <dirent.h> 
 #include <string.h>
 
