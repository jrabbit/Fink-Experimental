diff -Naur gnome-system-monitor-2.0.0.old/src/Makefile.in gnome-system-monitor-2.0.0.new/src/Makefile.in
--- gnome-system-monitor-2.0.0.old/src/Makefile.in	Tue Jun 11 07:03:10 2002
+++ gnome-system-monitor-2.0.0.new/src/Makefile.in	Wed Jul  3 23:50:37 2002
@@ -108,7 +108,7 @@
 gnome_system_monitor_SOURCES =  	procman.c  procman.h 	interface.c interface.h 	callbacks.c callbacks.h 	load-graph.c load-graph.h 	proctable.c proctable.h 	prettytable.c prettytable.h 	util.c util.h 	infoview.c infoview.h 	procactions.c procactions.h 	procdialogs.c procdialogs.h 	memmaps.c memmaps.h 	favorites.c favorites.h 	defaulttable.h
 
 
-gnome_system_monitor_LDADD = @PROCMAN_LIBS@
+gnome_system_monitor_LDADD = @PROCMAN_LIBS@ -lXau -lX11
 
 specdir = $(datadir)/procman
 
diff -Naur gnome-system-monitor-2.0.0.old/src/util.c gnome-system-monitor-2.0.0.new/src/util.c
--- gnome-system-monitor-2.0.0.old/src/util.c	Tue Jun 11 07:02:15 2002
+++ gnome-system-monitor-2.0.0.new/src/util.c	Thu Jul  4 00:52:22 2002
@@ -40,7 +40,7 @@
  */
 #define OPEN_TTY() getpt()
 
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__APPLE__)
 /* FreeBSD doesn't have getpt(). This function emulates it's behaviour. */
 int getpt (void);
 
@@ -144,8 +144,15 @@
 		}
 
 		if ((env = getenv ("XAUTHORITY")) == NULL) {
+#ifdef HAVE_ASPRINTF
 			if (asprintf (&env, "XAUTHORITY=%s/.Xauthority", home) > 0)
 				putenv (env);
+#else
+			if ((env = malloc (1024))) {
+				snprintf (env, 1024, "XAUTHORITY=%s/.Xauthority", home);
+				env[1023] = '\0';
+			}
+#endif
 			else {
 				perror ("Unable to allocate memory chunk");
 				_exit (-1);
@@ -153,8 +160,15 @@
 		}
 
 		if ((env = getenv ("ICEAUTHORITY")) == NULL) {
+#ifdef HAVE_ASPRINTF
 			if (asprintf (&env, "ICEAUTHORITY=%s/.ICEauthority", home) > 0)
 				putenv (env);
+#else
+			if ((env = malloc (1024))) {
+				snprintf (env, 1024, "ICEAUTHORITY=%s/.ICEauthority", home);
+				env[1023] = '\0';
+			}
+#endif
 			else {
 				perror ("Unable to allocate memory chunk");
 				_exit (-1);
