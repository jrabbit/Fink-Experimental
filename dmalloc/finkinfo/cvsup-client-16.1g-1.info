Package: cvsup-client
Version: 16.1g
Revision: 1
BuildDepends: cm3-shlibs-src, cm3-dev 
Depends: cm3-shlibs, %N-shlibs
Source: ftp://ftp3.freebsd.org/pub/FreeBSD/development/CVSup/sources/cvsup-snap-%v.tar.gz
Source-MD5: 253e773eb9d213f9bf3ce12acef184e8
Patch: %f.patch

PatchScript: <<
perl -i -pe 's|/usr/local/lib|%p/lib|g' suplib/src/m3makefile
perl -i -pe 's|/usr/local/etc|%p/etc|g' server/src/cvsupd.8
perl -i -pe 's|/usr/local/etc|%p/etc|g' server/src/cvsupd.cat
perl -i -pe 's|/usr/local/etc|%p/etc|g' server/src/cvsupd.class.5
perl -i -pe 's|/usr/local/etc|%p/etc|g' server/src/cvsupd.class.cat
perl -i -pe 's|/usr/local/etc|%p/etc|g' client/src/cvsup.1
perl -i -pe 's|/usr/local/etc|%p/etc|g' client/src/cvsup.cat
perl -i -pe 's|/usr/local/etc|%p/etc|g' suplib/src/SupMisc.i3
perl -i -pe 's|/usr/local/etc|%p/etc|g' doc/faq.faq
perl -i -pe 's|/usr/local/etc|%p/etc|g' doc/faq_ru.faq
perl -i -pe 's|^SUBDIR=.*$|SUBDIR= suptcp suplib server client cvpasswd doc|g' Makefile 
perl -i -pe 's|AWK=.*awk|AWK= gawk|g' doc/Makefile
mv Install Install.txt
<<

DocFiles: <<
Acknowledgments ChangeLog Install.txt License
Announce Blurb 
<<


CompileScript: <<
make PREFIX=%p M3=cm3 M3FLAGS=-DNOGUI
<<

InstallScript: <<
install -d -m 755 %i/bin
install -d -m 755 %i/sbin
install -d -m 755 %i/lib/cm3
install -d -m 755 %i/etc
install -d -m 755 %i/share/man/man1
install -d -m 755 %i/share/man/man8
install -d -m 755 %i/share/man/man5
install -d -m 755 %i/share/doc/cvsup
install -d -m 755 %i/share/doc/cvsup/images
make PREFIX=%i MANDIR=%i/share/man M3=cm3 M3FLAGS=-DNOGUI install
install -c -p ./suplib/PPC_DARWIN/libsuplib*.dylib %i/lib/cm3
install -c -p ./suptcp/PPC_DARWIN/libsuptcp*.dylib %i/lib/cm3
install -c -p ./server/PPC_DARWIN/cvsupd.class.5 %i/share/man/man5
install -c -p ./doc/faq.html %i/share/doc/cvsup
install -c -p ./doc/faq_ru.html %i/share/doc/cvsup
install -c -p ./doc/images/*.gif %i/share/doc/cvsup/images
<<

SplitOff: <<
Package: cvsup-faq
BuildDepends: gawk
Files: <<
 share/doc/cvsup/faq.html
 share/doc/cvsup/faq_ru.html
 share/doc/cvsup/images/cvsup128.gif
 share/doc/cvsup/images/yelnew.gif
<<

Description: CVSup FAQ
DescDetail: <<
The CVSup FAQ.
Please consider reading this document very carefully it contains vital information. 
The FAQ also explains strategies on how you can build a sane CVSup Server.
<<

DescPort: <<
This port has been made possible by Peter O'Gorman and who helped me a lot with the CVSup 
info file and Matthias Neeracher who packaged the needed Modula 3 compiler.
I and the Fink Project also thank Landon Fuller for his dport packages which helped porting
things to Fink.
<<


<<


SplitOff2: <<
 Package: cvsup-daemon
 Depends: cm3-shlibs, %N-shlibs
 Enhances: cvs
 Files: <<
  sbin/cvsupd
  share/man/man8/cvsupd.8
  share/man/man5/cvsupd.class.5
  bin/cvpasswd
  share/man/man1/cvpasswd.1
<<


Description: CVSup daemon
DescDetail: <<
The CVSup Daemon. This package is sufficient if you are only interested in running a CVSup 
Server. 
IMPORTANT NOTE: To use the cvsup server you need to set passwords with the supplied 
cvpasswd utility. Please refer to the man page for a detailed description on what 
this tool does.

See cvsup-client if you wish to access CVSup repositories.
<<      

DescPort: <<
This port has been made possible by Peter O'Gorman and who helped me a lot with the CVSup 
info file and Matthias Neeracher who packaged the needed Modula 3 compiler.
I and the Fink Project also thank Landon Fuller for his dport packages which helped porting
things to Fink.
<<


<<


SplitOff3: <<
Package: cvsup-client-shlibs
Files: <<
    lib/cm3/libsuptcp.5.2.dylib
    lib/cm3/libsuplib.5.2.dylib 
<<

Description: CVSup shared libraries.
DescDetail: <<
Shared libraries needed to run CVSup binaries.
<<      

DescPort: <<
This port has been made possible by Peter O'Gorman and who helped me a lot with the CVSup 
info file and Matthias Neeracher who packaged the needed Modula 3 compiler.
I and the Fink Project also thank Landon Fuller for his dport packages which helped porting
things to Fink.
<<

<<
	   


Description: CVSup client 
DescDetail: <<
This package supplies the CVSup client. If you are only interested in accessing CVSup 
server than this client will be sufficient for you. To run your own daemon you should 
have a look at the cvsup-daemon package. For further information please refer to the 
apropriate man page.
<<      

DescPort: <<
This port has been made possible by Peter O'Gorman and who helped me a lot with the CVSup 
info file and Matthias Neeracher who packaged the needed Modula 3 compiler.
I and the Fink Project also thank Landon Fuller for his dport packages which helped porting
things to Fink.
<<

License: BSD
Homepage: http://www.cvsup.org/
Maintainer: Darian Lanx <dmalloc@users.sourceforge.net>
