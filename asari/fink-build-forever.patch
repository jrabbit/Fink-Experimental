diff -Naur fink-build-forever/fink-build-forever fink-build-forever.fink/fink-build-forever
--- fink-build-forever/fink-build-forever	Thu Jan  1 09:00:00 1970
+++ fink-build-forever.fink/fink-build-forever	Wed Nov 24 14:41:53 2004
@@ -0,0 +1,81 @@
+#!/bin/bash
+# This script never returns exit code 0 :-p
+
+# This script is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This script is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with GCC; see the file COPYING.  If not, write to
+# the Free Software Foundation, 59 Temple Place - Suite 330,
+# Boston, MA 02111-1307, USA.
+
+. @PREFIX@/bin/init.sh
+
+set -ex
+
+tmpdir="${tmpdir:-/tmp}"
+logbasedir="${logbasedir:-@PREFIX@/var/log/fink-build-forever}"
+
+buildlist="${tmpdir}/fink-build-list.tmp"
+removelist="${tmpdir}/fink-remove-list.tmp"
+
+trap 'cleanup $?' EXIT
+
+printlist() {
+    fink list -t "$@" |
+      awk -F'\t' '($4 !~ /\[virtual package/) {print $2}' |
+      sed -e '/^apt$/d' -e '/^apt-shlibs$/d' -e '/^ccache$/d' -e '/^ccache-default$/d'
+}
+
+removeall() {
+    printlist -i > "${removelist}"
+    xargs -n 900 -t fink -y remove < "${removelist}"
+    rm -f "${removelist}"
+}
+
+cleanup() {
+    rm -f "${buildlist}"{,.bak.tmp} "${removelist}" "${errdir}/${pkg}.err"
+    fink install fink-build-forever
+    return $1
+}
+
+mkdir -p "${logbasedir}"
+echo "Generated by following script:" >"${logbasedir}/README"
+echo >> "${logbasedir}/README"
+cat @PREFIX@/sbin/fink-build-forever >> "${logbasedir}/README"
+
+while : ; do
+    if [ -f "${buildlist}.bak" ]; then
+	cp -f "${buildlist}.bak" "${buildlist}"
+    else
+	printlist -n > "${buildlist}"
+	cp -f "${buildlist}" "${buildlist}.bak"
+    fi
+    errdir="${logbasedir}/`date +%Y-%m-%d`"
+    mkdir -p "${errdir}"
+    gcc -v 2>> "${errdir}/README"
+    fink -V > "${errdir}/README"
+    while read pkg; do
+	(
+	    removeall
+	    fink -b -y build ${pkg} 2>&1 | tee "${errdir}/${pkg}.err"
+	    [ "${PIPESTATUS[0]}" -eq 0 ] && (
+		rm -f "${errdir}/${pkg}.err"
+		cp -f "${buildlist}.bak" "${buildlist}.bak.tmp"
+		sed /^${pkg}\$/d "${buildlist}.bak.tmp" > "${buildlist}.bak"
+		rm -f "${buildlist}.bak.tmp"
+	    )
+	) < /dev/null
+	[ -f "${errdir}/${pkg}.err" ] && gzip "${errdir}/${pkg}.err" &
+    done < "${buildlist}"
+    fink -y selfupdate
+    fink -y install ccache ccache-default
+    rm -f "${buildlist}"{,.bak,.bak.tmp}
+done
