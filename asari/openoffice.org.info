Info2: <<
Package: openoffice.org
Description: Integrated office productivity suite
Version: 1.9m123
Revision: 11
License: OSI-Approved
Maintainer: Todai Fink Team <fink@sodan.ecc.u-tokyo.ac.jp>

BuildDepends: <<
  x11-dev, ant, bison, fileutils, system-java14-dev,
  archive-zip-pm586,
  libjpeg, expat, freetype219, libwpd-1-dev, libxml2,
  python24, db42-ssl | db42,
  libsablot-dev, libsablot, unixodbc2 | unixodbc2-nox,
  sane-backends, libcurl3-ssl | libcurl3,
  boost1.32-py23 | boost1.32-py24, libsndfile1-dev,
  portaudio, neon24-ssl | neon24,
  mozilla-dev,
  autoconf2.5
<<
Depends: <<
  x11, system-java14, system-perl,
  libjpeg-shlibs, expat-shlibs, libwpd-1-shlibs, libxml2-shlibs,
  python24-shlibs, db42-ssl-shlibs | db42-shlibs, db42-ssl-java,
  libsablot-shlibs, unixodbc2-shlibs | unixodbc2-nox-shlibs,
  sane-backends-shlibs, libcurl3-ssl-shlibs | libcurl3-shlibs,
  boost1.32-py23-shlibs | boost1.32-py24-shlibs, libsndfile1-shlibs,
  portaudio-shlibs, neon24-ssl-shlibs | neon24-shlibs,
  mozilla-shlibs, mozilla-mailnews
<<

Source: ftp://ooopackages.good-day.net/pub/OpenOffice.org/sources/OOo_1.9m113_source.tar.bz2
Source-MD5: bff4e15647e2bc41e79166962dd586d4
NoSourceDirectory: true
Source2: ftp://ftp.cs.man.ac.uk/pub/toby/gpc/gpc231.tar.Z
Source2-MD5: fdb06fdb5a4670b172f9fb738b717be9
Source3: http://fink.sodan.ecc.u-tokyo.ac.jp/~asari/OpenOffice.org/patches/openoffice.org.113to123.patch.bz2
Source3-MD5: 8c0edf9234b3b96b0a32df596c2122e4

PatchScript: <<
  /bin/mv gpc231/gpc.{c,h} external/gpc
  /usr/bin/bzip2 -dc openoffice.org.113to123.patch.bz2 | /usr/bin/patch -p1 
  /usr/bin/sed "s|@FINK_PREFIX@|%p|g" < %a/%n.patch | /usr/bin/patch -p0
  /bin/mkdir FINKLIBS
  /bin/ln -s %p/lib/libdb_java-4.2.jnilib FINKLIBS
<<

SetCC: gcc-3.3
SetCXX: g++-3.3
SetCPPFLAGS: -I%p/include/db4
ConfigureParams: <<
  --with-gnu-cp=%p/bin/cp \
  --with-package-format=portable \
  --with-x --x-includes=/usr/X11R6/include --x-libraries=/usr/X11R6/lib \
  --with-jdk-home=/Library/Java/Home --with-ant-home=%p/lib/ant \
  --disable-gtk --disable-crashdump \
  --enable-pasf \
  --with-build-version="%v-%r; Built with Fink <http://fink.sourceforge.net>" \
  --with-system-stdlibs \
  --with-system-zlib \
  --with-system-jpeg \
  --with-system-expat \
  --with-system-freetype \
  --with-system-libxml \
  --with-system-db \
  --with-db-jar=%p/share/java/db42-ssl-java/db.jar \
  --with-system-sablot \
  --with-system-odbc-headers \
  --with-system-sane-header \
  --with-system-xrender-headers \
  --with-system-curl \
  --with-system-sndfile \
  --with-system-portaudio \
  --with-system-neon \
  --with-system-mozilla
<<
# --with-system-mspack       # not in Fink
# --with-system-libwpd       # 0.8 not in Fink
# --with-system-nas          # not in Fink
# --with-system-myspell      # not in Fink
# --with-system-mythes       # not in Fink
# --with-system-altlinuxhyph # not in Fink
# --with-system-boost        # TO DO 2 : error ocurres?
# --with-system-python       # TO DO 3 : fails building instsetooo_native?
# link to system freetype    # TO DO 1
# --enable-libart            # TO DO 0

GCC: 3.3
CompileScript: <<
  #!/bin/bash -ev
  export X_LDFLAGS=$LDFLAGS
  export PKG_CONFIG_PATH=%p/lib/freetype219/lib/pkgconfig
  (cd config_office && autoconf && ./configure %c)
  ./bootstrap
  . MacosxEnv.Set.sh
  export SOLARINC=`echo $SOLARINC | /usr/bin/sed -e"s|-I/usr/X11R6/include -I/usr/X11R6/include/freetype2|-I%p/include/db4 -I%p/include -I%p/lib/freetype219/include/freetype2 -I/sw/lib/freetype219/include -I/usr/X1186/include|g"`
  export SOLARLIB=`echo $SOLARLIB | /usr/bin/sed -e"s|-L/usr/lib|-L%p/lib -L/usr/lib|g"`
  export DYLD_LIBRARY_PATH="$DYLD_LIBRARY_PATH:%b/FINKLIBS"
  export DEFAULT_TO_ENGLISH_FOR_PACKING=yes
  dmake
<<

InstallScript: <<
  #!/bin/bash -ev
  for i in instsetoo_native/unxmacxp.pro/OpenOffice/install/en-US/darwin-*/*.sw; do
    /usr/bin/tar xf $i -C %i
  done
  /bin/mv %i/{Applications,lib}
  /bin/mv %i/lib/{openoffice.org*,%n}

  /usr/bin/install -m 755 -d %i/bin
  /bin/ln -s %p/lib/%n/program/{sbase,scalc,sdraw,simpress,smath,soffice,swriter} %i/bin

  /bin/ln -s %p/lib/libdb_java-4.2.jnilib %i/lib/%n/program

  /usr/bin/install -m 755 -d %i/share/doc/%n
  /bin/cp %i/lib/%n/LICENSE %i/share/doc/%n/LICENSE
<<

Homepage: http://www.openoffice.org/

DescDetail: <<
OpenOffice.org is an Open Source, community-developed, multi-platform office
productivity suite. It includes the key desktop applications, such as a
word processor, spreadsheet, presentation manager, and drawing program,
with a user interface and feature set similar to other office suites.

Components include:
  * A universal word processing application for creating business
    letters, extensive text documents, professional layouts, and HTML
    documents.
  * A sophisticated application for performing advanced spreadsheet
    functions, such as analyzing figures, creating lists, and viewing data.
  * A tool for creating effective eye-catching presentations.
  * A vector-oriented draw module that enables the creation of 3D
    illustrations.
<<
DescPort: <<
This package is advised by NAKATA Maho <maho@FreeBSD.org>.
I followed the instruction described here:
http://porting.openoffice.org/servlets/ReadMsg?list=dev&msgNo=16047

It is reported that:
  * Mac OS X SDK (which comes with Xcode) is needed.
  * Sometimes checking getaddrinfo() fails on configuring python (on Panther?)
<<
<<
