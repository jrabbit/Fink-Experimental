Package: atlas
Version: 3.7.37
Revision: 1
Description: Portably optimal linear algebra software
DescDetail: <<
The current version provides a complete BLAS and LAPACK API. 
For many operations, ATLAS achieves performance on par
with machine-specific tuned libraries.
Files installed:
cblas.h       : The C header file for the C interface to the BLAS.
liblapack.a   : The LAPACK routines provided by ATLAS, plus the rest
                of LAPACK from netlib.org.
libcblas.a    : The ANSI C interface to the BLAS.
libf77blas.a  : The Fortran77 interface to the BLAS.
libatlas.a    : The main ATLAS library, providing low-level routines for
                all interface libs.
When answering "yes" whether to enable threads, one gets also the threaded
variants libptcblas.a and libptf77blas.a
<<
DescPort: <<
The optimized subset of LAPACK provided by ATLAS is merged
with the full LAPACK from http://www.netlib.org/lapack. 
<<
DescUsage: <<
Order is important when linking!  Use:
-L%p/lib -llapack -lcblas -lf77blas -latlas 
Must be run interactively (asks a lot of questions, use default answers
unless you really know what you are doing). For "architecture" choose
"UNKNOWN" if you have a G3.
<<
Source: mirror:sourceforge:math-atlas/%n%v.tar.bz2
Source-MD5: 5c3fb9a4c74e8426105558a23b2215ff
Source2: http://www.netlib.org/lapack/lapack-3.1.1.tgz
Source2-MD5: 00b21551a899bcfbaa7b8443e1faeef9
License: BSD
#Patch: %n.patch
PatchScript: <<
## perl -pi -e 's,faltivec,faltivec -save-temps,; s, \-j (2|%d),,' config.c
## perl -pi -e 's, \-j (2|%d),,' config.c
# perl -pi -e 's,ATL_(c|)prow2blkT\.c$,$& \-O2,' makes/Make.gpmm
## no more config.c !
# perl -pi -e 's|g77|gfortran|g' config.c
cd ..; ln -s lapack-3.1.1 LAPACK; cd -
perl -pi -e 's|g77|gfortran|g' ../LAPACK/INSTALL/make.inc.LINUX
<<
BuildDepends: gcc42
SourceDirectory: ATLAS
CompileScript: <<
#!/bin/sh -ev
 if [ %m = 'powerpc' ]; then n=`machine|sed -e 's,^ppc,,'`; cflags="-mcpu=$n -mtune=$n -faltivec"
	elif [ %m = 'i386' ]; then cflags="-march=nocona"
	else cflags=''
 fi
 cd ../LAPACK
 sed -e "s|-funroll-all-loops -O3|-funroll-all-loops -O3 -fomit-frame-pointer -fstrict-aliasing $cflags|g" \
 -e 's,^TIMER,\#TIMER,' -e '/INT_ETIME/s,^\# *,,' < INSTALL/make.inc.LINUX > make.inc
 cd SRC
 make all
 mkdir -p ../../bld/lib; cd ../../bld
# export ARCH=`ls -1t Make* | head -n1 | cut -f2 -d"."`
 cp ../LAPACK/lapack_LINUX.a lib/liblapack.a
 ../ATLAS/configure --with-netlib-lapack=lib/liblapack.a
# mv Make.$ARCH Make.$ARCH.orig; sed 's|gcc|cc|g' < Make.$ARCH.orig > Make.$ARCH
 make
 make test
 make pttest
 make time
<<
InstallScript: <<
#!/bin/sh -ev
 cd ../bld
 make install DESTDIR=%i
 cd -
 mkdir -p %i/lib
 mkdir -p %i/include
 mkdir -p %i/share/doc/%n
# (export ARCH=`ls -1t Make* | head -n1 | cut -f2 -d"."`; ranlib lib/$ARCH/lib*a; cp lib/$ARCH/lib*a %i/lib)
 cp include/cblas.h %i/include
 cp doc/* %i/share/doc/%n
 cp README %i/share/doc/%n
 head -n29 bin/atlas_tee.c > %i/share/doc/%n/LICENSE
<<
PostInstScript: <<
 ranlib %p/lib/libatlas.a 
 ranlib %p/lib/libcblas.a
 ranlib %p/lib/libf77blas.a
 ranlib %p/lib/liblapack.a 
 ranlib %p/lib/libtstatlas.a 
 ranlib %p/lib/libptcblas.a || true
 ranlib %p/lib/libptf77blas.a || true
<<
Homepage: http://math-atlas.sourceforge.net
Maintainer: Jeffrey Whitaker <jswhit@fastmail.fm>
