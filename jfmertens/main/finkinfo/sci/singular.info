Info2: <<
Package: singular%type_pkg[-strio]%type_pkg[-sta]%type_pkg[-noopt]
# disabled %type_pkg[-strio] for the moment, since it needs <strstream.h>,
# and even when replacing this by <strstream> one gets :
# < int_poly.cc: In member function `virtual void
# <    InternalPoly::print(std::ostream&, char*)':
# < int_poly.cc:174: error: `ostrstream' undeclared (first use this function)
# and similar problems : doesn't seem gcc3.3 ready
Version: 2.05
Revision: 22
Type: -strio (.), -sta (boolean), -noopt (boolean)
Provides: %{ni}-variants
Conflicts: %{ni}-variants
Replaces: %{ni}-variants, %{ni}, %{ni}-sta
Depends: gmp-shlibs (>= 4.1.2-11), readline-shlibs, libncurses5-shlibs
Recommends: mozilla, xemacs
BuildDepends: gmp (>= 4.1.2-11), ntl (>= 5.3.1-12) | ntl-sing (>= 5.3.1-12), readline, libncurses5, latex2html, texinfo, sed | ssed
GCC: 3.3
Source: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-main-2-0-5.tar.gz
Source2: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/SOURCES/2-0-6/Singular-IntProg-2-0-6.tar.gz
Source3: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-MP-2-0-5.tar.gz
Source4: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-Tst-2-0-5.tar.gz
Source5: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-doc-2-0-5.tar.gz
Source6: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-emacs-2-0-5.tar.gz
Source7: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-factory-2-0-5.tar.gz
Source8: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-kernel-2-0-5.tar.gz
Source9: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-libfac-2-0-5.tar.gz
Source10: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-omalloc-2-0-5.tar.gz
Source11: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/README
Source-MD5: e88a57eab4c719f97a2cec19a8429f74
Source2-MD5: 3d2106f4b1ecf53e943b950fe41839eb
Source3-MD5: ca815b4a1f01f5a48c46fa2ad930250c
Source4-MD5: a9fbca50eb2e0c6b468c572edcf737b6
Source5-MD5: 7dade3cbf4b3297e13067bf136b47dd5
Source6-MD5: 25490dbf52e0c3f3ff9d32a5c0773db9
Source7-MD5: ccb98926a93b0fc90711730790c56ac5
Source8-MD5: 2cc39a94e1e1c555cbbdfea2a825286e
Source9-MD5: 149cd0f1249388e58138a6b1de17dd7c
Source10-MD5: 7dc82f3822f35268c47c86edb9822e6f
Source11-MD5: 375274293a5228c590454a37911fab27
Source11Rename: README.%{ni}
NoSourceDirectory: true
## And where are the sources for sgroup, Plural, etc ?
PatchScript: <<
#!/bin/sh -v
 p=%p
 n=%n
 strio='[ "." == "-strio" ]'
 dyn='[ "%type_raw[-sta]" == "." ]'
 noopt='[ "%type_raw[-noopt]" == "-noopt" ]'
# strip='[ "%type_raw[-noopt]" == "." ]'
 . %a/%{ni}.patch 2>&1 | tee /tmp/%{n}.log
<<
UpdateConfigGuessInDirs: . MP
NoSetLDFLAGS: true
NoSetCPPFLAGS: true
# CFLAGS and CXXFLAGS have to set differently in each dir _ because eg ntl doesn't respect CFLAGS,
# and Singular/configure.in does not add its own flags when C(XX)FLAGS is set...
CompileScript: echo -n
# Put even the configure in the InstallScript, else we would first have to do a separate 'rm -fR %i',
# otherwise the configure might wrongly find things there from a previous build.
# Further, this avoids repeating the exports...
InstallScript: <<
#!/bin/sh -v
 a=%a
 p=%p
 i=%i
 n=%n
 ni=%{ni}
 dyn='[ "%type_raw[-sta]" == "." ]'
 strip='[ "%type_raw[-noopt]" == "." ]'
 noopt='[ "%type_raw[-noopt]" == "-noopt" ]'
 mkdir -p %{i}/share/doc/%{n}
 mv /tmp/%{n}.log %{i}/share/doc/%{n}
 . %a/%{ni}.inst 2>&1 | tee -a %{i}/share/doc/%{n}/%{n}.log
<<
InfoDocs: %{ni}.info
DocFiles: doc/COPYING README.%{ni}
ConfFiles: %p/etc/%{ni}rc
# The dev is just to avoid conflict with singular-factory (factoryconf.h differs)
# We don't put there  lib/lib*.a lib/omalloc.o  since the libMP's differ slightly
# between the 2 variants (built with and without -fdynamic-no-pic), and we don't
# want to increase unnecessarily the number of pkgs..
Splitoff: <<
 Package: singular-dev
 Conflicts: singular-factory, singular-libfac (<< %v-1)
 Replaces: singular-factory (>= %v-1), singular-libfac (>= %v-1)
 BuildDependsOnly: true
 Files: include/*
<<
## Not sure I like the following, because (1) it sets the EV for all (fink) users on the system,
## not just those using singular, and (2) users may forget to clean up ~/singularhist from time to time...
RuntimeVars: <<
 SINGULARHIST: ~/singularhist
<<
PostInstScript: <<
 sed -ri "s;';;g" %p/etc/profile.d/%{Ni}*
<<
License: GPL
Description: CAS for commutative algebra, and singularities
DescUsage: <<
- "Singular -h" will tell how to invoke help from within Singular.
This is very extensive. (It comes up by default trough your Finder's
browser (eg, Safari) when DISPLAY is not set, through mozilla else _
with ESingular, ie the xemacs interface, it comes through info _ but
in all cases the default can be reset.)
- TSingular gives in xterm interface.
<<
DescPort: <<
- the attempted -strio variant tries to enable streamio in factory and libfac
- the -sta variant adds '--without-dynamic-kernel'
_ the -noopt variant sets -O0 -ggdb
TODO:
- with the last 2 xemacs versions in fink, ESingular no longer launches.
  Seems like in lines ~ 212-215 of %p/share/singular/emacs/.emacs-singular
  something (toolbar-related) is not a list and should be.
- an annoying series of warnings came up with fink's latest texinfo when building the doc.
- lots of clean-up
- the -noopt variant is a poor man's substitute (just sufficient for me up to now) for the
  'debug' variant in the Makefiles. Would be nice to get a handle on this in the infofile
   _ as well as on the 'profile' variant _ (additional switch ?) .
- get -strio working: so libfac and factory can better be used standalone; their tests
  should then work _ and one would be able to re-generate the gftables.
- there might be a way to build with alternative memory-managers (say omalloc, old, new, and none).
  This might help for the next point (currently, macaulay2 builds with singular-* having the "old"
  memory-manager _ afraid of confusion with its own mem-manager (gc) if straying from this).
  Additional switch ? ... horror !
- Try to get a build s.t. macaulay2 can build on it ...
<<
Homepage: http://www.singular.uni-kl.de/
Maintainer: Jean-Francois Mertens <jfmertens@users.sourceforge.net>
<<
