Info2: <<
Package: singular%type_pkg[-sntl]%type_pkg[-strio]%type_pkg[-dyn]%type_pkg[-noopt]
# disabled %type_pkg[-strio] for the moment, since it needs <strstream.h>,
# and even when replacing this by <strstream> one gets :
# < int_poly.cc: In member function `virtual void
# <    InternalPoly::print(std::ostream&, char*)':
# < int_poly.cc:174: error: `ostrstream' undeclared (first use this function)
# and similar problems : doesn't seem gcc3.3 ready
Version: 2.05
Revision: 7
Type: -sntl (boolean), -strio (boolean), -dyn (boolean), -noopt (boolean)
Conflicts: (%type_raw[-sntl] = -sntl) ntl, %{ni}-variants
Provides: %{ni}-variants
# Also singular-factory and singular-libfac (headers) _ for the moment :
Replaces: singular-factory, singular-libfac, %{ni}-variants
Depends: (%type_raw[-sntl] = .) ntl, gmp-shlibs (>= 4.1.2-11), readline-shlibs
Recommends: mozilla, xemacs
BuildDepends: gmp (>= 4.1.2-11), autoconf, readline, netpbm-bin (>= 10.18-3), latex2html, texinfo, tetex, sed | ssed
## For documentation, as long as not fixed :
BuildConflicts: bison (= 1.875)
GCC: 3.3
# And how to specify that some srcs are not needed for some variants ?
Source: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-main-2-0-5.tar.gz
Source2: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-IntProg-2-0-5.tar.gz
Source3: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-MP-2-0-5.tar.gz
Source4: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-NTL-5.3.1.tar.gz
Source5: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-NTL-generic.tar.gz
Source6: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-Tst-2-0-5.tar.gz
Source7: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-doc-2-0-5.tar.gz
Source8: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-emacs-2-0-5.tar.gz
Source9: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-factory-2-0-5.tar.gz
Source10: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-kernel-2-0-5.tar.gz
Source11: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-libfac-2-0-5.tar.gz
Source12: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/Singular-omalloc-2-0-5.tar.gz
Source13: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/src/README
Source-MD5: e88a57eab4c719f97a2cec19a8429f74
Source2-MD5: b99ff8e6cd0961f6e1f64387d59f3510
Source3-MD5: 8d7b33130501acf7d74cbd9e02b8a26a
Source4-MD5: 5304918a83976e0d1c58ea40e795cfa7
Source5-MD5: 990b2af1628eac683c4a69d2d3a554db
Source6-MD5: a9fbca50eb2e0c6b468c572edcf737b6
Source7-MD5: 7dade3cbf4b3297e13067bf136b47dd5
Source8-MD5: 25490dbf52e0c3f3ff9d32a5c0773db9
Source9-MD5: ccb98926a93b0fc90711730790c56ac5
Source10-MD5: 2cc39a94e1e1c555cbbdfea2a825286e
Source11-MD5: 149cd0f1249388e58138a6b1de17dd7c
Source12-MD5: 7dc82f3822f35268c47c86edb9822e6f
Source13-MD5: 375274293a5228c590454a37911fab27
Source13Rename: README.%{ni}
NoSourceDirectory: true
## And where are the sources for sgroup, Plural, etc ?
PatchScript: <<
#!/bin/sh -v
 p=%p
 n=%n
 sntl='[ "%type_raw[-sntl]" == "-sntl" ]'
# To disable :
# strio='[ "%type_raw[-strio]" == "-strio" ]'
 strio='[ "." == "-strio" ]'
 dyn='[ "%type_raw[-dyn]" == "-dyn" ]'
 noopt='[ "%type_raw[-noopt]" == "-noopt" ]'
 . %a/%{ni}.patch 2>&1 | tee /tmp/%{n}.log
<<
UpdateConfigGuessInDirs: . MP
NoSetLDFLAGS: true
NoSetCPPFLAGS: true
# CFLAGS and CXXFLAGS have to set differently in each dir _ because eg ntl doesn't respect CFLAGS,
# and Singular/configure.in does not add its own flags when C(XX)FLAGS is set...
CompileScript: echo -n
# Put even the configure in the InstallScript, else we would first have to do a separate 'rm -fR %i',
# otherwise the configure might wrongly find things there from a previous build.
# Further, this avoids repeating the exports...
InstallScript: <<
#!/bin/sh -v
 a=%a
 p=%p
 i=%i
 b=%b
 n=%n
 ni=%{ni}
 sntl='[ "%type_raw[-sntl]" == "-sntl" ]'
 dyn='[ "%type_raw[-dyn]" == "-dyn" ]'
 mkdir -p %{i}/share/doc/%{n}
 mv /tmp/%{n}.log %{i}/share/doc/%{n}
 . %a/%{ni}.inst 2>&1 | tee -a %{i}/share/doc/%{n}/%{n}.log
<<
InfoDocs: %{ni}.info
DocFiles: doc/COPYING README.%{ni}
ConfFiles: %p/etc/%{ni}rc
License: GPL
Description: CAS for commutative algebra, and singularities
DescUsage: <<
- "Singular -h" will tell how to invoke help from within Singular.
This is very extensive. (It comes up by default trough Safari
when DISPLAY is not set, through mozilla else _ with ESingular, ie
the xemacs interface, it comes through info _ but in all cases
the default can be reset.)
- TSingular gives in xterm interface.
<<
DescPort: <<
- the -sntl variant is like the upstream 'default'-build,
   without it, the build relies on fink's NTL.
- the attempted -strio variant tries to enable streamio in factory and libfac
- the -dyn variant disables '--without-dynamic-kernel'
_ the -noopt variant sets -O0 -ggdb
TODO:
- since the last xemacs vers in fink, ESingular no longer launches.
  Seems like in lines ~ 212-215 of %p/share/singular/emacs/.emacs-singular
  something (toolbar-related) is not a list and should be.
- an annoying series of warnings came up with fink's latest texinfo when building the doc.
- lots of clean-up
- the -noopt variant is a poor man's substitute (just sufficient to get up to here) for the
  'debug' and 'profile' variants which are implicit in the Makefiles. Would be nice to get
  a handle on those in the infofile (additional switch ?) .
- get -strio working: so libfac and factory can better be used standalone; their tests
  should then work _ and one would be able to re-generate the gftables.
- find a way to put the .so files in %p/lib/%ni (s.t. they're still found by the executable).
  (FS policy).
- there might be a way to build with alternative memory-managers (say omalloc, old, new, and none).
  This might help for the next point (currently, macaulay2 builds with singular-* having the "old"
  memory-manager _ afraid of confusion with its own mem-manager (gc) if straying from this).
  Additional switch - horror !
- Try to get a build s.t. macaulay2 can build on it ...
<<
Homepage: http://www.singular.uni-kl.de/
Maintainer: Jean-Francois Mertens <jfmertens@users.sourceforge.net>
<<
