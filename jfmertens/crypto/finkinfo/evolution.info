Package: evolution
Version: 2.4.0
Revision: 1
Source-MD5: c6b38b9a6ba920be5a859e9ed368508d
Source: mirror:gnome:sources/%n/2.4/%n-%v.tar.bz2
## otool_deps evolution
#atk1-shlibs, audiofile-shlibs, cyrus-sasl2-shlibs, db43-ssl-shlibs, esound-shlibs, evolution-data-server-shlibs, gail17-shlibs, gconf2-shlibs, glib2-shlibs, gnome-keyring-shlibs, gnome-vfs2-ssl-shlibs, gnutls-shlibs, gstreamer-shlibs, gtk+2-shlibs, gtkhtml3.8.15-shlibs, libart2-shlibs, libbonobo2-shlibs, libbonoboui2-shlibs, libgcrypt-shlibs, libgettext3-shlibs, libglade2-shlibs, libgnome2-shlibs, libgnomecanvas2-shlibs, libgnomeprint2.2-shlibs, libgnomeprintui2.2-shlibs, libgnomeui2-shlibs, libgpg-error-shlibs, libhowl-shlibs, libiconv, libjpeg-shlibs, libsoup2.2.8-ssl-shlibs, libtasn1-shlibs, libxml2-shlibs, mozilla-shlibs, openldap-ssl-shlibs, openssl097-shlibs, orbit2-shlibs, pango1-xft2-shlibs, popt-shlibs, pth2-shlibs, xorg-shlibs
Depends: atk1-shlibs, audiofile-shlibs, esound-shlibs, evolution-data-server-shlibs, gail17-shlibs, gal2.4.0-shlibs, gconf2-shlibs, glib2-shlibs, gnome-keyring-shlibs, gnome-vfs2-ssl-shlibs | gnome-vfs2-shlibs, gnutls-shlibs, gstreamer-shlibs, gtk+2-shlibs, gtkhtml3.8.15-shlibs, libart2-shlibs, libbonobo2-shlibs, libbonoboui2-shlibs, libgcrypt-shlibs, libgettext3-shlibs, libglade2-shlibs, libgnome2-shlibs, libgnomecanvas2-shlibs, libgnomeprint2.2-shlibs, libgnomeprintui2.2-shlibs, libgnomeui2-shlibs, libgpg-error-shlibs, libhowl-shlibs, libiconv, libjpeg-shlibs, libsoup2.2.8-ssl-shlibs, libtasn1-shlibs, libxml2-shlibs, mozilla-shlibs, orbit2-shlibs, pango1-xft2-shlibs, popt-shlibs, pth2-shlibs, x11-shlibs
BuildDepends: atk1, audiofile, esound, evolution-data-server-dev, gail17-dev, gal2.4.0-dev, gconf2-dev, glib2-dev, gnome-keyring-dev, gnome-vfs2-ssl-dev | gnome-vfs2-dev, gnutls, gstreamer-dev, gtk+2-dev, gtkhtml3.8.15-dev, libart2, libbonobo2-dev, libbonoboui2-dev, libgcrypt, libgettext3-dev, libglade2, libgnome2-dev, libgnomecanvas2-dev, libgnomeprint2.2-dev, libgnomeprintui2.2-dev, libgnomeui2-dev, libgpg-error, libhowl-dev, libiconv-dev, libjpeg, libsoup2.2.8-ssl, libtasn1, libxml2, mozilla-dev, orbit2-dev, pango1-xft2-dev, popt, pth2-dev, x11-dev, pkgconfig, intltool, gettext-tools, scrollkeeper
SetCPPFLAGS: -no-cpp-precomp
SetCFLAGS: -O3 -funroll-loops -fstrict-aliasing
NoSetMAKEFLAGS: true
SetMAKEFLAGS: -j1
Patch: %n.patch
PatchScript: <<
  perl -pi -e 's/hardcode_direct=yes/hardcode_direct=no/g' configure && perl -pi.bak -e "s/-scrollkeeper-update/#-scrollkeeper-update/g" help/C/Makefile.in
## The following are 'for safety' : to avoid "implicit declararation" warnings (still check the ngettext thing in filter-datespec.c.)
  perl -pi.bak -e 's,time\.h>,$&\n\#include <string.h>,'  widgets/misc/e-send-options.h
  perl -pi.bak -e 's,\#define DAY_INDEX 3,\#include <libintl.h>\n$&,' filter/filter-datespec.c
## a quick fix for a very bad linking _ just to see what comes next
  perl -pi.bak -e 's;\$\(LINK\);$& -Wl,-m;' plugins/groupwise-features/Makefile.in
<<
### didn't yet check whether the 2 ac_cv_func... below are still necessary in this version (ie, does the configure test come out right now ?) 
ConfigureParams: ac_cv_func_gethostbyaddr_r=no ac_cv_func_gethostbyname_r=no --enable-static=yes --enable-ipv6=yes --enable-nntp=yes --enable-exchange=yes --enable-file-chooser --enable-plugins=all --with-openldap=yes --with-krb4=/usr --with-krb5=/usr --enable-gtk-doc --mandir=%p/share/man --with-nspr-includes=%p/include/mozilla/nspr --with-nss-includes=%p/include/mozilla/nss --with-nspr-libs=%p/lib/mozilla --with-nss-libs=%p/lib/mozilla --enable-maintainer-mode
#  cf end of configure ouput _ a pkg "dbus-glib-1" would be needed for a full build.
# --enable-pilot-conduits=yes will probably not work; seems "gnome-pilot" is needed.
# The --enable-maintainer-mode is for the config.status thing in the compilescript (to avoid BuildConflict with gtkhtml-dev).
CompileScript: <<
#!/bin/sh -ev
  export CPATH=%p/include
  ./configure %c
  perl -pi -e 's,\-I%p/include\s,,' config.status
  make
<<
PostInstScript: <<
 if [ configure = "$1" ]; then
  export GCONF_CONFIG_SOURCE=`gconftool-2 --get-default-source`
  gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/apps-evolution-mail-prompts-checkdefault-2.4.schemas
  gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/apps_evolution_addressbook-2.4.schemas
  gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/apps_evolution_calendar-2.4.schemas
  gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/apps_evolution_shell-2.4.schemas
  gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/evolution-mail-2.4.schemas
  scrollkeeper-update
 fi
<<
PostRmScript: <<  
 if [ remove != "$1" ]; then
  scrollkeeper-update
 fi
<<
DocFiles: AUTHORS COPYING COPYING-DOCS HACKING MAINTAINERS NEWS README
Description: Advanced email client
DescPort: <<
 Original package and port for evolution < 1.4 by Max Horn
<<
DescPackaging: <<
 TODO: add in Pilot conduit support.
 Also consider adding kerberos support
<<
Homepage: http://gnome.org/projects/evolution/
License: GPL
Maintainer: The Gnome Core Team <fink-gnome-core@lists.sourceforge.net>

