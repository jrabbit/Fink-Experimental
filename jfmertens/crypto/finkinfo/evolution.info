Package: evolution
#Version: 2.3.6.1
Version: 2.2.3
Revision: 1
#Source-MD5: 53a78b4ec8b2e17c3bc53611444d5b48
Source-MD5: 1e01511c78b2dd0dcb8cf83521c167af
#Source: mirror:gnome:sources/%n/2.3/%n-%v.tar.bz2
Source: mirror:gnome:sources/%n/2.2/%n-%v.tar.bz2
# # otool_deps evolution
# atk1-shlibs, audiofile-shlibs, esound-shlibs, evolution-data-server-dev, evolution-data-server-shlibs, gail17-shlibs, \
# gal199-shlibs, gconf2-shlibs, glib2-shlibs, gnome-keyring-shlibs, gnome-vfs2-ssl-shlibs, gnutls-shlibs, gstreamer-shlibs, \
# gtk+2-shlibs, gtkhtml3-shlibs, libart2-shlibs, libbonobo2-shlibs, libbonoboui2-shlibs, libgcrypt-shlibs, libgettext3-shlibs, \
# libglade2-shlibs, libgnome2-shlibs, libgnomecanvas2-shlibs, libgnomeprint2.2-shlibs, libgnomeprintui2.2-shlibs, \
# libgnomeui2-shlibs, libgpg-error-shlibs, libhowl-shlibs, libiconv, libjpeg-shlibs, libsoup-ssl-shlibs, libtasn1-shlibs, \
# libxml2-shlibs, mozilla-shlibs, orbit2-shlibs, pango1-xft2-shlibs, popt-shlibs, pth-shlibs, xorg-shlibs
Depends: <<
	audiofile-shlibs (>= 0.2.3-1), 
	esound (>= 0.2.28-1), 
	gal2.4.0, 
	gconf2 (>= 2.4.0.1-1), 
	libgettext3-shlibs, 
	glib2 (>= 2.2.3-1), 
	gnome-spell ( >= 1.0.5-1), 
	gnome-vfs2 (>= 2.4.0-1) | gnome-vfs2-ssl (>= 2.4.0-1), 
	gtk+2 (>= 2.4.0-1), 
	gtkhtml3 ( >= 3.2.0-1), 
	libart2-shlibs (>= 2.3.16-1), 
	libbonobo2 (>= 2.4.0-1), 
	libbonoboui2 (>= 2.4.0-1), 
	libglade2-shlibs (>= 2.0.1-3), 
	libgnomeprintui2.2-shlibs (>= 2.4.0-1), 
	libgnomeprint2.2-shlibs (>= 2.4.0-2), 
	libgnome2 (>= 2.4.0-1), 
	libgnomecanvas2 (>= 2.4.0-1), 
	libgnomeui2 (>= 2.4.0.1-1), 
	libiconv, 
	libsoup2.2.8-ssl-shlibs, 
	libxml2-shlibs (>= 2.6.1-1), 
	orbit2 (>= 2.8.1-1), 
	pango1-xft2 (>= 1.2.5-1), 
	pkgconfig,
	popt, 
	mozilla, 
	gail17-shlibs, 
	evolution-data-server (>= 1.0.1-1)
<<
BuildDepends: <<
	glib2-dev (>= 2.4.0-1), 
	atk1 (>= 1.8.0-1), 
	pango1-xft2-dev (>= 1.2.5-1), 
	gtkhtml3-dev ( >= 3.2.0), 
	gtk+2-dev (>= 2.4.0-1), 
	libgnomecanvas2-dev (>= 2.4.0-1), 
	orbit2-dev (>= 2.8.1-1), 
	gal2.4.0-dev, 
	gconf2-dev (>= 2.4.0.1-1), 
	gnome-spell-dev ( >= 1.0.5-1), 
	gnome-vfs2-dev (>= 2.4.0-1) | gnome-vfs2-ssl-dev (>= 2.4.0-1), 
	libsoup2.2.8-ssl, 
	libxml2 (>= 2.6.1-1), 
	libbonobo2-dev (>= 2.4.0-1), 
	libglade2-shlibs (>= 2.0.1-3), 
	libgnomeprintui2.2-dev (>= 2.4.0-1), 
	libgnomeprint2.2-dev (>= 2.4.0-2), 
	libgnome2-dev (>= 2.4.0-1), 
	libbonoboui2-dev (>= 2.4.0-1), 
	libgnomeui2-dev (>= 2.4.0.1-1), 
	db31 (>= 3.1.17-9), 
	libjpeg, 
	pkgconfig, 
	intltool, 
	popt, 
	mozilla, 
	gail17-dev, 
	libgettext3-dev, 
	gettext-tools, 
	libiconv-dev, 
	libart2 (>= 2.3.16-1), 
	esound (>= 0.2.28-1), 
	scrollkeeper (>= 0.3.12-2), 
	evolution-data-server-dev (>= 1.0.1-1)
<<
SetCPPFLAGS: -no-cpp-precomp
SetCFLAGS: -O3 -funroll-loops -fstrict-aliasing -flat_namespace -undefined suppress
NoSetMAKEFLAGS: true
SetMAKEFLAGS: -j1
Patch: %n.patch
PatchScript: <<
  perl -pi -e 's/hardcode_direct=yes/hardcode_direct=no/g' configure && perl -pi.bak -e "s/-scrollkeeper-update/#-scrollkeeper-update/g" help/*/Makefile.in
## The following are 'for safety' : to avoid "implicit declararation" warnings (still check the ngettext thing in filter-datespec.c.)
# Else implicit declararation of functions CAMEL_MULTIPART and CAMEL_IS_MULTIPART :
  perl -pi.bak -e 's,transport\.h>,$&\n\#include <camel/camel-multipart.h>,' mail/mail-ops.c
  perl -pi.bak -e 's,time\.h>,$&\n\#include <string.h>,'  widgets/misc/e-send-options.h
  perl -pi.bak -e 's,include <config\.h>,$&\n\#include "a11y/addressbook/ea-addressbook.h",' addressbook/gui/widgets/e-{minicard,addressbook}{,-view}.c
  perl -pi.bak -e 's,mime-message\.h>,$&\n\#include <libedataserver/e-util.h>\n\#include <libecal/e-cal-time-util.h>,' plugins/itip-formatter/itip-view.c
  perl -pi.bak -e 's,gtkdialog\.h>,$&\n\#include <gtk/gtksignal.h>,' composer/e-msg-composer-attachment.c
  perl -pi.bak -e 's,e-cal-time-util\.h>,$&\n\#include <libedataserver/e-categories.h>,' calendar/gui/e-tasks.c
  perl -pi.bak -e 's,\#define DAY_INDEX 3,\#include <libintl.h>\n$&,' filter/filter-datespec.c
  perl -pi.bak -e 's,mail/em-vfolder-rule\.h,mail/mail-vfolder.h,' plugins/shared-folder/share-folder-common.c
# and to find Evolution.h in mail-vfolder.h when compiling share-folder-common.c :
  perl -pi.bak -e 's,Evolution\.h,shell/Evolution.h,' mail/mail-vfolder.h
<<
ConfigureParams: ac_cv_func_gethostbyaddr_r=no ac_cv_func_gethostbyname_r=no --enable-static=yes --enable-pilot-conduits=no --enable-ipv6=no --with-db3-includes=%p/include/db31 --with-db3-libs=%p/lib/db31 --disable-gtk-doc --mandir=%p/share/man --with-nspr-includes=%p/include/mozilla/nspr --with-nss-includes=%p/include/mozilla/nss --with-nspr-libs=%p/lib/mozilla --with-nss-libs=%p/lib/mozilla
#CompileScript: export have_addrinfo=yes ; ./configure %c ; make
PostInstScript: <<
 if [ configure = "$1" ]; then
  export GCONF_CONFIG_SOURCE=`gconftool-2 --get-default-source`
  gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/apps_evolution_addressbook-2.2.schemas
  gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/apps_evolution_calendar-2.2.schemas
  gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/apps_evolution_shell-2.2.schemas
  gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/evolution-mail-2.2.schemas
  scrollkeeper-update
 fi
<<
PostRmScript: <<  
 if [ remove != "$1" ]; then
  scrollkeeper-update
 fi
<<
DocFiles: AUTHORS COPYING COPYING-DOCS HACKING MAINTAINERS NEWS README
Description: Advanced email client
DescPort: <<
 Original package and port for evolution < 1.4 by Max Horn
<<
DescPackaging: <<
 TODO: add in Pilot conduit support.
 Also consider adding kerberos support
<<
Homepage: http://gnome.org/projects/evolution/
License: GPL
Maintainer: The Gnome Core Team <fink-gnome-core@lists.sourceforge.net>
