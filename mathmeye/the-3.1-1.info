Package: the
Version: 3.1
Revision: 1
Maintainer: Eric Oberle <eoberle@users.sourceforge.net>
GCC: 3.1
Source: mirror:sourceforge:/hessling-editor/THE-%v.tar.gz

Source-MD5: 3d09dad65e1c0efe9ec8ead013df9d08
SourceDirectory: THE-%v

CompileScript: <<
  #!/bin/sh
  ./configure --prefix=%p --with-rexx=regina --with-rexxlibdir=%p/lib --with-ncurses --with-curseslibdir=%p/l\
ib
  make
  mv the the-ncurses
  ./configure --prefix=%p --with-rexx=regina --with-rexxlibdir=%p/lib --with-xcurses --with-cursesincdir=%p/i\
nclude --with-curseslibdir=%p/lib
  make the
  mv the the-xcurses
<<
InstallScript: <<
  #!/bin/sh
  echo "#!/bin/sh
  if [ \$TERM_PROGRAM ]; then
      the-ncurses \$*;
  elif [ \$TERM ]; then
      the-xcurses \$*;
  else 
      the-ncurses \$*;
   fi
  " >> the
  chmod 755 the
  make install prefix=%i
  install -m 755 the-ncurses %i/bin/
  install -m 755 the-xcurses %i/bin/


#!/bin/sh
if [ ! -d ~/.the ]; then
 mkdir ~/.the
 chmod 755 ~/.the
   echo "
   /* set prefix area on when off, set prefix area off when on */
   'extract @PREFIX'
   if prefix.1 = 'ON' then Do
      'set prefix off'
      End
   Else Do
      'set prefix on LEFT'
      End 
   Exit" >> ~/.the/toggle_prefix.the

   echo "
   /* set shadow off when on, set shadow on when off */
   'extract @SHADOW'
   if shadow.1 = 'ON' then Do
      'set shadow off'
      'msg from now on: no shadow lines'
      End
   Else Do
      'set shadow on'
      'msg from now on: shadow lines'
      End
  " >> ~/.the/toggle_shadow.the
fi

if [ !  -r ~/.therc ]; then
   echo "
/* */
/*trace all */
/* Default profile by Eric Oberle, Stanford University, as part of Fink Package */

    Command 'def f1 macro Toggle_prefix'
    Command 'def f2 macro Toggle_shadow'
    Command 'def f3 SOS makecurr'
    Command 'def f4 nextw'
    Command 'def f5 insertm toggle'
    Command 'def f6 ? '
    command 'def f7 ffile '
    Command 'def f8 Spltjoin'
    Command 'def f9 tabpre'
    command 'def f10 x ~/.therc'
    command 'def f11 tabpre'
    Command 'def f12 cursor home save'
    Command 'def f13 cursor home save'
    Command 'def S-F1 '
    Command 'def S-F8  set highlight altered'
    Command 'def S-F7 set hexshow on '    
    Command 'def S-F4 help'
    Command 'def S-F5 macro invert'
    Command 'def S-F11  back'
    Command 'def S-F12  forward'
    Command 'def c-f12 right 75'
    Command 'def c-f11 left 75'

'Set Reserved -2 F1-Prefix 2-Shadow 3-CurrLin 4-NxtFile 5-InsMode 6-Recall 7-Save 8-spljn 9-tabpre 10-Profed 11-tabprefix 12-home'
'Set Reserved -1 SF+                  ML        HELP      Invert           Hexshw   Altrd   Pagedwn   PageUp'



set reprofile on
set number on
set insertmode on
set macropath '~/.the'
'def del sos cuadelba'      /* makes delete key work as backspace */
'def c-d sos delc'          /* makes control-d a fordward delete */
'Extract /Reserved'


Exit
" >>  ~/.therc
 fi



<<


Depends: pdcurses-shlibs, regina-rexx-bin
Build-Depends: pdcurses, regina-rexx
DocFiles: COPYING FAQ README THE_Help.txt 

RuntimeVars: <<
 DYLD_LIBRARY_PATH: %p/lib
<<

Description: THE is a scriptable text and program editor   
DescDetail: <<
This package makes Mark Hessling's THE, a unix implementation of IBM's VM/CMS Xedit and Kedit for the DOS platform, available to the Mac OS X platform.  The includes powerful folding and scripting features, allowing users to do a search and replace, for example,  only on lines previously selected by other criteria.  (Try for example the 'all /criteria/' command followed by 'c /target/replace/ *')  Also try using the shadow selection prefix and line commands.  All of this is fully scriptable using the ReXX macro language, a powerful tcl-like programming language (ReXX is made available via fink as the 'regina-rexx' package.)     

The fink package of 'the' installs two binary executables, one built to run in X11 ('the-xcurses') and one built to run in any terminal window, most notably Apple's  ('the-ncurses'). Invoking 'the' from the command line will invoke whichever of these two versions that seems most appropriate to the terminal type.  The fink package also installs a default user profile in ~/.therc and sets up a macro directory in ~/.the, provided this file and directory do not already exist.  

Full documentation of the editor and its many commands is available at http://hessling-editor.sourceforge.net/doc/index.html. Some online help is available within the by issuing the 'help' command from the command/home line, or by typing shift-F4 under the default profile.

Many thanks for this package are due to Mathias Meyer, who made it possible.



 <<
DescPackaging:
License: LGPL
Homepage: http://hessling-editor.sf.net
