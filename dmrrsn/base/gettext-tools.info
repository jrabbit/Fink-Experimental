Package: gettext-tools
Version: 0.13
Revision: 1
#Source: mirror:gnu:gettext/gettext-%v.tar.gz
Source: mirror:sourceforge/fink/gettext-%v.tar.gz
Source-MD5: 318e266ca3a5d26946ce3684db5bf2cf
Depends: libiconv, libiconv-bin, base-files, gettext2-shlibs, expat-shlibs, libgettextpo0-shlibs, emacsen
BuildDepends: libiconv-dev, fink (>= 0.13.6), fink-prebinding, gettext2-dev, expat
Conflicts: gettext-bin (<= 0.10.40-18)
Replaces: gettext-bin (<= 0.10.40-18)
DescPackaging: <<
 Previous versions by Christoph Pfisterer.
<<
PatchScript: sed 's|@PREFIX@|%p|g' <%a/%n.patch | patch -p1
SetCPPFLAGS: -no-cpp-precomp
ConfigureParams: --infodir='${prefix}/share/info' --mandir='${prefix}/share/man' --with-lispdir='${prefix}/share/emacs/site-lisp/%n'
SetLDFLAGS: -L%b/intl/.libs
CompileScript: <<
 cd gettext-tools; ./configure %c
 cd gettext-tools; make
<<
InstallScript: <<
 cd gettext-tools; make install DESTDIR=%d docdir=%p/share/doc/%n
 rm %i/lib/libintl.*
 rm %i/include/libintl.h
 rm %i/share/locale/locale.alias
 rm %i/lib/charset.alias
 install -m 755 -d %i/lib/emacsen-common/packages/install
 install -m 755 gettext-tools/fink/emacsen-install %i/lib/emacsen-common/packages/install/%n
 install -m 755 -d %i/lib/emacsen-common/packages/remove
 install -m 755 gettext-tools/fink/emacsen-remove %i/lib/emacsen-common/packages/remove/%n
<<
DocFiles: README* AUTHORS COPYING NEWS THANKS PACKAGING
InfoDocs: gettext.info
SplitOff: <<
 Package: libgettextpo0-shlibs
 Files: lib/libgettextlib-0.*.dylib lib/libgettextpo.*.dylib lib/libgettextsrc-0.*.dylib
 Shlibs: %p/lib/libgettextpo.0.dylib 2.0.0 %n (>= 0.13-1)
 DocFiles: README* AUTHORS COPYING NEWS THANKS
 Description: Shared libraries for libgettextpo0 package
<<
SplitOff2: <<
 Package: libgettextpo0-dev
 Depends: libgettextpo0-shlibs (= %v-%r)
 BuildDependsOnly: true
 Files: include lib/libgettextlib.dylib lib/libgettextpo.dylib lib/libgettextsrc.dylib lib/*.a lib/*.la
 Description: Developer files for libgettextpo0 package
 DocFiles: README* AUTHORS COPYING NEWS THANKS
<<
#
PostInstScript: <<
 if [ -L %p/etc/alternatives/charset.alias ]; then
   update-alternatives --remove charset.alias %p/lib/charset.alias.gettext
 fi
 %p/lib/emacsen-common/emacs-package-install %n
<<
PreRmScript:    %p/lib/emacsen-common/emacs-package-remove  %n
#
Description: Message localization support
DescDetail: <<
The gettext-tools package provides a developer interface to the i18n and l10n 
support from gettext-runtime.  This support is used by many GNU programs but 
is missing from the Darwin C library.
<<
DescPort: <<
We follow the advice in the PACKAGING document in splitting gettext into two
packages.  Building gettext-tools, however, seems to inevitably build
libintl which we remove by hand after installation (since it belongs to
gettext-runtime).

charset.alias is deleted because it is empty on Darwin anyway and
causes unnecessary conflicts between packages.
<<
License: GPL/LGPL
Maintainer: Fink Core Group <fink-core@lists.sourceforge.net>
Homepage: http://www.gnu.org/software/gettext/
