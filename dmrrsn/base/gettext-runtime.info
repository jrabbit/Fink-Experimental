Package: gettext-runtime
Version: 0.14
Revision: 1
#Source: mirror:gnu:gettext/gettext-%v.tar.gz
Source: mirror:sourceforge:fink/gettext-%v.tar.gz
Source-MD5: e715be150bbe32439ae68fab32df0299
#BuildDepends: libiconv-dev, fink (>= 0.13.6), fink-prebinding
BuildDepends: fink (>= 0.13.6), fink-prebinding
Depends: gettext3-shlibs, libiconv
Conflicts: gettext-bin (<= 0.10.40-29)
Replaces: gettext-bin (<= 0.10.40-29)
DescPackaging: <<
 Previous versions by Christoph Pfisterer.
<<
SetCPPFLAGS: -no-cpp-precomp
ConfigureParams: --infodir=%p/share/info --mandir=%p/share/man --with-included-gettext --disable-csharp
SetLDFLAGS: -L%b/intl/.libs
CompileScript: <<
 %p/bin/fink -y install libiconv-dev
 cd gettext-runtime; ./configure %c
 cd gettext-runtime; make
<<
InstallScript: <<
 cd gettext-runtime; make install DESTDIR=%d docdir=%p/share/doc/%n
 sed 's;-L%b/intl/.libs;;' <%i/lib/libintl.la >%i/lib/libintl.la.tmp
 mv -f %i/lib/libintl.la.tmp %i/lib/libintl.la
 rm %i/lib/charset.alias
<<
DocFiles: README* AUTHORS COPYING NEWS THANKS PACKAGING
InfoDocs: autosprintf.info
SplitOff: <<
 Package: gettext3-shlibs
 Depends: libiconv, libiconv-bin, base-files
# Essential: true
 Files: lib/libasprintf.*.dylib lib/libintl.*.dylib
 Shlibs: <<
  %p/lib/libasprintf.0.dylib 1.0.0 %n (>= 0.14-1)
  %p/lib/libintl.3.dylib 8.0.0 %n (>= 0.14-1)
 <<
 Description: Shared libraries for gettext2 package
 DocFiles: README* AUTHORS COPYING NEWS THANKS
<<
SplitOff2: <<
 Package: gettext3-dev
 Depends: gettext3-shlibs (= %v-%r)
 Conflicts: gettext-dev
 Replaces: gettext-dev
 BuildDependsOnly: true
 Files: include lib/libintl.dylib lib/libasprintf.dylib lib/*.a lib/*.la
 Description: Developer files for gettext2 package
 DocFiles: README* AUTHORS COPYING NEWS THANKS
<<
#
PostInstScript: <<
if [ -L %p/etc/alternatives/charset.alias ]; then
  update-alternatives --remove charset.alias %p/lib/charset.alias.gettext
fi
<<
#
Description: Message localization support
DescDetail: <<
The gettext-runtime package provides some of the i18n and l10n support used by
many GNU programs but missing from the Darwin C library.
<<
DescPort: <<
Uses libtool 1.4; needs a minimal patch for Mac OS X 10.1.

Needs help to link against the right copy of the library. Afterwards,
we remove the used flag from the .la file as it refers to the
temporary build directory.

charset.alias is deleted because it is empty on Darwin anyway and
causes unnecessary conflicts between packages.
<<
License: GPL/LGPL
Maintainer: Fink Core Group <fink-core@lists.sourceforge.net>
Homepage: http://www.gnu.org/software/gettext/
