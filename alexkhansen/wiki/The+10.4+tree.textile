Here is the current plan for creating the 10.4 tree.

# We need to make sure that all packages using ==c++ or g++== have been tagged with the appropriate GCC field in 10.4-transitional.
** Status: This has been done in stable, but has been left to maintainers for unstable.
# We need to make sure that as many packages as possible with a GCC field will build OK using ==g++-4.0 rather than g++-3.3.==
** Status: This has been done in stable, and is being worked on for unstable.
# The new 10.4 tree will allow packages with GCC: 3.3, but a lot of care has to be taken with dependencies: putting such a package there means that all c++-using packages wihch depend on it must be GCC: 3.3 as well.  Packages which are put into the new tree as GCC: 3.3 should have some comment to this effect in the .info file.
** Status: comments are still being added in the stable tree.
** gcc 3.1 remnants: the following .info declare GCC:3.1
*** mutella
*** visual-py23
*** gnomemeeting
*** fxscintilla
*** brs
** The roo* packages already declare GCC:4.0 in the 10.4T tree
# Python 2.2 and all -py22 packages will NOT be brought forward to the 10.4 tree. (same for python21)

If you are interested in creating your own 10.4 tree to help test things, here's how to do it.
* Fink will use the 10.4 tree and the ==g++-4.0== compiler (as the default ==c++== and ==g++==) provided that the environment variable FINK_NOTRANS is set to "true".  If a 10.4 tree does not exist during postinstall, fink will create a symlink from the 10.4-transitional tree to the 10.4 tree.  Note that this is very dangerous!
* To get started, download and unpack fink-0.24.8.tar.gz, and create a symlink from 10.4 to 10.4-transitional within the fink-0.24.8 directory.  Then bootstrap this copy of fink.  (Upgrading an existing fink installation will surely cause a lot of breakage, and is not recommended.)
* Download the packages from the CVS module experimental/dmrrsn/10.4 and add them to your local tree.  As of this writing (10 August 2005), all packages in the 10.4-transitional/stable tree -- unless overridden by one of the experimental packages mentioned above -- should compile with the "correct" version of ==g++== when the trees have been set up as described above.  Work is still being done on the packages in 10.4-transitional/unstable, which may not compile correctly.
* This testing version of the 10.4 tree differs from the one planned for release in that the needed changes in versioned dependencies have not yet been made.  The plan is to get everything ready, and then to make those changes in a very short period of time, creating an "actual" 10.4 tree in the process.  Such changes are needed for anyone who wishes to upgrade an earlier Fink installation into one using the 10.4 tree, but can be dispensed with for fresh installations (as recommended above).

In addition to creating a 10.4 tree, we need a strategy for an upgrade for users when the tree changes.  The code in cirdan's dist-up-branch in CVS is one possible way to go.
