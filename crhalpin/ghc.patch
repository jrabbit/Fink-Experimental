diff -ruN ghc/ghc-6.4/ghc/driver/mangler/ghc-asm.lprl ghc-patched/ghc-6.4/ghc/driver/mangler/ghc-asm.lprl
--- ghc/ghc-6.4/ghc/driver/mangler/ghc-asm.lprl	Fri Jul 22 12:35:50 2005
+++ ghc-patched/ghc-6.4/ghc/driver/mangler/ghc-asm.lprl	Fri Jul 22 12:36:03 2005
@@ -550,6 +550,24 @@
             # code.
             # The .no_dead_strip directives are actually put there by
             # the gcc3 "used" attribute on entry points.
+	} elsif ( $TargetPlatform =~ /^powerpc-apple-.*/ && ( 
+		   /^\.picsymbol_stub/
+		|| /^\.section __TEXT,__picsymbol_stub1,.*/
+		|| /^\.section __TEXT,__picsymbolstub1,.*/
+		|| /^\.symbol_stub/
+		|| /^\.section __TEXT,__symbol_stub1,.*/
+		|| /^\.section __TEXT,__symbolstub1,.*/
+		|| /^\.lazy_symbol_pointer/
+		|| /^\.non_lazy_symbol_pointer/ ))
+	{
+	    $chk[++$i]   = $_;
+	    $chkcat[$i]  = 'dyld';
+	    $chksymb[$i] = '';
+	} elsif ( $TargetPlatform =~ /^powerpc-apple-.*/ && /^\.data/ && $chkcat[$i] eq 'dyld')
+	{	# non_lazy_symbol_ptrs that point to local symbols
+	    $chk[++$i]   = $_;
+	    $chkcat[$i]  = 'dyld';
+	    $chksymb[$i] = '';
 	} elsif ( /^\s+/ ) { # most common case first -- a simple line!
 	    # duplicated from the bottom
 
@@ -696,24 +714,6 @@
 	    	$chkcat[$i]  = 'unknown';
 	    }
 
-	} elsif ( $TargetPlatform =~ /^powerpc-apple-.*/ && ( 
-		   /^\.picsymbol_stub/
-		|| /^\.section __TEXT,__picsymbol_stub1,.*/
-		|| /^\.section __TEXT,__picsymbolstub1,.*/
-		|| /^\.symbol_stub/
-		|| /^\.section __TEXT,__symbol_stub1,.*/
-		|| /^\.section __TEXT,__symbolstub1,.*/
-		|| /^\.lazy_symbol_pointer/
-		|| /^\.non_lazy_symbol_pointer/ ))
-	{
-	    $chk[++$i]   = $_;
-	    $chkcat[$i]  = 'dyld';
-	    $chksymb[$i] = '';
-	} elsif ( $TargetPlatform =~ /^powerpc-apple-.*/ && /^\.data/ && $chkcat[$i] eq 'dyld')
-	{	# non_lazy_symbol_ptrs that point to local symbols
-	    $chk[++$i]   = $_;
-	    $chkcat[$i]  = 'dyld';
-	    $chksymb[$i] = '';
 	} elsif ( $TargetPlatform =~ /^powerpc-.*-linux/ && /^\.LCTOC1 = /o ) {
 		# PowerPC Linux's large-model PIC (-fPIC) generates a gobal offset
 		# table "by hand". Be sure to copy it over.
diff -ruN ghc/ghc-6.4/ghc/rts/GC.c ghc-patched/ghc-6.4/ghc/rts/GC.c
--- ghc/ghc-6.4/ghc/rts/GC.c	Fri Jul 22 12:35:50 2005
+++ ghc-patched/ghc-6.4/ghc/rts/GC.c	Fri Jul 22 12:36:03 2005
@@ -80,7 +80,7 @@
  * We build up a static object list while collecting generations 0..N,
  * which is then appended to the static object list of generation N+1.
  */
-static StgClosure* static_objects;      // live static objects
+StgClosure* static_objects;      // live static objects
 StgClosure* scavenged_static_objects;   // static objects scavenged so far
 
 /* N is the oldest generation being collected, where the generations
diff -ruN ghc/ghc-6.4/mk/build.mk ghc-patched/ghc-6.4/mk/build.mk
--- ghc/ghc-6.4/mk/build.mk	Wed Dec 31 18:00:00 1969
+++ ghc-patched/ghc-6.4/mk/build.mk	Fri Jul 22 12:36:03 2005
@@ -0,0 +1,9 @@
+#
+# Local configuration overrides for DarwinPorts
+#
+ReadlineIncludePath=${realprefix}/include
+SRC_CC_OPTS += -I${realprefix}/include
+SRC_HC_OPTS += -I${realprefix}/include -L${realprefix}/lib
+EXTRA_HSC2HS_OPTS += -I${realprefix}/include
+EXTRA_LD_OPTS += -L${realprefix}/lib
+EXTRA_HC_OPTS += -H128M
diff -ruN ghc/ghc-bootstrap/bin/ghc-6.4 ghc-patched/ghc-bootstrap/bin/ghc-6.4
--- ghc/ghc-bootstrap/bin/ghc-6.4	Thu Apr 28 15:16:39 2005
+++ ghc-patched/ghc-bootstrap/bin/ghc-6.4	Fri Jul 22 10:22:05 2005
@@ -1,5 +1,6 @@
 #!/bin/sh
-GHCBIN="/opt/local/lib/ghc-6.4/ghc-6.4";
-TOPDIROPT="-B/opt/local/lib/ghc-6.4";
+GHCBIN="@@FB@@/ghc-bootstrap/lib/ghc-6.4/ghc-6.4";
+TOPDIROPT="-B@@FB@@/ghc-bootstrap/lib/ghc-6.4";
+export DYLD_LIBRARY_PATH="@@SW@@/lib"
 # Mini-driver for GHC
-exec $GHCBIN $TOPDIROPT ${1+"$@"} -L/opt/local/lib -I/opt/local/include 
+exec $GHCBIN $TOPDIROPT ${1+"$@"} -L@@SW@@/lib -I@@SW@@/include 
diff -ruN ghc/ghc-bootstrap/lib/ghc-6.4/ghc-split ghc-patched/ghc-bootstrap/lib/ghc-6.4/ghc-split
--- ghc/ghc-bootstrap/lib/ghc-6.4/ghc-split	Thu Apr 28 21:19:30 2005
+++ ghc-patched/ghc-bootstrap/lib/ghc-6.4/ghc-split	Fri Jul 22 10:29:44 2005
@@ -1,4 +1,4 @@
-#! /opt/local/bin/perl
+#! /usr/bin/perl
 $TARGETPLATFORM="powerpc-apple-darwin";
 
 
