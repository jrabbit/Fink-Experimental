Package: apache2
Version: 2.0.47
Revision: 1
###
Conflicts: apache, apr
Replaces: apache
BuildDepends: db3, expat, gdbm, dlcompat-dev, libiconv-dev
Depends: daemonic, db3-shlibs, expat-shlibs, gdbm-shlibs
###
CustomMirror: <<
  Primary: http://www.apache.org/dist/httpd/
  Secondary: http://www.apache.org/dist/httpd/old/
<<
###
Source: mirror:custom:httpd-%v.tar.gz
Source-MD5: 63f16638c18b140b649fab32b54d7f9c
###
PatchScript: <<
  rm -rf srclib/apr-util/xml/expat
<<
###
GCC: 3.1
###
ConfFiles: <<
  %p/etc/apache2/httpd.conf
  %p/etc/apache2/magic
  %p/etc/apache2/mime.types
<<
###
CompileScript: <<
  ./configure --prefix=%p/share/apache2 --exec-prefix=%p/share/apache2 --bindir=%p/bin --sbindir=%p/sbin --libexecdir=%p/share/apache2 --datadir=%p/share/apache2 --sysconfdir=%p/etc/apache2 --sharedstatedir=%p/share/apache2 --libdir=%p/lib/apache2 --includedir=%p/include/apache2 --oldincludedir=%p/include/apache2 --mandir=%p/share/man --infodir=%p/share/info --enable-modules=all --enable-mods-shared=all --enable-modules=extension --enable-so --with-expat=%p --with-mpm=prefork --with-ssl=%p --enable-rewrite --enable-dav-fs --enable-cgi --enable-suexec --enable-info --enable-dav --enable-http --enable-ssl --enable-usertrack --enable-headers --enable-expires --enable-mime-magic --enable-logio --enable-deflate --enable-mem-cache --enable-disk-cache --enable-cache --enable-isapi --enable-auth-digest --enable-auth-dbm EXTRA_CFLAGS="-O2"
  make EXTRA_CFLAGS="-O2"
<<
InstallScript: <<
  make install DESTDIR=%d

  install -d -m 755 %d%p/etc/apache2/include
  echo "" >> %d%p/etc/apache2/httpd.conf
  echo "Include %p/etc/apache2/include/" >> %d%p/etc/apache2/httpd.conf
  echo "" >> %d%p/etc/apache2/httpd.conf
<<
###
DaemonicName: apache2
DaemonicFile: <<
 <service>
  <description>Apache2 web server</description>
  <message>Apache2 web server</message>

  <daemon name="httpd">
    <executable background="yes">%p/sbin/apachectl</executable>
    <parameters> -k start</parameters>
  </daemon>
 </service>
<<
###
Description: Powerful HTTP Web Server
DescDetail: <<
  Apache is a powerful web source which is highly flexable. It has support
  for modules, and is used on many large web sites throughout the net. It
  used httpd.conf for all of it's configuration options, which are well
  documented.
<<
DescUsage: <<
  The htdocs, and cgi-bin folders are installed in share/apache2 folder.
  You can configure the server to suit your needs by editing the 
  etc/apache2/httpd.conf file. It doesn't effect the built in apache
  webserver which is included with Mac OS X, but it will conflict if one, or 
  the other is running at the same time.  Base and Extension modules
  are the only ones that are built, and should be fine for most setups.  The
  apachectl command included with this package will be used instead of the
  one that it included with OSX. If you should need to use the OSX one, type
  /usr/sbin/apachectl, and use it like you normally would.
<<
DescPackaging: <<
  Apache2's prefix chooses the location of serveral directories that can't
  be change with other configure options. Using the CompileScript option,
  I overwrote Fink's defaults of ./configure --prefix option, and set the 
  correct prefix manually.

  Moved 'make' to the CompileScript so that apache2-config gives the proper
  values.  Also updated the pkg to add a custom mirror to avoid breakage when
  they move he tarballs and updated to current release.  Also fixed the
  daemonic script. Also added DSO building.  Addes a PatchScript to remove
  the internal expat in favor of fink's expat as there is no switch or way
  to disable it.  - Justin F. Hallett (Feb 7, 2003)
<<
DocFiles: ABOUT_APACHE CHANGES INSTALL LAYOUT LICENSE README* VERSIONING
License: BSD
Homepage: http://www.apache.org
Maintainer: Sonic McTails <sonicmctails@projectnemesis.ibforums.com>
