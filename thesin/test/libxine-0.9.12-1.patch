diff -ruN xine-lib-0.9.12.orig/config.h xine-lib-0.9.12/config.h
--- xine-lib-0.9.12.orig/config.h	Sun Jun 23 03:50:50 2002
+++ xine-lib-0.9.12/config.h	Wed Jul  3 14:25:49 2002
@@ -63,6 +63,9 @@
 /* Define this if you have the Motorola 74xx CPU */
 /* #undef ENABLE_ALTIVEC */
 
+/* Define this if you are running Darwin PPC or OS X */
+/* #undef ARCH_DARWINPPC */
+
 /* Define this if you have mlib installed */
 /* #undef HAVE_MLIB */
 
diff -ruN xine-lib-0.9.12.orig/config.h.in xine-lib-0.9.12/config.h.in
--- xine-lib-0.9.12.orig/config.h.in	Tue Jun  4 15:09:17 2002
+++ xine-lib-0.9.12/config.h.in	Wed Jul  3 14:25:20 2002
@@ -62,6 +62,9 @@
 /* Define this if you have the Motorola 74xx CPU */
 #undef ENABLE_ALTIVEC
 
+/* Define this if you are running Darwin PPC or OS X */
+#undef ARCH_DARWINPPC
+
 /* Define this if you have mlib installed */
 #undef HAVE_MLIB
 
diff -ruN xine-lib-0.9.12.orig/configure xine-lib-0.9.12/configure
--- xine-lib-0.9.12.orig/configure	Sun Jun 23 03:49:50 2002
+++ xine-lib-0.9.12/configure	Wed Jul  3 14:44:36 2002
@@ -9178,6 +9178,20 @@
   PPC_ARCH_FALSE=
 fi
 
+if test x$ppc_arch = "xyes"; then
+  case $host_os in
+    darwin*)
+      PPC_ASM_TRUE='#'
+      PPC_ASM_FALSE=
+      DARWIN_TRUE=
+      DARWIN_FALSE='#'
+      ;;
+    *)
+      PPC_ASM_TRUE= 
+      PPC_ASM_FALSE='#' 
+      ;;
+  esac
+fi
 
 # Check whether --with-xv-path or --without-xv-path was given.
 if test "${with_xv_path+set}" = set; then
@@ -12993,13 +13007,30 @@
 #define ARCH_PPC 1
 EOF
 
+case $host_os in
+  darwin*)
+    cat >> confdefs.h <<\EOF
+#define ARCH_DARWINPPC 1  
+EOF
+    ;;
+  *)
+    ;;
+esac
+
     
     if test x$enable_altivec = xyes; then
-        cat >> confdefs.h <<\EOF
+      cat >> confdefs.h <<\EOF
 #define ENABLE_ALTIVEC 1
 EOF
 
-        CFLAGS="$CFLAGS -Wa,-m7400"
+      case $host_os in
+        darwin*)
+          CFLAGS="$CFLAGS -faltivec"
+          ;;
+        *)
+          CFLAGS="$CFLAGS -Wa,-m7400"
+          ;;
+      esac
     fi
     ;;
 
@@ -13603,6 +13634,10 @@
 s%@HAVE_GICONV_FALSE@%$HAVE_GICONV_FALSE%g
 s%@PPC_ARCH_TRUE@%$PPC_ARCH_TRUE%g
 s%@PPC_ARCH_FALSE@%$PPC_ARCH_FALSE%g
+s%@PPC_ASM_TRUE@%$PPC_ASM_TRUE%g
+s%@PPC_ASM_FALSE@%$PPC_ASM_FALSE%g
+s%@DARWIN_TRUE@%$DARWIN_TRUE%g
+s%@DARWIN_FALSE@%$DARWIN_FALSE%g
 s%@HAVE_XV_TRUE@%$HAVE_XV_TRUE%g
 s%@HAVE_XV_FALSE@%$HAVE_XV_FALSE%g
 s%@XV_LIB@%$XV_LIB%g
@@ -14091,7 +14126,13 @@
 echo " * video driver plugins:"
 if test x"$no_x" != "xyes"; then
   echo "   - XShm (X11 shared memory)"
-  echo "   - SyncFB (for Matrox G200/G400 cards)"
+  case $host_os in
+    darwin*)
+      ;;
+    *)
+      echo "   - SyncFB (for Matrox G200/G400 cards)"
+      ;;
+  esac
     if test x$ac_have_xv = "xyes"; then
     if test x$xv_lib="xlibXv.a"; then
       echo "   - Xv (XVideo *static*)"
@@ -14199,8 +14240,14 @@
 echo "   - stdin_fifo    - rtp"
 echo "   - http          - mms"
 if test x"$have_cdrom_ioctls" = "xyes"; then
-  echo "   - dvd           - vcd"
-  echo "   - cda"
+  case $host_os in
+    darwin*)
+      ;;
+    *)
+      echo "   - dvd           - vcd"
+      echo "   - cda"
+      ;;
+  esac
 fi
 echo "---"
 
diff -ruN xine-lib-0.9.12.orig/src/input/Makefile.in xine-lib-0.9.12/src/input/Makefile.in
--- xine-lib-0.9.12.orig/src/input/Makefile.in	Sun Jun 23 03:51:52 2002
+++ xine-lib-0.9.12/src/input/Makefile.in	Wed Jul  3 14:57:26 2002
@@ -196,8 +196,8 @@
 #
 
 @HAVE_CDROM_IOCTLS_TRUE@in_dvd = xineplug_inp_dvd.la
-@HAVE_CDROM_IOCTLS_TRUE@in_vcd = xineplug_inp_vcd.la
-@HAVE_CDROM_IOCTLS_TRUE@in_cda = xineplug_inp_cda.la
+@HAVE_CDROM_IOCTLS_TRUE@@DARWIN_FALSE@in_vcd = xineplug_inp_vcd.la
+@HAVE_CDROM_IOCTLS_TRUE@@DARWIN_FALSE@in_cda = xineplug_inp_cda.la
 
 lib_LTLIBRARIES = xineplug_inp_file.la $(in_dvd) $(in_vcd) $(in_cda) 	xineplug_inp_stdin_fifo.la xineplug_inp_net.la 	xineplug_inp_rtp.la xineplug_inp_http.la xineplug_inp_mms.la
 
diff -ruN xine-lib-0.9.12.orig/src/input/input_rtp.c xine-lib-0.9.12/src/input/input_rtp.c
--- xine-lib-0.9.12.orig/src/input/input_rtp.c	Sat May 25 15:23:02 2002
+++ xine-lib-0.9.12/src/input/input_rtp.c	Wed Jul  3 15:43:05 2002
@@ -67,7 +67,9 @@
 #endif
 
 #include <stdio.h>
-#include <malloc.h>
+#ifdef HAVE_MALLOC_H
+# include <malloc.h>
+#endif
 #include <unistd.h>
 #include <fcntl.h>
 #include <string.h>
diff -ruN xine-lib-0.9.12.orig/src/libffmpeg/Makefile.in xine-lib-0.9.12/src/libffmpeg/Makefile.in
--- xine-lib-0.9.12.orig/src/libffmpeg/Makefile.in	Sun Jun 23 03:52:01 2002
+++ xine-lib-0.9.12/src/libffmpeg/Makefile.in	Thu Jul  4 13:39:14 2002
@@ -315,7 +315,10 @@
 maintainer-clean-libtool:
 
 xineplug_decode_ff.la: $(xineplug_decode_ff_la_OBJECTS) $(xineplug_decode_ff_la_DEPENDENCIES)
-	$(LINK) -rpath $(libdir) $(xineplug_decode_ff_la_LDFLAGS) $(xineplug_decode_ff_la_OBJECTS) $(xineplug_decode_ff_la_LIBADD) $(LIBS)
+#	$(LINK) -rpath $(libdir) $(xineplug_decode_ff_la_LDFLAGS) $(xineplug_decode_ff_la_OBJECTS) $(xineplug_decode_ff_la_LIBADD) $(LIBS)
+	mkdir -p .libs
+	rm -fr .libs/xineplug_decode_ff.la .libs/xineplug_decode_ff.* .libs/xineplug_decode_ff.*
+	$(CC) -bundle -flat_namespace -multiply_defined suppress -undefined suppress -o .libs/xineplug_decode_ff.so xine_decoder.lo -all_load $(CFLAGS) $(LDFLAGS) ../../src/libffmpeg/libavcodec/.libs/libavcodec.al -lc -install_name $(libdir)/xineplug_decode_ff.so
 
 # This directory's subdirectories are mostly independent; you can cd
 # into them and run `make' without going through this Makefile.
diff -ruN xine-lib-0.9.12.orig/src/libmpeg2/Makefile.in xine-lib-0.9.12/src/libmpeg2/Makefile.in
--- xine-lib-0.9.12.orig/src/libmpeg2/Makefile.in	Sun Jun 23 03:51:54 2002
+++ xine-lib-0.9.12/src/libmpeg2/Makefile.in	Wed Jul  3 15:38:09 2002
@@ -199,7 +199,7 @@
 #libmpeg2_la_SOURCES = slice.c header.c stats.c idct.c motion_comp.c\
 #	decode.c  idct_mmx.c motion_comp_mmx.c
 
-xineplug_decode_mpeg2_la_SOURCES = slice.c header.c stats.c idct.c 	motion_comp.c decode.c idct_mmx.c motion_comp_mmx.c 	idct_mlib.c motion_comp_mlib.c idct_altivec.c 	motion_comp_altivec.c cpu_state.c xine_decoder.c
+xineplug_decode_mpeg2_la_SOURCES = slice.c header.c stats.c idct.c 	motion_comp.c decode.c idct_mmx.c motion_comp_mmx.c 	idct_mlib.c motion_comp_mlib.c cpu_state.c xine_decoder.c	@PPC_ASM_TRUE@idct_altivec.c   motion_comp_altivec.c
 
 xineplug_decode_mpeg2_la_LIBADD = $(top_builddir)/src/xine-engine/libxine.la
 xineplug_decode_mpeg2_la_LDFLAGS = -avoid-version -module
@@ -223,8 +223,8 @@
 $(top_builddir)/src/xine-engine/libxine.la
 xineplug_decode_mpeg2_la_OBJECTS =  slice.lo header.lo stats.lo idct.lo \
 motion_comp.lo decode.lo idct_mmx.lo motion_comp_mmx.lo idct_mlib.lo \
-motion_comp_mlib.lo idct_altivec.lo motion_comp_altivec.lo cpu_state.lo \
-xine_decoder.lo
+motion_comp_mlib.lo cpu_state.lo xine_decoder.lo \
+@PPC_ASM_TRUE@idct_altivec.lo motion_comp_altivec.lo
 COMPILE = $(CC) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
 LTCOMPILE = $(LIBTOOL) --mode=compile $(CC) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
 CCLD = $(CC)
diff -ruN xine-lib-0.9.12.orig/src/libmpeg2/cpu_state.c xine-lib-0.9.12/src/libmpeg2/cpu_state.c
--- xine-lib-0.9.12.orig/src/libmpeg2/cpu_state.c	Mon Apr  1 06:18:21 2002
+++ xine-lib-0.9.12/src/libmpeg2/cpu_state.c	Wed Jul  3 15:57:22 2002
@@ -39,6 +39,7 @@
 }
 #endif
 
+#ifndef ARCH_DARWINPPC
 #ifdef ARCH_PPC
 static void state_save_altivec (cpu_state_t * state)
 {
@@ -98,6 +99,7 @@
 	 );
 }
 #endif
+#endif
 
 void mpeg2_cpu_state_init (uint32_t mm_accel)
 {
@@ -106,10 +108,12 @@
 	mpeg2_cpu_state_restore = state_restore_mmx;
     }
 #endif
+#ifndef ARCH_DARWINPPC
 #ifdef ARCH_PPC
     if (mm_accel & MM_ACCEL_PPC_ALTIVEC) {
 	mpeg2_cpu_state_save = state_save_altivec;
 	mpeg2_cpu_state_restore = state_restore_altivec;
     }
+#endif
 #endif
 }
diff -ruN xine-lib-0.9.12.orig/src/libspudec/spu.c xine-lib-0.9.12/src/libspudec/spu.c
--- xine-lib-0.9.12.orig/src/libspudec/spu.c	Sun Apr 28 07:57:29 2002
+++ xine-lib-0.9.12/src/libspudec/spu.c	Wed Jul  3 16:20:15 2002
@@ -45,7 +45,9 @@
 #include <unistd.h>
 #include <string.h>
 #include <inttypes.h>
-#include <malloc.h>
+#ifdef HAVE_MALLOC_H
+# include <malloc.h>
+#endif
 #include <sys/stat.h>
 #include <sys/types.h>
 #include <fcntl.h>
diff -ruN xine-lib-0.9.12.orig/src/video_out/Makefile.in xine-lib-0.9.12/src/video_out/Makefile.in
--- xine-lib-0.9.12.orig/src/video_out/Makefile.in	Sun Jun 23 03:51:37 2002
+++ xine-lib-0.9.12/src/video_out/Makefile.in	Wed Jul  3 14:42:14 2002
@@ -197,7 +197,7 @@
 libdir = $(XINE_PLUGINDIR)
 
 @HAVE_X11_TRUE@xshm_module = xineplug_vo_out_xshm.la
-@HAVE_X11_TRUE@syncfb_module = xineplug_vo_out_syncfb.la
+@HAVE_X11_TRUE@@DARWIN_FALSE@syncfb_module = xineplug_vo_out_syncfb.la
 @HAVE_X11_TRUE@@HAVE_VIDIX_TRUE@vidix_module = xineplug_vo_out_vidix.la
 @HAVE_X11_TRUE@@HAVE_XV_TRUE@xv_module = xineplug_vo_out_xv.la
 @HAVE_X11_TRUE@@HAVE_OPENGL_TRUE@opengl_module = xineplug_vo_out_opengl.la
diff -ruN xine-lib-0.9.12.orig/src/xine-engine/Makefile.in xine-lib-0.9.12/src/xine-engine/Makefile.in
--- xine-lib-0.9.12.orig/src/xine-engine/Makefile.in	Sun Jun 23 03:51:33 2002
+++ xine-lib-0.9.12/src/xine-engine/Makefile.in	Wed Jul  3 15:00:10 2002
@@ -196,7 +196,7 @@
 
 libxine_la_SOURCES = $(nvtv) xine.c metronom.c configfile.c buffer.c 	load_plugins.c video_decoder.c buffer_types.c 	audio_decoder.c video_out.c audio_out.c resample.c events.c lrb.c 	video_overlay.c osd.c scratch.c locale.c demux.c
 
-libxine_la_DEPENDENCIES = @INTLLIBS@
+libxine_la_DEPENDENCIES = @DARWIN_FALSE@@INTLLIBS@
 libxine_la_LIBADD = $(THREAD_LIBS) $(DYNAMIC_LD_LIBS) @INTLLIBS@ $(ZLIB_LIBS) -lm
 
 libxine_la_LDFLAGS =  	-version-info $(LT_CURRENT):$(LT_REVISION):$(LT_AGE)
diff -ruN xine-lib-0.9.12.orig/src/xine-engine/load_plugins.c xine-lib-0.9.12/src/xine-engine/load_plugins.c
--- xine-lib-0.9.12.orig/src/xine-engine/load_plugins.c	Sat Jun 15 12:00:44 2002
+++ xine-lib-0.9.12/src/xine-engine/load_plugins.c	Thu Jul  4 08:56:13 2002
@@ -132,7 +132,7 @@
 	plugin_name = str;
 	
 	if(!(plugin = dlopen (str, RTLD_LAZY))) {
-	  char *dl_error_msg = dlerror();
+	  char *dl_error_msg = (char*)dlerror();
 
 	  xine_log (this, XINE_LOG_PLUGIN,
 		    _("load_plugins: cannot open demux plugin %s:\n%s\n"),
@@ -294,7 +294,7 @@
 	plugin_name = str;
 	
 	if(!(plugin = dlopen (str, RTLD_LAZY))) {
-	  char *dl_error_msg = dlerror();
+	  char *dl_error_msg = (char*)dlerror();
 
 	  xine_log (this, XINE_LOG_PLUGIN,
 		    _("load_plugins: cannot open input plugin %s:\n%s\n"), 
@@ -514,7 +514,7 @@
 	plugin_name =  str;
 		
 	if(!(plugin = dlopen (str, RTLD_LAZY))) {
-	  char *dl_error_msg = dlerror();
+	  char *dl_error_msg = (char*)dlerror();
 
 	  xine_log (this, XINE_LOG_PLUGIN,
 		    _("load_plugins: failed to load plugin %s:\n%s\n"),
diff -ruN xine-lib-0.9.12.orig/src/xine-utils/Makefile.in xine-lib-0.9.12/src/xine-utils/Makefile.in
--- xine-lib-0.9.12.orig/src/xine-utils/Makefile.in	Sun Jun 23 03:51:31 2002
+++ xine-lib-0.9.12/src/xine-utils/Makefile.in	Wed Jul  3 13:57:18 2002
@@ -192,7 +192,7 @@
 
 EXTRA_DIST = ppcasm_string.S ppc_asm.tmpl
 
-@PPC_ARCH_TRUE@pppc_files = ppcasm_string.S 
+@PPC_ASM_TRUE@pppc_files = ppcasm_string.S 
 
 libxineutils_la_SOURCES = $(pppc_files) utils.c memcpy.c monitor.c cpu_accel.c xine_mutex.c xmllexer.c xmlparser.c
 
@@ -215,11 +215,11 @@
 X_EXTRA_LIBS = @X_EXTRA_LIBS@
 X_PRE_LIBS = @X_PRE_LIBS@
 libxineutils_la_LIBADD = 
-@PPC_ARCH_FALSE@libxineutils_la_OBJECTS =  utils.lo memcpy.lo monitor.lo \
-@PPC_ARCH_FALSE@cpu_accel.lo xine_mutex.lo xmllexer.lo xmlparser.lo
-@PPC_ARCH_TRUE@libxineutils_la_OBJECTS =  ppcasm_string.lo utils.lo \
-@PPC_ARCH_TRUE@memcpy.lo monitor.lo cpu_accel.lo xine_mutex.lo \
-@PPC_ARCH_TRUE@xmllexer.lo xmlparser.lo
+@PPC_ASM_FALSE@libxineutils_la_OBJECTS =  utils.lo memcpy.lo monitor.lo \
+@PPC_ASM_FALSE@cpu_accel.lo xine_mutex.lo xmllexer.lo xmlparser.lo
+@PPC_ASM_TRUE@libxineutils_la_OBJECTS =  ppcasm_string.lo utils.lo \
+@PPC_ASM_TRUE@memcpy.lo monitor.lo cpu_accel.lo xine_mutex.lo \
+@PPC_ASM_TRUE@xmllexer.lo xmlparser.lo
 CFLAGS = @CFLAGS@
 COMPILE = $(CC) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
 LTCOMPILE = $(LIBTOOL) --mode=compile $(CC) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
diff -ruN xine-lib-0.9.12.orig/src/xine-utils/memcpy.c xine-lib-0.9.12/src/xine-utils/memcpy.c
--- xine-lib-0.9.12.orig/src/xine-utils/memcpy.c	Sat Jun 15 12:00:44 2002
+++ xine-lib-0.9.12/src/xine-utils/memcpy.c	Wed Jul  3 14:26:27 2002
@@ -33,9 +33,11 @@
 #include "config.h"
 #endif
 
+#ifndef ARCH_DARWINPPC
 #ifdef ARCH_PPC
 #include "ppcasm_string.h"
 #endif
+#endif
 #include <sys/times.h>
 
 #include <stdlib.h>
@@ -373,10 +375,12 @@
   { "MMXEXT optimized memcpy()", mmx2_memcpy, 0, MM_MMXEXT },
   { "SSE optimized memcpy()", sse_memcpy, 0, MM_MMXEXT|MM_SSE },
 #endif /* ARCH_X86 */
+#ifndef ARCH_DARWINPPC
 #ifdef ARCH_PPC
   { "ppcasm_memcpy()", ppcasm_memcpy, 0, 0 },
   { "ppcasm_cacheable_memcpy()", ppcasm_cacheable_memcpy, 0, 0 },
 #endif /* ARCH_PPC */
+#endif /* ARCH_DARWINPPC */
   { NULL, NULL, 0, 0 }
 };
 
@@ -425,8 +429,10 @@
 #ifdef ARCH_X86
      "kernel", "mmx", "mmxext", "sse", 
 #endif
+#ifndef ARCH_DARWINPPC
 #ifdef ARCH_PPC
 	"ppcasm_memcpy", "ppcasm_cacheable_memcpy",
+#endif
 #endif
      NULL};
   
