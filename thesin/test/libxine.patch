diff -ruN xine-lib-0.9.8.orig/configure xine-lib-0.9.8/configure
--- xine-lib-0.9.8.orig/configure	Tue Jan 15 16:56:53 2002
+++ xine-lib-0.9.8/configure	Wed Apr 17 11:11:57 2002
@@ -11709,7 +11709,7 @@
 #define ENABLE_ALTIVEC 1
 EOF
 
-        GLOBAL_CFLAGS="$GLOBAL_CFLAGS -Wa,-m7400"
+        GLOBAL_CFLAGS="$GLOBAL_CFLAGS -Wa, -faltivec"
     fi
     ;;
 
@@ -12736,7 +12736,7 @@
 echo " * video driver plugins:"
 if test x"$no_x" != "xyes"; then
   echo "   - XShm (X11 shared memory)"
-  echo "   - SyncFB (for Matrox G200/G400 cards)"
+#  echo "   - SyncFB (for Matrox G200/G400 cards)"
     if test x$ac_have_xv = "xyes"; then
     if test x$xv_lib="xlibXv.a"; then
       echo "   - Xv (XVideo *static*)"
@@ -12820,7 +12820,8 @@
 echo "   - stdin         - rtp"
 echo "   - http"
 if test x"$have_cdrom_ioctls" = "xyes"; then
-  echo "   - dvd           - vcd"
-  echo "   - cda"
+#  echo "   - dvd           - vcd"
+#  echo "   - cda"
+  echo "   - dvd           "
 fi
 echo "---"
diff -ruN xine-lib-0.9.8.orig/src/input/Makefile.in xine-lib-0.9.8/src/input/Makefile.in
--- xine-lib-0.9.8.orig/src/input/Makefile.in	Tue Jan 15 17:03:28 2002
+++ xine-lib-0.9.8/src/input/Makefile.in	Wed Apr 17 11:08:53 2002
@@ -176,8 +176,8 @@
 #
 
 @HAVE_CDROM_IOCTLS_TRUE@in_dvd = xineplug_inp_dvd.la
-@HAVE_CDROM_IOCTLS_TRUE@in_vcd = xineplug_inp_vcd.la
-@HAVE_CDROM_IOCTLS_TRUE@in_cda = xineplug_inp_cda.la
+#@HAVE_CDROM_IOCTLS_TRUE@in_vcd = xineplug_inp_vcd.la
+#@HAVE_CDROM_IOCTLS_TRUE@in_cda = xineplug_inp_cda.la
 
 lib_LTLIBRARIES = xineplug_inp_file.la $(in_dvd) $(in_vcd) $(in_cda) 	xineplug_inp_stdin_fifo.la xineplug_inp_net.la 	xineplug_inp_rtp.la xineplug_inp_http.la
 
diff -ruN xine-lib-0.9.8.orig/src/input/dvd_udf.h xine-lib-0.9.8/src/input/dvd_udf.h
--- xine-lib-0.9.8.orig/src/input/dvd_udf.h	Tue Sep 11 06:40:27 2001
+++ xine-lib-0.9.8/src/input/dvd_udf.h	Wed Apr 17 13:58:34 2002
@@ -20,6 +20,30 @@
  * libxine-0.9.8-1.patch,v 1.9 2002/04/17 20:33:42 thesin Exp
  */
 
+/* char *strtok_r(char *s, const char *delim, char **last); */
+static char *
+strtok_r (char *s, const char *delim, char **save_ptr)
+{
+       char *token;
+
+       if (s == NULL)
+               s = *save_ptr;  
+
+       s += strspn (s, delim);
+       if (s == '\0')
+               return NULL;
+
+       token = s;
+       s = strpbrk (token, delim);
+       if (s == NULL) {
+               *save_ptr = strchr (token, '\0');
+       } else {
+               *s = '\0';
+               *save_ptr = s + 1;
+       }
+       return token;
+}
+
 #ifndef DVD_UDF_H
 #define DVD_UDF_H
 
diff -ruN xine-lib-0.9.8.orig/src/input/input_rtp.c xine-lib-0.9.8/src/input/input_rtp.c
--- xine-lib-0.9.8.orig/src/input/input_rtp.c	Wed Jan  2 16:38:37 2002
+++ xine-lib-0.9.8/src/input/input_rtp.c	Sat Apr 13 13:50:48 2002
@@ -67,7 +67,7 @@
 #endif
 
 #include <stdio.h>
-#include <malloc.h>
+#include <stdlib.h>
 #include <unistd.h>
 #include <fcntl.h>
 #include <string.h>
diff -ruN xine-lib-0.9.8.orig/src/libffmpeg/Makefile.in xine-lib-0.9.8/src/libffmpeg/Makefile.in
--- xine-lib-0.9.8.orig/src/libffmpeg/Makefile.in	Tue Jan 15 17:03:31 2002
+++ xine-lib-0.9.8/src/libffmpeg/Makefile.in	Sat Apr 13 13:50:48 2002
@@ -288,7 +288,10 @@
 maintainer-clean-libtool:
 
 xineplug_decode_ff.la: $(xineplug_decode_ff_la_OBJECTS) $(xineplug_decode_ff_la_DEPENDENCIES)
-	$(LINK) -rpath $(libdir) $(xineplug_decode_ff_la_LDFLAGS) $(xineplug_decode_ff_la_OBJECTS) $(xineplug_decode_ff_la_LIBADD) $(LIBS)
+#	$(LINK) -rpath $(libdir) $(xineplug_decode_ff_la_LDFLAGS) $(xineplug_decode_ff_la_OBJECTS) $(xineplug_decode_ff_la_LIBADD) $(LIBS)
+	mkdir -p .libs
+	rm -fr .libs/xineplug_decode_ff.la .libs/xineplug_decode_ff.* .libs/xineplug_decode_ff.*
+	cc -bundle -flat_namespace -multiply_defined suppress -undefined suppress -o .libs/xineplug_decode_ff.so xine_decoder.lo -all_load $(LDFALGS) ../../src/libffmpeg/libavcodec/.libs/libavcodec.al -lc -install_name $(libdir)/xineplug_decode_ff.so
 
 # This directory's subdirectories are mostly independent; you can cd
 # into them and run `make' without going through this Makefile.
diff -ruN xine-lib-0.9.8.orig/src/libffmpeg/libavcodec/dsputil.h xine-lib-0.9.8/src/libffmpeg/libavcodec/dsputil.h
--- xine-lib-0.9.8.orig/src/libffmpeg/libavcodec/dsputil.h	Fri Dec 28 10:31:22 2001
+++ xine-lib-0.9.8/src/libffmpeg/libavcodec/dsputil.h	Sat Apr 13 13:50:48 2002
@@ -12,7 +12,7 @@
 
 void fdct_mmx(DCTELEM *block);
 
-void (*av_fdct)(DCTELEM *block);
+static void (*av_fdct)(DCTELEM *block);
 
 /* encoding scans */
 extern UINT8 ff_alternate_horizontal_scan[64];
diff -ruN xine-lib-0.9.8.orig/src/libffmpeg/libavcodec/utils.c xine-lib-0.9.8/src/libffmpeg/libavcodec/utils.c
--- xine-lib-0.9.8.orig/src/libffmpeg/libavcodec/utils.c	Fri Dec 28 10:31:22 2001
+++ xine-lib-0.9.8/src/libffmpeg/libavcodec/utils.c	Sat Apr 13 13:50:48 2002
@@ -23,7 +23,7 @@
 #include "dsputil.h"
 #include "avcodec.h"
 #ifdef HAVE_MALLOC_H
-#include <malloc.h>
+#include <stdlib.h>
 #else
 #include <stdlib.h>
 #endif
diff -ruN xine-lib-0.9.8.orig/src/libspudec/spu.c xine-lib-0.9.8/src/libspudec/spu.c
--- xine-lib-0.9.8.orig/src/libspudec/spu.c	Sat Jan  5 16:43:39 2002
+++ xine-lib-0.9.8/src/libspudec/spu.c	Sat Apr 13 13:50:48 2002
@@ -45,7 +45,7 @@
 #include <unistd.h>
 #include <string.h>
 #include <inttypes.h>
-#include <malloc.h>
+#include <stdlib.h>
 #include <sys/stat.h>
 #include <fcntl.h>
 
diff -ruN xine-lib-0.9.8.orig/src/libw32dll/wine/driver.c xine-lib-0.9.8/src/libw32dll/wine/driver.c
--- xine-lib-0.9.8.orig/src/libw32dll/wine/driver.c	Thu Jan 10 12:59:51 2002
+++ xine-lib-0.9.8/src/libw32dll/wine/driver.c	Sat Apr 13 13:50:48 2002
@@ -1,7 +1,7 @@
 #include <config.h>
 #include <stdio.h>
 #ifdef HAVE_MALLOC_H
-#include <malloc.h>
+#include <stdlib.h>
 #endif
 #include <stdlib.h>
 #ifdef __FreeBSD__
diff -ruN xine-lib-0.9.8.orig/src/libw32dll/wine/ext.c xine-lib-0.9.8/src/libw32dll/wine/ext.c
--- xine-lib-0.9.8.orig/src/libw32dll/wine/ext.c	Thu Jan 10 12:59:51 2002
+++ xine-lib-0.9.8/src/libw32dll/wine/ext.c	Sat Apr 13 13:50:48 2002
@@ -9,7 +9,7 @@
 #include <stdio.h>
 #include <stdlib.h>
 #ifdef HAVE_MALLOC_H
-#include <malloc.h>
+#include <stdlib.h>
 #endif
 #include <unistd.h>
 #include <sys/mman.h>
diff -ruN xine-lib-0.9.8.orig/src/libw32dll/wine/win32.c xine-lib-0.9.8/src/libw32dll/wine/win32.c
--- xine-lib-0.9.8.orig/src/libw32dll/wine/win32.c	Thu Jan 10 12:59:52 2002
+++ xine-lib-0.9.8/src/libw32dll/wine/win32.c	Sat Apr 13 13:50:48 2002
@@ -34,7 +34,7 @@
 #include <pthread.h>
 #include <errno.h>
 #ifdef HAVE_MALLOC_H
-#include <malloc.h>
+#include <stdlib.h>
 #endif
 #include <time.h>
 #include <math.h>
diff -ruN xine-lib-0.9.8.orig/src/video_out/Makefile.in xine-lib-0.9.8/src/video_out/Makefile.in
--- xine-lib-0.9.8.orig/src/video_out/Makefile.in	Tue Jan 15 17:03:27 2002
+++ xine-lib-0.9.8/src/video_out/Makefile.in	Tue Apr 16 18:50:05 2002
@@ -171,7 +171,7 @@
 libdir = $(XINE_PLUGINDIR)
 
 @HAVE_X11_TRUE@xshm_module = xineplug_vo_out_xshm.la
-@HAVE_X11_TRUE@syncfb_module = xineplug_vo_out_syncfb.la
+#@HAVE_X11_TRUE@syncfb_module = xineplug_vo_out_syncfb.la
 @HAVE_X11_TRUE@@HAVE_XV_TRUE@xv_module = xineplug_vo_out_xv.la
 
 @HAVE_AA_TRUE@aa_module = xineplug_vo_out_aa.la
diff -ruN xine-lib-0.9.8.orig/src/xine-engine/Makefile.in xine-lib-0.9.8/src/xine-engine/Makefile.in
--- xine-lib-0.9.8.orig/src/xine-engine/Makefile.in	Tue Jan 15 17:03:26 2002
+++ xine-lib-0.9.8/src/xine-engine/Makefile.in	Sat Apr 13 13:50:48 2002
@@ -296,7 +296,7 @@
 
 maintainer-clean-libtool:
 
-libxine.la: $(libxine_la_OBJECTS) $(libxine_la_DEPENDENCIES)
+libxine.la: $(libxine_la_OBJECTS)
 	$(LINK) -rpath $(libdir) $(libxine_la_LDFLAGS) $(libxine_la_OBJECTS) $(libxine_la_LIBADD) $(LIBS)
 
 tags: TAGS
