Package: mod-perl-pm581
Version: 1.99_09
Revision: 1
###
Depends: apache2, apache2-dev, system-perl581 | perl581-core
Conflicts: mod-perl-pm560, mod-perl-ssl-pm581, mod-perl-ssl-pm560
Replaces: mod-perl-pm560, mod-perl-ssl-pm581, mod-perl-ssl-pm560
###
Source: http://perl.apache.org/dist/mod_perl-2.0-current.tar.gz
Source-MD5: 475a62af71425e71552f0062ee6b8d6f
SourceDirectory: mod_perl-1.99_09
###
Type: perl 5.8.1
UpdatePOD: true
###
DocFiles: Changes INSTALL LICENSE MANIFEST README ROADMAP STATUS
###
CompileScript: <<
  perl Makefile.PL PERL=/usr/bin/perl PREFIX=%p INSTALLPRIVLIB=%p/lib/perl5 INSTALLARCHLIB=%p/lib/perl5/darwin INSTALLSITELIB=%p/lib/perl5 INSTALLSITEARCH=%p/lib/perl5/darwin INSTALLMAN1DIR=%p/share/man/man1 INSTALLMAN3DIR=%p/share/man/man3 MP_INST_APACHE2=1 MP_USE_DSO=1 MP_APXS=%p/sbin/apxs
  make
### Disabled since httpd can't be running and I thought it was pointless
### to stop the server to test something I know works :)
#  make test APACHE_USER=www APACHE_GROUP=www APXS=%p/sbin/apxs APACHE_PORT=80 APACHE=%p/sbin/httpd
### Fix the make file so the apache dso module install in the right dir
  perl -pi -e 's,%p/share/apache2,%i/share/apache2,gs' src/modules/perl/Makefile.modperl
<<
###
SplitOff: <<
  Package: libapache2-mod-perl
  Description: Apache2 perl DSO Module
  Depends: apache2, apache2-common, mod-perl-pm581
  BuildDepends: apache2-dev
  Files: <<
    share/apache2/mod_perl.so
  <<
  DocFiles: LICENSE
  PostInstScript: <<
    MODULENAME=perl
    APXS=%p/sbin/apxs
    MOD_PREFIX=%p/share/apache2/
    MODULE=mod_$MODULENAME.so

    echo "Enabling mod_$MODULENAME module..."

    $APXS -e -a -S PREFIX=$MOD_PREFIX -n $MODULENAME $MODULE
    %p/sbin/apachectl restart
  <<
  PreRmScript: <<  
    MODULENAME=perl
    APXS=%p/sbin/apxs
    MOD_PREFIX=%p/share/apache2/
    MODULE=mod_$MODULENAME.so                 

    echo "Disabling mod_$MODULENAME module..."

    $APXS -e -A -S PREFIX=$MOD_PREFIX -n $MODULENAME $MODULE
    %p/sbin/apachectl restart
  <<
<<
###
Description: Apache 2 Perl Module
License: BSD
Maintainer: Justin F. Hallett <thesin@users.sourceforge.net>
Homepage: http://perl.apache.org/
