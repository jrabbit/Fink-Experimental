diff -ruN xmms-1.2.7.orig/Input/cdaudio/cdaudio.c xmms-1.2.7/Input/cdaudio/cdaudio.c
--- xmms-1.2.7.orig/Input/cdaudio/cdaudio.c	Tue Feb  5 07:39:11 2002
+++ xmms-1.2.7/Input/cdaudio/cdaudio.c	Fri Feb 21 23:57:10 2003
@@ -558,7 +558,11 @@
 	subchnl.data = &subinfo;
 	ioctl(cdda_fd, CDIOCREADSUBCHANNEL, &subchnl);
 
+#ifdef XMMS_CDROM_BSD_DARWIN
+	return(LBA_DARWIN(subchnl.data->what.position.absaddr));
+#else
 	return(LBA(subchnl.data->what.position.absaddr.msf));
+#endif
 }
 
 static void drive_get_volume(int *l, int *r)
diff -ruN xmms-1.2.7.orig/Input/cdaudio/cdaudio.h xmms-1.2.7/Input/cdaudio/cdaudio.h
--- xmms-1.2.7.orig/Input/cdaudio/cdaudio.h	Tue Feb  5 07:39:11 2002
+++ xmms-1.2.7/Input/cdaudio/cdaudio.h	Fri Feb 21 23:57:10 2003
@@ -98,11 +98,8 @@
 	} flags;
 };
 
-#ifdef XMMS_CDROM_BSD_DARWIN
-# define LBA(msf) ((msf[1] * 60 + msf[2]) * 75 + msf[3])
-#else
-# define LBA(msf) ((msf.minute * 60 + msf.second) * 75 + msf.frame)
-#endif
+#define LBA(msf) ((msf.minute * 60 + msf.second) * 75 + msf.frame)
+#define LBA_DARWIN(msf) ((msf[1] * 60 + msf[2]) * 75 + msf[3])
 	
 typedef struct
 {
diff -ruN xmms-1.2.7.orig/Output/OSS/Makefile.in xmms-1.2.7/Output/OSS/Makefile.in
--- xmms-1.2.7.orig/Output/OSS/Makefile.in	Mon Mar  4 14:58:30 2002
+++ xmms-1.2.7/Output/OSS/Makefile.in	Sat Feb 22 00:35:02 2003
@@ -177,9 +177,9 @@
 libdir = $(plugindir)/$(OUTPUT_PLUGIN_DIR)
 
 libOSS_la_LDFLAGS = @PLUGIN_LDFLAGS@
-libOSS_la_LIBADD = @GTK_LIBS@ @PTHREAD_LIBS@
+libOSS_la_LIBADD = -loss -lesd -laudiofile @GTK_LIBS@ @PTHREAD_LIBS@
 libOSS_la_SOURCES = $(osssources)
-INCLUDES = @GTK_CFLAGS@ @OSS_CFLAGS@ -I$(top_builddir)/intl
+INCLUDES = @GTK_CFLAGS@ @OSS_CFLAGS@ -I$(top_builddir)/intl -Dopen=___sys_open -Dioctl=___sys_ioctl -Dclose=___sys_close -Dwrite=___sys_write
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
 CONFIG_HEADER = ../../config.h ../../xmms/i18n.h
 CONFIG_CLEAN_FILES = 
diff -ruN xmms-1.2.7.orig/Output/OSS/OSS.h xmms-1.2.7/Output/OSS/OSS.h
--- xmms-1.2.7.orig/Output/OSS/OSS.h	Fri Sep  7 06:11:01 2001
+++ xmms-1.2.7/Output/OSS/OSS.h	Sat Feb 22 00:10:35 2003
@@ -30,6 +30,8 @@
 #include <sys/soundcard.h>
 #elif defined(HAVE_MACHINE_SOUNDCARD_H)
 #include <machine/soundcard.h>
+#elif defined(HAVE_LIBOSS_SOUNDCARD_H)
+#include <liboss/soundcard.h>
 #endif
 
 #include <fcntl.h>
diff -ruN xmms-1.2.7.orig/config.h.in xmms-1.2.7/config.h.in
--- xmms-1.2.7.orig/config.h.in	Mon Mar  4 14:56:50 2002
+++ xmms-1.2.7/config.h.in	Sat Feb 22 00:23:22 2003
@@ -233,8 +233,8 @@
 /* Define if you have the <sys/sched.h> header file.  */
 #undef HAVE_SYS_SCHED_H
 
-/* Define if you have the <sys/soundcard.h> header file.  */
-#undef HAVE_SYS_SOUNDCARD_H
+/* Define if you have the <liboss/soundcard.h> header file.  */
+#undef HAVE_LIBOSS_SOUNDCARD_H
 
 /* Define if you have the <unistd.h> header file.  */
 #undef HAVE_UNISTD_H
diff -ruN xmms-1.2.7.orig/configure xmms-1.2.7/configure
--- xmms-1.2.7.orig/configure	Mon Mar  4 14:57:01 2002
+++ xmms-1.2.7/configure	Sat Feb 22 00:07:20 2003
@@ -3867,7 +3867,7 @@
     # FIXME: Relying on posixy $() will cause problems for
     #        cross-compilation, but unfortunately the echo tests do not
     #        yet detect zsh echo's removal of \ escapes.
-    archive_cmds='$nonopt $(test "x$module" = xyes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib $libobjs $deplibs$linker_flags -install_name $rpath/$soname $verstring'
+    archive_cmds='$nonopt $(test x$module = xyes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib $libobjs $deplibs$linker_flags $(test .$module != .yes && echo -install_name $rpath/$soname $verstring)'
     # We need to add '_' to the symbols in $export_symbols first
     #archive_expsym_cmds="$archive_cmds"' && strip -s $export_symbols'
     hardcode_direct=yes
@@ -10683,7 +10683,7 @@
 
 CPPFLAGS_save=$CPPFLAGS
 CPPFLAGS="$CPPFLAGS $OSS_CFLAGS"
-for ac_hdr in sys/soundcard.h
+for ac_hdr in liboss/soundcard.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
@@ -11782,7 +11782,7 @@
 
 
 
-if test "${ac_cv_header_sys_soundcard_h}" = "yes" || test "${ac_cv_header_machine_soundcard_h}" = "yes"; then
+if test "${ac_cv_header_liboss_soundcard_h}" = "yes" || test "${ac_cv_header_machine_soundcard_h}" = "yes"; then
   HAVE_OSS_TRUE=
   HAVE_OSS_FALSE='#'
 else
diff -ruN xmms-1.2.7.orig/gnomexmms/gnomexmms.desktop xmms-1.2.7/gnomexmms/gnomexmms.desktop
--- xmms-1.2.7.orig/gnomexmms/gnomexmms.desktop	Mon Nov 27 15:20:58 2000
+++ xmms-1.2.7/gnomexmms/gnomexmms.desktop	Fri Feb 21 23:57:10 2003
@@ -9,6 +9,6 @@
 Name[sv]=XMMS-panelprogram
 Name[pt_BR]=Applet do XMMS
 Exec=gnomexmms --activate-goad-server=gnomexmms
-Icon=
+Icon=gnomexmms.xpm
 Terminal=0
 Type=Application
diff -ruN xmms-1.2.7.orig/libxmms/util.c xmms-1.2.7/libxmms/util.c
--- xmms-1.2.7.orig/libxmms/util.c	Fri Jun  1 07:07:49 2001
+++ xmms-1.2.7/libxmms/util.c	Fri Feb 21 23:57:10 2003
@@ -14,6 +14,13 @@
 #include <sys/sysctl.h>
 #endif
 
+#if defined (__APPLE__)
+#include <mach/mach.h>
+#include <mach/thread_policy.h>
+#include <sys/param.h>
+#include <sys/sysctl.h>
+#endif
+
 #if TIME_WITH_SYS_TIME
 # include <sys/time.h>
 # include <time.h>
@@ -72,6 +79,28 @@
 
 gboolean xmms_check_realtime_priority(void)
 {
+#if defined (__APPLE__)
+	struct thread_time_constraint_policy ttcpolicy;
+	int bus_speed, mib [2] = { CTL_HW, HW_BUS_FREQ };
+	size_t len;
+
+	len = sizeof (bus_speed);
+	sysctl (mib, 2, &bus_speed, &len, NULL, 0);
+
+	/* Is it enough? */
+	ttcpolicy.period = bus_speed / 120;
+	ttcpolicy.computation = bus_speed / 1000;
+	ttcpolicy.constraint = bus_speed / 500;
+	ttcpolicy.preemptible = 1;
+
+	thread_policy_set (mach_thread_self (),
+			   THREAD_TIME_CONSTRAINT_POLICY,
+			   (int*)&ttcpolicy,
+			   THREAD_TIME_CONSTRAINT_POLICY_COUNT);
+
+	return TRUE;
+#endif
+
 #ifdef HAVE_SCHED_SETSCHEDULER
 #ifdef __FreeBSD__
 	/*
