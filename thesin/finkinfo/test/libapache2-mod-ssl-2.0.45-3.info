Package: libapache2-mod-ssl
Version: 2.0.45
Revision: 3
###
BuildDepends: db41-ssl, expat (>= 1.95.6-2), openldap-ssl, apache2, apache2-dev
Depends: daemonic, db41-ssl-shlibs, expat-shlibs (>= 1.95.6-2), openldap-ssl-shlibs
###
CustomMirror: <<
  Primary: http://www.apache.org/dist/httpd/
  Secondary: http://www.apache.org/dist/httpd/old/
<<
###
Source: mirror:custom:httpd-%v.tar.gz
Source-MD5: 1f33e9a2e2de06da190230fa72738d75
###
Patch: %f.patch
###
CompileScript: <<
#!/bin/sh
  ./configure \
  --with-ssl=%p \
  --enable-ssl=shared \
  --enable-v4-mapped \
  --enable-modules=all \
  --enable-mods-shared=all \
  --enable-auth-anon \
  --enable-auth-dbm \
  --enable-auth-digest \
  --enable-isapi \
  --enable-file-cache \
  --enable-echo \
  --enable-charset-lite \
  --enable-cache \
  --enable-disk-cache \
  --enable-mem-cache \
  --enable-example \
  --enable-case-filter \
  --enable-case-filter-in \
  --enable-ldap \
  --enable-auth-ldap \
  --enable-ext-filter \
  --enable-deflate \
  --enable-logio \
  --enable-mime-magic \
  --enable-cern-meta \
  --enable-expires \
  --enable-headers \
  --enable-usertrack \
  --enable-unique-id \
  --enable-proxy \
  --enable-proxy-connect \
  --enable-proxy-ftp \
  --enable-proxy-http \
  --enable-optional-hook-export \
  --enable-optional-hook-import \
  --enable-optional-fn-import \
  --enable-optional-fn-export \
  --enable-bucketeer \
  --enable-http \
  --enable-dav \
  --enable-info \
  --enable-suexec \
  --enable-cgi \
  --enable-cgid \
  --enable-dav_fs \
  --enable-vhost-alias \
  --enable-speling \
  --enable-rewrite \
  --enable-so \
  --with-dbm=db4 \
  --with-expat=%p \
  --with-iconv=%p \
  --with-gdbm=%p \
  --with-berkeley-db=%p \
  --enable-threads \
  --enable-other-child \
  --with-ldap \
  --with-ldap-include=%p/include \
  --with-ldap-lib=%p/lib \
  --with-suexec-caller=www-data \
  --with-suexec-bin=%p/lib/apache2/suexec2 \
  --with-suexec-docroot=%p/var/www2 \
  --with-suexec-logfile=%p/var/log/apache2.log \
  --with-suexec-userdir=Sites \
  --with-mpm=prefork \
  --with-pic \
  --enable-shared \
  --prefix=%p/share/apache2 \
  --exec-prefix=%p/share/apache2 \
  --bindir=%p/bin \
  --sbindir=%p/sbin \
  --libexecdir=%p/share/apache2 \
  --datadir=%p/share/apache2 \
  --sysconfdir=%p/etc/apache2 \
  --sharedstatedir=%p/share/apache2 \
  --libdir=%p/lib/apache2 \
  --includedir=%p/include/apache2 \
  --oldincludedir=%p/include/apache2 \
  --mandir=%p/share/man \
  --infodir=%p/share/info
  cd modules/ssl; make mod_ssl.la
<<
InstallScript: <<
  install -d -m 755 %i/share/apache2
  install -m 644 modules/ssl/.libs/mod_ssl.so %i/share/apache2/

  install -d -m 755 %i/include/apache2
  install -m 644 modules/ssl/*.h %i/include/apache2/

  install -d -m 755 %i/share/apache2/manual/ssl
  install -m 644 docs/manual/ssl/* %i/share/apache2/manual/ssl/

  install -d -m 755 %i/share/apache2/manual/mod
  install -m 644 docs/manual/mod/*ssl* %i/share/apache2/manual/mod/
<<
###
DocFiles: LICENSE
PostInstScript: <<
  MODULE=ssl
  APXS=%p/sbin/apxs
  SAPI_SHARED=%p/share/apache2/mod_$MODULE.so
  APXS_CFLAGS=`$APXS -q CFLAGS`

  echo "Enabling $MODULE module..."

  $APXS -e -a -n $MODULE $SAPI_SHARED
  %p/sbin/apachectl restart
<<
PreRmScript: <<  
  MODULE=ssl
  APXS=%p/sbin/apxs
  SAPI_SHARED=%p/share/apache2/mod_$MODULE.so
  APXS_CFLAGS=`$APXS -q CFLAGS`

  echo "Disabling $MODULE module..."

  $APXS -e -A -n $MODULE $SAPI_SHARED
  %p/sbin/apachectl restart
<<
Description: Apache2 ssl DSO Module
License: BSD
Homepage: http://www.apache.org
Maintainer: Sonic McTails <sonicmctails@projectnemesis.ibforums.com>
