diff -ruN fakeroot-0.5.9.orig/communicate.c fakeroot-0.5.9/communicate.c
--- fakeroot-0.5.9.orig/communicate.c	Sun Oct 27 22:19:52 2002
+++ fakeroot-0.5.9/communicate.c	Thu Feb  6 08:53:04 2003
@@ -14,7 +14,9 @@
 #include <dlfcn.h>
 #include <stdio.h>
 #include <sys/ipc.h>
-#include <sys/msg.h>
+#if !defined(__APPLE__) && !defined(__GNUC__)
+# include <sys/msg.h>
+#endif
 #include <sys/sem.h>
 #include <fcntl.h>
 #include <unistd.h>
diff -ruN fakeroot-0.5.9.orig/configure fakeroot-0.5.9/configure
--- fakeroot-0.5.9.orig/configure	Sat Jan 18 07:53:35 2003
+++ fakeroot-0.5.9/configure	Thu Feb  6 08:46:42 2003
@@ -10609,6 +10609,9 @@
 	(*:osf*)
 		libcpath="/shlib/libc.so"
 		;;
+	(*:darwin*)
+		libcpath="/usr/lib/libc.dylib"
+		;;
 	(*)
 		{ echo "$as_me:$LINENO: WARNING: don't know where libc is for $target_os on
 			     $target_cpu, setting to /lib/libc.so" >&5
diff -ruN fakeroot-0.5.9.orig/faked.cc fakeroot-0.5.9/faked.cc
--- fakeroot-0.5.9.orig/faked.cc	Sat Jan 18 07:44:31 2003
+++ fakeroot-0.5.9/faked.cc	Thu Feb  6 09:07:27 2003
@@ -71,7 +71,9 @@
 
 #include "communicate.h"
 #include <sys/ipc.h>
-#include <sys/msg.h>
+#if !defined(__APPLE__) && !defined(__GNUC__)
+# include <sys/msg.h>
+#endif
 #include <sys/wait.h>
 #include <sys/sem.h>
 #include <sys/types.h>
diff -ruN fakeroot-0.5.9.orig/libfakeroot.c fakeroot-0.5.9/libfakeroot.c
--- fakeroot-0.5.9.orig/libfakeroot.c	Sun Dec  8 09:27:59 2002
+++ fakeroot-0.5.9/libfakeroot.c	Thu Feb  6 08:50:53 2003
@@ -23,13 +23,17 @@
 #include "communicate.h"
 #include <stdlib.h>
 #include <sys/ipc.h>
-#include <sys/msg.h>
+#if !defined(__APPLE__) && !defined(__GNUC__)
+# include <sys/msg.h>
+#endif
 #include <fcntl.h>
 #include <string.h>
 #include <stdio.h>
 #include <stdarg.h>
 #include <dlfcn.h>
-#include <unistd.h> 
+#if !defined(__APPLE__) && !defined(__GNUC__)
+# include <unistd.h> 
+#endif
 #include <dirent.h>
 #include <errno.h>
 
