diff -ruN fakeroot-0.5.9.orig/communicate.c fakeroot-0.5.9/communicate.c
--- fakeroot-0.5.9.orig/communicate.c	Sun Oct 27 22:19:52 2002
+++ fakeroot-0.5.9/communicate.c	Thu Feb  6 13:08:52 2003
@@ -14,7 +14,11 @@
 #include <dlfcn.h>
 #include <stdio.h>
 #include <sys/ipc.h>
-#include <sys/msg.h>
+#if !defined(__APPLE__) && !defined(__GNUC__)
+# include <sys/msg.h>
+#else
+# include <mach/message.h>
+#endif
 #include <sys/sem.h>
 #include <fcntl.h>
 #include <unistd.h>
diff -ruN fakeroot-0.5.9.orig/configure fakeroot-0.5.9/configure
--- fakeroot-0.5.9.orig/configure	Sat Jan 18 07:53:35 2003
+++ fakeroot-0.5.9/configure	Thu Feb  6 12:58:16 2003
@@ -10609,6 +10609,9 @@
 	(*:osf*)
 		libcpath="/shlib/libc.so"
 		;;
+	(*:darwin*)
+		libcpath="/usr/lib/libSystem.dylib"
+		;;
 	(*)
 		{ echo "$as_me:$LINENO: WARNING: don't know where libc is for $target_os on
 			     $target_cpu, setting to /lib/libc.so" >&5
diff -ruN fakeroot-0.5.9.orig/faked.cc fakeroot-0.5.9/faked.cc
--- fakeroot-0.5.9.orig/faked.cc	Sat Jan 18 07:44:31 2003
+++ fakeroot-0.5.9/faked.cc	Thu Feb  6 13:08:26 2003
@@ -71,7 +71,11 @@
 
 #include "communicate.h"
 #include <sys/ipc.h>
-#include <sys/msg.h>
+#if !defined(__APPLE__) && !defined(__GNUC__)
+# include <sys/msg.h>
+#else
+# include <mach/message.h>
+#endif
 #include <sys/wait.h>
 #include <sys/sem.h>
 #include <sys/types.h>
diff -ruN fakeroot-0.5.9.orig/libfakeroot.c fakeroot-0.5.9/libfakeroot.c
--- fakeroot-0.5.9.orig/libfakeroot.c	Sun Dec  8 09:27:59 2002
+++ fakeroot-0.5.9/libfakeroot.c	Thu Feb  6 13:08:39 2003
@@ -23,7 +23,11 @@
 #include "communicate.h"
 #include <stdlib.h>
 #include <sys/ipc.h>
-#include <sys/msg.h>
+#if !defined(__APPLE__) && !defined(__GNUC__)
+# include <sys/msg.h>
+#else
+# include <mach/message.h>
+#endif
 #include <fcntl.h>
 #include <string.h>
 #include <stdio.h>
@@ -382,7 +386,11 @@
 }
 #endif
 
+#if !defined(__APPLE__) && !defined(__GNUC__)
 int fchown(int fd, uid_t owner, gid_t group){
+#else
+int fchown(int fd, int owner, int group){
+#endif
   struct stat st;
   int r;
 
