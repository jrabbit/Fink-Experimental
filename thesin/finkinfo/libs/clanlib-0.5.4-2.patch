diff -ruN ClanLib-0.5.4.orig/Documentation/Examples/EventTrigger/Makefile ClanLib-0.5.4/Documentation/Examples/EventTrigger/Makefile
--- ClanLib-0.5.4.orig/Documentation/Examples/EventTrigger/Makefile	Sat Dec 22 04:10:47 2001
+++ ClanLib-0.5.4/Documentation/Examples/EventTrigger/Makefile	Tue Feb 19 14:38:20 2002
@@ -2,8 +2,8 @@
 all:	eventtest eventtest2
 
 eventtest: eventtest.cpp
-	g++ -o eventtest eventtest.cpp -lclanCore
+	c++ -o eventtest eventtest.cpp -lclanCore
 
 eventtest2: eventtest2.cpp
-	g++ -o eventtest2 eventtest.cpp -lclanCore
+	c++ -o eventtest2 eventtest.cpp -lclanCore
 
diff -ruN ClanLib-0.5.4.orig/Documentation/Examples/SoundBuffer/Makefile ClanLib-0.5.4/Documentation/Examples/SoundBuffer/Makefile
--- ClanLib-0.5.4.orig/Documentation/Examples/SoundBuffer/Makefile	Mon Aug 13 15:17:41 2001
+++ ClanLib-0.5.4/Documentation/Examples/SoundBuffer/Makefile	Tue Feb 19 14:38:46 2002
@@ -4,4 +4,4 @@
 
 soundbuffer: Intermediate/soundbuffer.o
 	@echo NOTE: This example is known to segfault at exit on some machines.
-	@g++ -g3 Intermediate/soundbuffer.o -o soundbuffer -lclanCore -lclanApp -lclanSound
+	@c++ -g3 Intermediate/soundbuffer.o -o soundbuffer -lclanCore -lclanApp -lclanSound
diff -ruN ClanLib-0.5.4.orig/Documentation/Makefile.in ClanLib-0.5.4/Documentation/Makefile.in
--- ClanLib-0.5.4.orig/Documentation/Makefile.in	Tue Oct 16 04:50:22 2001
+++ ClanLib-0.5.4/Documentation/Makefile.in	Mon Mar 25 11:20:33 2002
@@ -1,6 +1,6 @@
 prefix=@prefix@/share/
 
-HTML_PREFIX = $(prefix)/doc/ClanLib-docs-@version_minor@/Documentation
+HTML_PREFIX = $(prefix)/share/clanlib/html
 
 all: faq
 	Utilities/webbuilder.pl documentation.theme index.xml
diff -ruN ClanLib-0.5.4.orig/Documentation/Overview/Makefile.in ClanLib-0.5.4/Documentation/Overview/Makefile.in
--- ClanLib-0.5.4.orig/Documentation/Overview/Makefile.in	Tue Oct 30 06:02:48 2001
+++ ClanLib-0.5.4/Documentation/Overview/Makefile.in	Mon Mar 25 11:21:20 2002
@@ -1,6 +1,6 @@
 prefix=@prefix@/share
 
-HTML_PREFIX = $(prefix)/doc/ClanLib-docs-@version_minor@/Documentation
+HTML_PREFIX = $(prefix)/share/clanlib/html
 
 all:
 	../Utilities/webbuilder.pl ../documentation.theme 2dapi.xml
diff -ruN ClanLib-0.5.4.orig/Documentation/Reference/Makefile.in ClanLib-0.5.4/Documentation/Reference/Makefile.in
--- ClanLib-0.5.4.orig/Documentation/Reference/Makefile.in	Tue Oct 16 04:50:23 2001
+++ ClanLib-0.5.4/Documentation/Reference/Makefile.in	Mon Mar 25 11:21:07 2002
@@ -1,6 +1,6 @@
 
 prefix=@prefix@/share
-HTML_PREFIX = $(prefix)/doc/ClanLib-docs-@version_minor@/Documentation
+HTML_PREFIX = $(prefix)/share/clanlib/html
 
 all:
 	@echo 'Type "make html_install" to install the html reference pages.'
diff -ruN ClanLib-0.5.4.orig/Documentation/Tutorial/Makefile.in ClanLib-0.5.4/Documentation/Tutorial/Makefile.in
--- ClanLib-0.5.4.orig/Documentation/Tutorial/Makefile.in	Tue Oct 16 04:50:24 2001
+++ ClanLib-0.5.4/Documentation/Tutorial/Makefile.in	Mon Mar 25 11:21:40 2002
@@ -1,5 +1,5 @@
 prefix=@prefix@/share
-PREFIX = $(prefix)/doc/ClanLib-docs-@version_minor@/Docs/Tutorial
+PREFIX = $(prefix)/share/clanlib/html/Tutorial
 
 all:
 	../Utilities/webbuilder.pl ../documentation.theme advanced.xml
diff -ruN ClanLib-0.5.4.orig/Makefile.in ClanLib-0.5.4/Makefile.in
--- ClanLib-0.5.4.orig/Makefile.in	Thu Dec 13 19:38:47 2001
+++ ClanLib-0.5.4/Makefile.in	Wed Feb 20 17:02:37 2002
@@ -84,12 +84,12 @@
 	@echo "Removing header files from $(INC_PREFIX)."
 	@rm -rf $(INC_PREFIX)/ClanLib/
 	@echo "Removing libraries from $(LIB_PREFIX)."
-	@rm -f $(LIB_PREFIX)/libclanCore.so
-	@rm -f $(LIB_PREFIX)/libclanCore.so.$(D_VERSION_MAJOR)
-	@rm -f $(LIB_PREFIX)/libclanCore.so.$(D_VERSION_MINOR)
-	-@rm -f $(LIB_PREFIX)/libclanGL.so
-	-@rm -f $(LIB_PREFIX)/libclanGL.so.$(D_VERSION_MAJOR)
-	-@rm -f $(LIB_PREFIX)/libclanGL.so.$(D_VERSION_MINOR)
+	@rm -f $(LIB_PREFIX)/libclanCore.dylib
+	@rm -f $(LIB_PREFIX)/libclanCore.$(D_VERSION_MAJOR).dylib
+	@rm -f $(LIB_PREFIX)/libclanCore.$(D_VERSION_MINOR).dylib
+	-@rm -f $(LIB_PREFIX)/libclanGL.dylib
+	-@rm -f $(LIB_PREFIX)/libclanGL.$(D_VERSION_MAJOR).dylib
+	-@rm -f $(LIB_PREFIX)/libclanGL.$(D_VERSION_MINOR).dylib
 	@echo "Removing display targets from $(TARGET_PREFIX)."
 	@rm -rf $(TARGET_PREFIX)
 	@rm -f $(BIN_PREFIX)/clanlib-config
@@ -97,7 +97,7 @@
 strip:
 	@echo ""
 	@echo "stripping library files..."
-	@strip Libs/*.so*
+	@strip Libs/*.dylib
 
 docs: configure docs_compile
 	@echo ""
@@ -159,7 +159,7 @@
 		-path "*[Ww]in32" -prune -o \
 		-path "*MIDI*" -prune -o \
 		-path "*MPEG*" -prune -o \
-	-name *.cpp -print | sed "s/^.\///;" |  xargs g++ -w -M $(INCLUDE_DIRS)| sed "s/\(.*\.o:\)/Libs\/Intermediate\/\1/g;" > Setup/Unix/Makefile.dep 
+	-name *.cpp -print | sed "s/^.\///;" |  xargs c++ -w -M $(INCLUDE_DIRS)| sed "s/\(.*\.o:\)/Libs\/Intermediate\/\1/g;" > Setup/Unix/Makefile.dep 
 
 # Temporary hack:
 dep_beos:
@@ -174,7 +174,7 @@
 		-name '*.cpp' | \
 	grep "\.cpp" | \
 	sed "s/^.\///;" | \
-	xargs g++ $(COMP_OPTIONS) -M | \
+	xargs c++ $(COMP_OPTIONS) -M | \
 	sed "s/\(.*\.o:\)/Libs\/Intermediate\/\1/g;" > Setup/Unix/Makefile.dep
 
 include Setup/Unix/Makefile.dep
diff -ruN ClanLib-0.5.4.orig/Setup/Generic/project.cpp ClanLib-0.5.4/Setup/Generic/project.cpp
--- ClanLib-0.5.4.orig/Setup/Generic/project.cpp	Thu Dec 27 16:43:17 2001
+++ ClanLib-0.5.4/Setup/Generic/project.cpp	Tue Feb 19 14:48:29 2002
@@ -134,12 +134,12 @@
 		#endif
 
 		for (int i=0; exclude_from_build[i] != NULL; i++)
-			if (stricmp(data.cFileName, exclude_from_build[i]) == 0) skip = true;
+			if (strcasecmp(data.cFileName, exclude_from_build[i]) == 0) skip = true;
 
 		std::list<std::string>::const_iterator it;
 		for (it = ignore_list.begin(); it != ignore_list.end(); it++)
 		{
-			if (stricmp(data.cFileName, it->c_str()) == 0)
+			if (strcasecmp(data.cFileName, it->c_str()) == 0)
       	skip = true;
 		}
 
diff -ruN ClanLib-0.5.4.orig/Setup/Unix/Makefile.app.in ClanLib-0.5.4/Setup/Unix/Makefile.app.in
--- ClanLib-0.5.4.orig/Setup/Unix/Makefile.app.in	Mon Dec 24 09:12:59 2001
+++ ClanLib-0.5.4/Setup/Unix/Makefile.app.in	Sat Feb 23 22:59:35 2002
@@ -2,26 +2,26 @@
 # Makefile data for clanApp library.
 #
 
-clanApp: Libs/libclanApp.so Libs/libclanApp.a
+clanApp: Libs/libclanApp.dylib Libs/libclanApp.a
 
 installApp: clanApp
 	@for i in `find Sources/API/Application -type d | grep -v CVS | sed "s/Sources\/API\///;"`; do install -d $(INC_PREFIX)/ClanLib/$$i; done
-	@for i in `find Sources/API/Application -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
-	@install -m 0644 Sources/API/application.h $(INC_PREFIX)/ClanLib/application.h
+	@for i in `find Sources/API/Application -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -c -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
+	@install -c -m 0644 Sources/API/application.h $(INC_PREFIX)/ClanLib/application.h
 	@install -d $(LIB_PREFIX)
-	@install Libs/libclanApp.so.$(D_VERSION_MINOR) $(LIB_PREFIX)
+	@install Libs/libclanApp.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)
 	@install Libs/libclanApp.a $(LIB_PREFIX)
-	@ln -s -f libclanApp.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanApp.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanApp.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanApp.so
+	@ln -s -f libclanApp.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)/libclanApp.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanApp.$(D_VERSION_MAJOR).dylib $(LIB_PREFIX)/libclanApp.dylib
 
 
 OBJF_LIB_App = Libs/Intermediate/clanapp.o
 
-Libs/libclanApp.so: Libs/libclanCore.so $(OBJF_LIB_App)
-	@echo "Building Libs/libclanApp.so"
-	@$(LINK_COMMAND) -Wl,-soname=libclanApp.so.$(D_VERSION_MAJOR) -o Libs/libclanApp.so.$(D_VERSION_MINOR) $(OBJF_LIB_App) -L Libs -lclanCore
-	@ln -s -f libclanApp.so.$(D_VERSION_MINOR) Libs/libclanApp.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanApp.so.$(D_VERSION_MAJOR) Libs/libclanApp.so
+Libs/libclanApp.dylib: Libs/libclanCore.dylib $(OBJF_LIB_App)
+	@echo "Building Libs/libclanApp.dylib"
+	@$(LINK_COMMAND) -dynamiclib -install_name $(LIB_PREFIX)/libclanApp.$(D_VERSION_MAJOR).dylib -compatibility_version $(D_VERSION_MAJOR) -current_version $(D_VERSION_MAJOR) -o Libs/libclanApp.$(D_VERSION_MINOR).dylib $(OBJF_LIB_App) -LLibs -lclanCore
+	@ln -s -f libclanApp.$(D_VERSION_MINOR).dylib Libs/libclanApp.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanApp.$(D_VERSION_MAJOR).dylib Libs/libclanApp.dylib
 
 Libs/libclanApp.a: $(OBJF_LIB_App)
 	@echo "Building Libs/libclanApp.a"
diff -ruN ClanLib-0.5.4.orig/Setup/Unix/Makefile.core.in ClanLib-0.5.4/Setup/Unix/Makefile.core.in
--- ClanLib-0.5.4.orig/Setup/Unix/Makefile.core.in	Tue Jan  8 14:58:35 2002
+++ ClanLib-0.5.4/Setup/Unix/Makefile.core.in	Sat Feb 23 22:58:54 2002
@@ -2,21 +2,21 @@
 # Makefile data for clanCore library.
 #
 
-clanCore: build_info Libs/libclanCore.so Libs/libclanCore.a
+clanCore: build_info Libs/libclanCore.dylib Libs/libclanCore.a
 
 installCore: clanCore
 	@for i in `find Sources/API/Core -type d | grep -v CVS | sed "s/Sources\/API\///;"`; do install -d $(INC_PREFIX)/ClanLib/$$i; done
-	@for i in `find Sources/API/Core -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
+	@for i in `find Sources/API/Core -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -c -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
 	@for i in `find Sources/API/Sound -type d | grep -v CVS | sed "s/Sources\/API\///;"`; do install -d $(INC_PREFIX)/ClanLib/$$i; done
-	@for i in `find Sources/API/Sound -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
-	@install -m 0644 Sources/API/core.h $(INC_PREFIX)/ClanLib/core.h
-	@install -m 0644 Sources/API/sound.h $(INC_PREFIX)/ClanLib/sound.h
-	@install -m 0644 Sources/API/efence.h $(INC_PREFIX)/ClanLib/efence.h
+	@for i in `find Sources/API/Sound -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -c -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
+	@install -c -m 0644 Sources/API/core.h $(INC_PREFIX)/ClanLib/core.h
+	@install -c -m 0644 Sources/API/sound.h $(INC_PREFIX)/ClanLib/sound.h
+	@install -c -m 0644 Sources/API/efence.h $(INC_PREFIX)/ClanLib/efence.h
 	@install -d $(LIB_PREFIX)
-	@install Libs/libclanCore.so.$(D_VERSION_MINOR) $(LIB_PREFIX)
+	@install Libs/libclanCore.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)
 	@install Libs/libclanCore.a $(LIB_PREFIX)
-	@ln -s -f libclanCore.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanCore.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanCore.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanCore.so
+	@ln -s -f libclanCore.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)/libclanCore.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanCore.$(D_VERSION_MAJOR).dylib $(LIB_PREFIX)/libclanCore.dylib
 	@install -d $(BIN_PREFIX)
 	@install Setup/Unix/clanlib-config $(BIN_PREFIX)
 
@@ -90,11 +90,11 @@
 
 LINK_CORE = @LIBS@
 
-Libs/libclanCore.so: $(OBJF_CORE_ALL)
-	@echo "Building Libs/libclanCore.so"
-	@$(LINK_COMMAND) -Wl,-soname=libclanCore.so.$(D_VERSION_MAJOR) -o Libs/libclanCore.so.$(D_VERSION_MINOR) $(OBJF_CORE_ALL) $(LINK_CORE)
-	@ln -s -f libclanCore.so.$(D_VERSION_MINOR) Libs/libclanCore.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanCore.so.$(D_VERSION_MAJOR) Libs/libclanCore.so
+Libs/libclanCore.dylib: $(OBJF_CORE_ALL)
+	@echo "Building Libs/libclanCore.dylib"
+	@$(LINK_COMMAND) -dynamiclib -install_name $(LIB_PREFIX)/libclanCore.$(D_VERSION_MAJOR).dylib -compatibility_version $(D_VERSION_MAJOR) -current_version $(D_VERSION_MAJOR) -o Libs/libclanCore.$(D_VERSION_MINOR).dylib $(OBJF_CORE_ALL) $(LINK_CORE)
+	@ln -s -f libclanCore.$(D_VERSION_MINOR).dylib Libs/libclanCore.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanCore.$(D_VERSION_MAJOR).dylib Libs/libclanCore.dylib
 
 Libs/libclanCore.a: $(OBJF_CORE_ALL)
 	@echo "Building Libs/libclanCore.a"
diff -ruN ClanLib-0.5.4.orig/Setup/Unix/Makefile.display.in ClanLib-0.5.4/Setup/Unix/Makefile.display.in
--- ClanLib-0.5.4.orig/Setup/Unix/Makefile.display.in	Mon Dec 24 09:12:59 2001
+++ ClanLib-0.5.4/Setup/Unix/Makefile.display.in	Thu Mar 21 23:25:02 2002
@@ -1,17 +1,17 @@
 # Makefile data for clanDisplay library.
 #
 
-clanDisplay: Libs/libclanDisplay.so Libs/libclanDisplay.a
+clanDisplay: Libs/libclanDisplay.dylib Libs/libclanDisplay.a
 
 installDisplay: clanDisplay
 	@for i in `find Sources/API/Display -type d | grep -v CVS | sed "s/Sources\/API\///;"`; do install -d $(INC_PREFIX)/ClanLib/$$i; done
-	@for i in `find Sources/API/Display -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
-	@install -m 0644 Sources/API/display.h $(INC_PREFIX)/ClanLib/display.h
+	@for i in `find Sources/API/Display -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -c -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
+	@install -c -m 0644 Sources/API/display.h $(INC_PREFIX)/ClanLib/display.h
 	@install -d $(LIB_PREFIX)
-	@install Libs/libclanDisplay.so.$(D_VERSION_MINOR) $(LIB_PREFIX)
+	@install Libs/libclanDisplay.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)
 	@install Libs/libclanDisplay.a $(LIB_PREFIX)
-	@ln -s -f libclanDisplay.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanDisplay.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanDisplay.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanDisplay.so
+	@ln -s -f libclanDisplay.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)/libclanDisplay.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanDisplay.$(D_VERSION_MAJOR).dylib $(LIB_PREFIX)/libclanDisplay.dylib
 
 
 OBJF_DISP_GENERIC = \
@@ -114,13 +114,13 @@
 
 # $(OBJF_DISP_X11) $(OBJF_DISP_FBDEV)
 
-LINK_DISP = -L Libs -lclanCore @x_libraries@ -lHermes @directfb_libs@
+LINK_DISP = -LLibs -lclanCore -lclanApp @x_libraries@ -lHermes @directfb_libs@
 
-Libs/libclanDisplay.so: Libs/libclanCore.so $(OBJF_DISP_ALL)
-	@echo "Building Libs/libclanDisplay.so"
-	@$(LINK_COMMAND) -Wl,-soname=libclanDisplay.so.$(D_VERSION_MAJOR) -o Libs/libclanDisplay.so.$(D_VERSION_MINOR) $(OBJF_DISP_ALL) $(LINK_DISP)
-	@ln -s -f libclanDisplay.so.$(D_VERSION_MINOR) Libs/libclanDisplay.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanDisplay.so.$(D_VERSION_MAJOR) Libs/libclanDisplay.so
+Libs/libclanDisplay.dylib: Libs/libclanCore.dylib $(OBJF_DISP_ALL)
+	@echo "Building Libs/libclanDisplay.dylib"
+	@$(LINK_COMMAND) -dynamiclib -install_name $(LIB_PREFIX)/libclanDisplay.$(D_VERSION_MAJOR).dylib -compatibility_version $(D_VERSION_MAJOR) -current_version $(D_VERSION_MAJOR) -o Libs/libclanDisplay.$(D_VERSION_MINOR).dylib $(OBJF_DISP_ALL) $(LINK_DISP)
+	@ln -s -f libclanDisplay.$(D_VERSION_MINOR).dylib Libs/libclanDisplay.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanDisplay.$(D_VERSION_MAJOR).dylib Libs/libclanDisplay.dylib
 
 Libs/libclanDisplay.a: $(OBJF_DISP_ALL)
 	@echo "Building Libs/libclanDisplay.a"
diff -ruN ClanLib-0.5.4.orig/Setup/Unix/Makefile.gl.in ClanLib-0.5.4/Setup/Unix/Makefile.gl.in
--- ClanLib-0.5.4.orig/Setup/Unix/Makefile.gl.in	Mon Dec 24 09:12:59 2001
+++ ClanLib-0.5.4/Setup/Unix/Makefile.gl.in	Sat Feb 23 23:00:35 2002
@@ -2,17 +2,17 @@
 # Makefile data for clanGL library.
 #
 
-clanGL: Libs/libclanGL.so Libs/libclanGL.a
+clanGL: Libs/libclanGL.dylib Libs/libclanGL.a
 
 installGL: clanGL
 	@for i in `find Sources/API/GL -type d | grep -v CVS | sed "s/Sources\/API\///;"`; do install -d $(INC_PREFIX)/ClanLib/$$i; done
-	@for i in `find Sources/API/GL -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
-	@install -m 0644 Sources/API/gl.h $(INC_PREFIX)/ClanLib/gl.h
+	@for i in `find Sources/API/GL -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -c -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
+	@install -c -m 0644 Sources/API/gl.h $(INC_PREFIX)/ClanLib/gl.h
 	@install -d $(LIB_PREFIX)
-	@install Libs/libclanGL.so.$(D_VERSION_MINOR) $(LIB_PREFIX)
+	@install Libs/libclanGL.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)
 	@install Libs/libclanGL.a $(LIB_PREFIX)
-	@ln -s -f libclanGL.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanGL.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanGL.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanGL.so
+	@ln -s -f libclanGL.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)/libclanGL.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanGL.$(D_VERSION_MAJOR).dylib $(LIB_PREFIX)/libclanGL.dylib
 
 OBJF_LIB_GL = Libs/Intermediate/texture_gl.o \
 		Libs/Intermediate/opengl.o \
@@ -23,11 +23,11 @@
 		Libs/Intermediate/blit_gl_generic.o \
 		Libs/Intermediate/glx_target.o
 
-Libs/libclanGL.so: Libs/libclanCore.so $(OBJF_LIB_GL)
-	@echo "Building Libs/libclanGL.so"
-	@$(LINK_COMMAND) -Wl,-soname=libclanGL.so.$(D_VERSION_MAJOR) -o Libs/libclanGL.so.$(D_VERSION_MINOR) $(OBJF_LIB_GL) -L Libs -lclanDisplay -lGL -lGLU @x_libraries@  
-	@ln -s -f libclanGL.so.$(D_VERSION_MINOR) Libs/libclanGL.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanGL.so.$(D_VERSION_MAJOR) Libs/libclanGL.so
+Libs/libclanGL.dylib: Libs/libclanCore.dylib $(OBJF_LIB_GL)
+	@echo "Building Libs/libclanGL.dylib"
+	@$(LINK_COMMAND) -dynamiclib -install_name $(LIB_PREFIX)/libclanGL.$(D_VERSION_MAJOR).dylib -compatibility_version $(D_VERSION_MAJOR) -current_version $(D_VERSION_MAJOR) -o Libs/libclanGL.$(D_VERSION_MINOR).dylib $(OBJF_LIB_GL) -LLibs -lclanDisplay -lclanCore -lclanApp -lHermes -lGL -lGLU @x_libraries@  
+	@ln -s -f libclanGL.$(D_VERSION_MINOR).dylib Libs/libclanGL.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanGL.$(D_VERSION_MAJOR).dylib Libs/libclanGL.dylib
 
 Libs/libclanGL.a: Libs/libclanCore.a $(OBJF_LIB_GL)
 	@echo "Building Libs/libclanGL.a"
diff -ruN ClanLib-0.5.4.orig/Setup/Unix/Makefile.gui.in ClanLib-0.5.4/Setup/Unix/Makefile.gui.in
--- ClanLib-0.5.4.orig/Setup/Unix/Makefile.gui.in	Fri Jan  4 08:20:42 2002
+++ ClanLib-0.5.4/Setup/Unix/Makefile.gui.in	Sat Feb 23 23:00:59 2002
@@ -2,17 +2,17 @@
 # Makefile data for clanGUI library.
 #
 
-clanGUI: Libs/libclanGUI.so Libs/libclanGUI.a
+clanGUI: Libs/libclanGUI.dylib Libs/libclanGUI.a
 
 installGUI: clanGUI
 	@for i in `find Sources/API/GUI -type d | grep -v CVS | sed "s/Sources\/API\///;"`; do install -d $(INC_PREFIX)/ClanLib/$$i; done
-	@for i in `find Sources/API/GUI -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
-	@install -m 0644 Sources/API/gui.h $(INC_PREFIX)/ClanLib/gui.h
+	@for i in `find Sources/API/GUI -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -c -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
+	@install -c -m 0644 Sources/API/gui.h $(INC_PREFIX)/ClanLib/gui.h
 	@install -d $(LIB_PREFIX)
-	@install Libs/libclanGUI.so.$(D_VERSION_MINOR) $(LIB_PREFIX)
+	@install Libs/libclanGUI.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)
 	@install Libs/libclanGUI.a $(LIB_PREFIX)
-	@ln -s -f libclanGUI.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanGUI.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanGUI.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanGUI.so
+	@ln -s -f libclanGUI.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)/libclanGUI.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanGUI.$(D_VERSION_MAJOR).dylib $(LIB_PREFIX)/libclanGUI.dylib
 
 OBJF_LIB_GUI = \
 	Libs/Intermediate/button.o \
@@ -77,11 +77,11 @@
 	Libs/Intermediate/window_default.o \
 	Libs/Intermediate/window_generic.o
 
-Libs/libclanGUI.so: Libs/libclanCore.so $(OBJF_LIB_GUI)
-	@echo "Building Libs/libclanGUI.so"
-	@$(LINK_COMMAND) -Wl,-soname=libclanGUI.so.$(D_VERSION_MAJOR) -o Libs/libclanGUI.so.$(D_VERSION_MINOR) $(OBJF_LIB_GUI) -L Libs -lclanCore
-	@ln -s -f libclanGUI.so.$(D_VERSION_MINOR) Libs/libclanGUI.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanGUI.so.$(D_VERSION_MAJOR) Libs/libclanGUI.so	
+Libs/libclanGUI.dylib: Libs/libclanCore.dylib $(OBJF_LIB_GUI)
+	@echo "Building Libs/libclanGUI.dylib"
+	@$(LINK_COMMAND) -dynamiclib -install_name $(LIB_PREFIX)/libclanGUI.$(D_VERSION_MAJOR).dylib -compatibility_version $(D_VERSION_MAJOR) -current_version $(D_VERSION_MAJOR) -o Libs/libclanGUI.$(D_VERSION_MINOR).dylib $(OBJF_LIB_GUI) -LLibs -lclanCore -lclanDisplay -lclanApp
+	@ln -s -f libclanGUI.$(D_VERSION_MINOR).dylib Libs/libclanGUI.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanGUI.$(D_VERSION_MAJOR).dylib Libs/libclanGUI.dylib
 
 Libs/libclanGUI.a: $(OBJF_LIB_GUI)
 	@echo "Building Libs/libclanGUI.a"
diff -ruN ClanLib-0.5.4.orig/Setup/Unix/Makefile.jpeg.in ClanLib-0.5.4/Setup/Unix/Makefile.jpeg.in
--- ClanLib-0.5.4.orig/Setup/Unix/Makefile.jpeg.in	Mon Dec 24 09:12:59 2001
+++ ClanLib-0.5.4/Setup/Unix/Makefile.jpeg.in	Sat Feb 23 23:01:17 2002
@@ -2,28 +2,28 @@
 # Makefile data for clanJPEG library.
 #
 
-clanJPEG: Libs/libclanJPEG.so Libs/libclanJPEG.a
+clanJPEG: Libs/libclanJPEG.dylib Libs/libclanJPEG.a
 
 installJPEG: clanJPEG
 	@for i in `find Sources/API/JPEG -type d | grep -v CVS | sed "s/Sources\/API\///;"`; do install -d $(INC_PREFIX)/ClanLib/$$i; done
-	@for i in `find Sources/API/JPEG -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
-	@install -m 0644 Sources/API/jpeg.h $(INC_PREFIX)/ClanLib/jpeg.h
+	@for i in `find Sources/API/JPEG -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -c -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
+	@install -c -m 0644 Sources/API/jpeg.h $(INC_PREFIX)/ClanLib/jpeg.h
 	@install -d $(LIB_PREFIX)
-	@install Libs/libclanJPEG.so.$(D_VERSION_MINOR) $(LIB_PREFIX)
+	@install Libs/libclanJPEG.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)
 	@install Libs/libclanJPEG.a $(LIB_PREFIX)
-	@ln -s -f libclanJPEG.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanJPEG.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanJPEG.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanJPEG.so
+	@ln -s -f libclanJPEG.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)/libclanJPEG.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanJPEG.$(D_VERSION_MAJOR).dylib $(LIB_PREFIX)/libclanJPEG.dylib
 
 
 OBJF_LIB_JPEG = \
 	Libs/Intermediate/provider_jpeg.o \
 	Libs/Intermediate/provider_jpeg_generic.o
 
-Libs/libclanJPEG.so: Libs/libclanCore.so $(OBJF_LIB_JPEG)
-	@echo "Building Libs/libclanJPEG.so"
-	@$(LINK_COMMAND) -Wl,-soname=libclanJPEG.so.$(D_VERSION_MAJOR) -o Libs/libclanJPEG.so.$(D_VERSION_MINOR) $(OBJF_LIB_JPEG) -L Libs -lclanCore -ljpeg
-	@ln -s -f libclanJPEG.so.$(D_VERSION_MINOR) Libs/libclanJPEG.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanJPEG.so.$(D_VERSION_MAJOR) Libs/libclanJPEG.so
+Libs/libclanJPEG.dylib: Libs/libclanCore.dylib $(OBJF_LIB_JPEG)
+	@echo "Building Libs/libclanJPEG.dylib"
+	@$(LINK_COMMAND) -dynamiclib -install_name $(LIB_PREFIX)/libclanJPEG.$(D_VERSION_MAJOR).dylib -compatibility_version $(D_VERSION_MAJOR) -current_version $(D_VERSION_MAJOR) -o Libs/libclanJPEG.$(D_VERSION_MINOR).dylib $(OBJF_LIB_JPEG) -LLibs -lclanCore -lclanDisplay -lclanApp -ljpeg
+	@ln -s -f libclanJPEG.$(D_VERSION_MINOR).dylib Libs/libclanJPEG.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanJPEG.$(D_VERSION_MAJOR).dylib Libs/libclanJPEG.dylib
 
 Libs/libclanJPEG.a: $(OBJF_LIB_JPEG)
 	@echo "Building Libs/libclanJPEG.a"
diff -ruN ClanLib-0.5.4.orig/Setup/Unix/Makefile.lua.in ClanLib-0.5.4/Setup/Unix/Makefile.lua.in
--- ClanLib-0.5.4.orig/Setup/Unix/Makefile.lua.in	Mon Dec 24 09:12:59 2001
+++ ClanLib-0.5.4/Setup/Unix/Makefile.lua.in	Mon Mar 25 09:24:36 2002
@@ -2,26 +2,26 @@
 # Makefile data for clanLua library
 #
 
-clanLua: Libs/libclanLua.so Libs/libclanLua.a
+clanLua: Libs/libclanLua.dylib Libs/libclanLua.a
 
 installLua: clanLua
 	@for i in `find Sources/API/Lua -type d | grep -v CVS | sed "s/Sources\/API\///;"`; do install -d $(INC_PREFIX)/ClanLib/$$i; done
-	@for i in `find Sources/API/Lua -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
-	@install -m 0644 Sources/API/lua.h $(INC_PREFIX)/ClanLib/lua.h
+	@for i in `find Sources/API/Lua -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -c -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
+	@install -c -m 0644 Sources/API/lua.h $(INC_PREFIX)/ClanLib/lua.h
 	@install -d $(LIB_PREFIX)
-	@install Libs/libclanLua.so.$(D_VERSION_MINOR) $(LIB_PREFIX)
+	@install Libs/libclanLua.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)
 	@install Libs/libclanLua.a $(LIB_PREFIX)
-	@ln -s -f libclanLua.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanLua.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanLua.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanLua.so
+	@ln -s -f libclanLua.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)/libclanLua.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanLua.$(D_VERSION_MAJOR).dylib $(LIB_PREFIX)/libclanLua.dylib
 
 OBJF_LIB_LUA = \
 	Libs/Intermediate/clanbindings.o 
 
-Libs/libclanLua.so: Libs/libclanCore.so $(OBJF_LIB_LUA)
-	@echo "Building Libs/libclanLua.so"
-	@$(LINK_COMMAND) -Wl,-soname=libclanLua.so.$(D_VERSION_MAJOR) -o Libs/libclanLua.so.$(D_VERSION_MINOR) $(OBJF_LIB_LUA) -L Libs -lclanCore -llua -llualib -ltolua
-	@ln -s -f libclanLua.so.$(D_VERSION_MINOR) Libs/libclanLua.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanLua.so.$(D_VERSION_MAJOR) Libs/libclanLua.so
+Libs/libclanLua.dylib: Libs/libclanCore.dylib $(OBJF_LIB_LUA)
+	@echo "Building Libs/libclanLua.dylib"
+	@$(LINK_COMMAND) -dynamiclib -install_name $(LIB_PREFIX)/libclanLua.$(D_VERSION_MAJOR).dylib -compatibility_version $(D_VERSION_MAJOR) -current_version $(D_VERSION_MAJOR) -o Libs/libclanLua.$(D_VERSION_MINOR).dylib $(OBJF_LIB_LUA) -LLibs -lclanCore -lclanApp -lclanDisplay -llua -llualib -ltolua
+	@ln -s -f libclanLua.$(D_VERSION_MINOR).dylib Libs/libclanLua.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanLua.$(D_VERSION_MAJOR).dylib Libs/libclanLua.dylib
 
 Libs/libclanLua.a: $(OBJF_LIB_LUA)
 	@echo "Building Libs/libclanLua.a"
diff -ruN ClanLib-0.5.4.orig/Setup/Unix/Makefile.mikmod.in ClanLib-0.5.4/Setup/Unix/Makefile.mikmod.in
--- ClanLib-0.5.4.orig/Setup/Unix/Makefile.mikmod.in	Mon Dec 24 09:12:59 2001
+++ ClanLib-0.5.4/Setup/Unix/Makefile.mikmod.in	Thu Mar 21 22:38:46 2002
@@ -2,17 +2,17 @@
 # Makefile data for clanMikMod library.
 #
 
-clanMikMod: Libs/libclanMikMod.so Libs/libclanMikMod.a
+clanMikMod: Libs/libclanMikMod.dylib Libs/libclanMikMod.a
 
 installMikMod: clanMikMod
 	@for i in `find Sources/API/MikMod -type d | grep -v CVS | sed "s/Sources\/API\///;"`; do install -d $(INC_PREFIX)/ClanLib/$$i; done
-	@for i in `find Sources/API/MikMod -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
-	@install -m 0644 Sources/API/mikmod.h $(INC_PREFIX)/ClanLib/mikmod.h
+	@for i in `find Sources/API/MikMod -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -c -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
+	@install -c -m 0644 Sources/API/mikmod.h $(INC_PREFIX)/ClanLib/mikmod.h
 	@install -d $(LIB_PREFIX)
-	@install Libs/libclanMikMod.so.$(D_VERSION_MINOR) $(LIB_PREFIX)
+	@install Libs/libclanMikMod.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)
 	@install Libs/libclanMikMod.a $(LIB_PREFIX)
-	@ln -s -f libclanMikMod.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanMikMod.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanMikMod.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanMikMod.so
+	@ln -s -f libclanMikMod.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)/libclanMikMod.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanMikMod.$(D_VERSION_MAJOR).dylib $(LIB_PREFIX)/libclanMikMod.dylib
 
 OBJF_LIB_MIKMOD = \
 	Libs/Intermediate/resourcetype_module.o \
@@ -20,11 +20,11 @@
 	Libs/Intermediate/module_reader.o \
 	Libs/Intermediate/streamed_mikmod_sample.o
 
-Libs/libclanMikMod.so: Libs/libclanCore.so $(OBJF_LIB_MIKMOD)
-	@echo "Building Libs/libclanMikMod.so"
-	@$(LINK_COMMAND) -Wl,-soname=libclanMikMod.so.$(D_VERSION_MAJOR) -o Libs/libclanMikMod.so.$(D_VERSION_MINOR) $(OBJF_LIB_MIKMOD) -L Libs -lclanCore -lmikmod
-	@ln -s -f libclanMikMod.so.$(D_VERSION_MINOR) Libs/libclanMikMod.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanMikMod.so.$(D_VERSION_MAJOR) Libs/libclanMikMod.so
+Libs/libclanMikMod.dylib: Libs/libclanCore.dylib $(OBJF_LIB_MIKMOD)
+	@echo "Building Libs/libclanMikMod.dylib"
+	@$(LINK_COMMAND) -dynamiclib -install_name $(LIB_PREFIX)/libclanMikMod.$(D_VERSION_MAJOR).dylib -compatibility_version $(D_VERSION_MAJOR) -current_version $(D_VERSION_MAJOR) -o Libs/libclanMikMod.$(D_VERSION_MINOR).dylib $(OBJF_LIB_MIKMOD) -LLibs -lclanCore -lclanSound -lclanDisplay -lclanApp -lmikmod
+	@ln -s -f libclanMikMod.$(D_VERSION_MINOR).dylib Libs/libclanMikMod.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanMikMod.$(D_VERSION_MAJOR).dylib Libs/libclanMikMod.dylib
 
 Libs/libclanMikMod.a: $(OBJF_LIB_MIKMOD)
 	@echo "Building Libs/libclanMikMod.a"
diff -ruN ClanLib-0.5.4.orig/Setup/Unix/Makefile.mpeg.in ClanLib-0.5.4/Setup/Unix/Makefile.mpeg.in
--- ClanLib-0.5.4.orig/Setup/Unix/Makefile.mpeg.in	Mon Dec 24 09:12:59 2001
+++ ClanLib-0.5.4/Setup/Unix/Makefile.mpeg.in	Sat Feb 23 23:02:12 2002
@@ -2,26 +2,26 @@
 # Makefile data for clanMMPEG library.
 #
 
-clanMPEG: Libs/libclanMPEG.so Libs/libclanMPEG.a
+clanMPEG: Libs/libclanMPEG.dylib Libs/libclanMPEG.a
 
 installMPEG: clanMPEG
 	@for i in `find Sources/API/MPEG -type d | grep -v CVS | sed "s/Sources\/API\///;"`; do install -d $(INC_PREFIX)/ClanLib/$$i; done
-	@for i in `find Sources/API/MPEG -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
-	@install -m 0644 Sources/API/mpeg.h $(INC_PREFIX)/ClanLib/mpeg.h
+	@for i in `find Sources/API/MPEG -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -c -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
+	@install -c -m 0644 Sources/API/mpeg.h $(INC_PREFIX)/ClanLib/mpeg.h
 	@install -d $(LIB_PREFIX)
-	@install Libs/libclanMPEG.so.$(D_VERSION_MINOR) $(LIB_PREFIX)
+	@install Libs/libclanMPEG.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)
 	@install Libs/libclanMPEG.a $(LIB_PREFIX)
-	@ln -s -f libclanMPEG.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanMPEG.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanMPEG.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanMPEG.so
+	@ln -s -f libclanMPEG.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)/libclanMPEG.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanMPEG.$(D_VERSION_MAJOR).dylib $(LIB_PREFIX)/libclanMPEG.dylib
 
 OBJF_LIB_MPEG =	\
 	Libs/Intermediate/mpeg_soundprovider.o
 
-Libs/libclanMPEG.so: Libs/libclanCore.so $(OBJF_LIB_MPEG)
-	@echo "Building Libs/libclanMPEG.so"
-	@$(LINK_COMMAND) -Wl,-soname=libclanMPEG.so.$(D_VERSION_MAJOR) -o Libs/libclanMPEG.so.$(D_VERSION_MINOR) $(OBJF_LIB_MPEG) -L Libs -lclanCore 
-	@ln -s -f libclanMPEG.so.$(D_VERSION_MINOR) Libs/libclanMPEG.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanMPEG.so.$(D_VERSION_MAJOR) Libs/libclanMPEG.so
+Libs/libclanMPEG.dylib: Libs/libclanCore.dylib $(OBJF_LIB_MPEG)
+	@echo "Building Libs/libclanMPEG.dylib"
+	@$(LINK_COMMAND) -dynamiclib -install_name $(LIB_PREFIX)/libclanMPEG.$(D_VERSION_MAJOR).dylib -compatibility_version $(D_VERSION_MAJOR) -current_version $(D_VERSION_MAJOR) -o Libs/libclanMPEG.$(D_VERSION_MINOR).dylib $(OBJF_LIB_MPEG) -LLibs -lclanCore 
+	@ln -s -f libclanMPEG.$(D_VERSION_MINOR).dylib Libs/libclanMPEG.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanMPEG.$(D_VERSION_MAJOR).dylib Libs/libclanMPEG.dylib
 
 Libs/libclanMPEG.a: $(OBJF_LIB_MPEG)
 	@echo "Building Libs/libclanMPEG.a"
diff -ruN ClanLib-0.5.4.orig/Setup/Unix/Makefile.network.in ClanLib-0.5.4/Setup/Unix/Makefile.network.in
--- ClanLib-0.5.4.orig/Setup/Unix/Makefile.network.in	Mon Dec 24 09:12:59 2001
+++ ClanLib-0.5.4/Setup/Unix/Makefile.network.in	Sat Feb 23 23:02:30 2002
@@ -2,17 +2,17 @@
 # Makefile data for clanNetwork library.
 #
 
-clanNetwork: Libs/libclanNetwork.so Libs/libclanNetwork.a
+clanNetwork: Libs/libclanNetwork.dylib Libs/libclanNetwork.a
 
 installNetwork: clanNetwork
 	@for i in `find Sources/API/Network -type d | grep -v CVS | sed "s/Sources\/API\///;"`; do install -d $(INC_PREFIX)/ClanLib/$$i; done
-	@for i in `find Sources/API/Network -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
-	@install -m 0644 Sources/API/network.h $(INC_PREFIX)/ClanLib/network.h
+	@for i in `find Sources/API/Network -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -c -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
+	@install -c -m 0644 Sources/API/network.h $(INC_PREFIX)/ClanLib/network.h
 	@install -d $(LIB_PREFIX)
-	@install Libs/libclanNetwork.so.$(D_VERSION_MINOR) $(LIB_PREFIX)
+	@install Libs/libclanNetwork.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)
 	@install Libs/libclanNetwork.a $(LIB_PREFIX)
-	@ln -s -f libclanNetwork.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanNetwork.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanNetwork.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanNetwork.so
+	@ln -s -f libclanNetwork.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)/libclanNetwork.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanNetwork.$(D_VERSION_MAJOR).dylib $(LIB_PREFIX)/libclanNetwork.dylib
 
 OBJF_LIB_NETWORK = Libs/Intermediate/netcomputer.o \
 	Libs/Intermediate/browse_client.o \
@@ -50,11 +50,11 @@
 #	Libs/Intermediate/unix_pipe_connection.o 
 #	Libs/Intermediate/network_unix.o 
 
-Libs/libclanNetwork.so: Libs/libclanCore.so $(OBJF_LIB_NETWORK)
-	@echo "Building Libs/libclanNetwork.so"
-	@$(LINK_COMMAND) -Wl,-soname=libclanNetwork.so.$(D_VERSION_MAJOR) -o Libs/libclanNetwork.so.$(D_VERSION_MINOR) $(OBJF_LIB_NETWORK) -L Libs -lclanCore
-	@ln -s -f libclanNetwork.so.$(D_VERSION_MINOR) Libs/libclanNetwork.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanNetwork.so.$(D_VERSION_MAJOR) Libs/libclanNetwork.so
+Libs/libclanNetwork.dylib: Libs/libclanCore.dylib $(OBJF_LIB_NETWORK)
+	@echo "Building Libs/libclanNetwork.dylib"
+	@$(LINK_COMMAND) -dynamiclib -install_name $(LIB_PREFIX)/libclanNetwork.$(D_VERSION_MAJOR).dylib -compatibility_version $(D_VERSION_MAJOR) -current_version $(D_VERSION_MAJOR) -o Libs/libclanNetwork.$(D_VERSION_MINOR).dylib $(OBJF_LIB_NETWORK) -LLibs -lclanCore
+	@ln -s -f libclanNetwork.$(D_VERSION_MINOR).dylib Libs/libclanNetwork.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanNetwork.$(D_VERSION_MAJOR).dylib Libs/libclanNetwork.dylib
 
 Libs/libclanNetwork.a: $(OBJF_LIB_NETWORK)
 	@echo "Building Libs/libclanNetwork.a"
diff -ruN ClanLib-0.5.4.orig/Setup/Unix/Makefile.png.in ClanLib-0.5.4/Setup/Unix/Makefile.png.in
--- ClanLib-0.5.4.orig/Setup/Unix/Makefile.png.in	Thu Jan 10 13:17:13 2002
+++ ClanLib-0.5.4/Setup/Unix/Makefile.png.in	Sat Feb 23 23:02:48 2002
@@ -2,27 +2,27 @@
 # Makefile data for clanPNG library.
 #
 
-clanPNG: Libs/libclanPNG.so Libs/libclanPNG.a
+clanPNG: Libs/libclanPNG.dylib Libs/libclanPNG.a
 
 installPNG: clanPNG
 	@for i in `find Sources/API/PNG -type d | grep -v CVS | sed "s/Sources\/API\///;"`; do install -d $(INC_PREFIX)/ClanLib/$$i; done
-	@for i in `find Sources/API/PNG -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
-	@install -m 0644 Sources/API/png.h $(INC_PREFIX)/ClanLib/png.h
+	@for i in `find Sources/API/PNG -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -c -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
+	@install -c -m 0644 Sources/API/png.h $(INC_PREFIX)/ClanLib/png.h
 	@install -d $(LIB_PREFIX)
-	@install Libs/libclanPNG.so.$(D_VERSION_MINOR) $(LIB_PREFIX)
+	@install Libs/libclanPNG.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)
 	@install Libs/libclanPNG.a $(LIB_PREFIX)
-	@ln -s -f libclanPNG.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanPNG.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanPNG.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanPNG.so
+	@ln -s -f libclanPNG.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)/libclanPNG.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanPNG.$(D_VERSION_MAJOR).dylib $(LIB_PREFIX)/libclanPNG.dylib
 
 
 OBJF_LIB_PNG = \
 	Libs/Intermediate/provider_png.o
 
-Libs/libclanPNG.so: Libs/libclanCore.so $(OBJF_LIB_PNG)
-	@echo "Building Libs/libclanPNG.so"
-	@$(LINK_COMMAND) -Wl,-soname=libclanPNG.so.$(D_VERSION_MAJOR) -o Libs/libclanPNG.so.$(D_VERSION_MINOR) $(OBJF_LIB_PNG) -L Libs -lclanCore -lpng
-	@ln -s -f libclanPNG.so.$(D_VERSION_MINOR) Libs/libclanPNG.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanPNG.so.$(D_VERSION_MAJOR) Libs/libclanPNG.so
+Libs/libclanPNG.dylib: Libs/libclanCore.dylib $(OBJF_LIB_PNG)
+	@echo "Building Libs/libclanPNG.dylib"
+	@$(LINK_COMMAND) -dynamiclib -install_name $(LIB_PREFIX)/libclanPNG.$(D_VERSION_MAJOR).dylib -compatibility_version $(D_VERSION_MAJOR) -current_version $(D_VERSION_MAJOR) -o Libs/libclanPNG.$(D_VERSION_MINOR).dylib $(OBJF_LIB_PNG) -LLibs -lclanCore -lclanDisplay -lclanApp -lpng
+	@ln -s -f libclanPNG.$(D_VERSION_MINOR).dylib Libs/libclanPNG.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanPNG.$(D_VERSION_MAJOR).dylib Libs/libclanPNG.dylib
 
 Libs/libclanPNG.a: $(OBJF_LIB_PNG)
 	@echo "Building Libs/libclanPNG.a"
diff -ruN ClanLib-0.5.4.orig/Setup/Unix/Makefile.signals.in ClanLib-0.5.4/Setup/Unix/Makefile.signals.in
--- ClanLib-0.5.4.orig/Setup/Unix/Makefile.signals.in	Fri Mar 16 16:56:33 2001
+++ ClanLib-0.5.4/Setup/Unix/Makefile.signals.in	Sat Feb 23 22:58:25 2002
@@ -6,5 +6,5 @@
 
 installSignals: clanSignals
 	@for i in `find Sources/API/Signals -type d | grep -v CVS | sed "s/Sources\/API\///;"`; do install -d $(INC_PREFIX)/ClanLib/$$i; done
-	@for i in `find Sources/API/Signals -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
-	@install -m 0644 Sources/API/signals.h $(INC_PREFIX)/ClanLib/signals.h
+	@for i in `find Sources/API/Signals -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -c -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
+	@install -c -m 0644 Sources/API/signals.h $(INC_PREFIX)/ClanLib/signals.h
diff -ruN ClanLib-0.5.4.orig/Setup/Unix/Makefile.smalljpeg.in ClanLib-0.5.4/Setup/Unix/Makefile.smalljpeg.in
--- ClanLib-0.5.4.orig/Setup/Unix/Makefile.smalljpeg.in	Mon Dec 24 09:12:59 2001
+++ ClanLib-0.5.4/Setup/Unix/Makefile.smalljpeg.in	Sat Feb 23 23:03:13 2002
@@ -2,17 +2,17 @@
 # Makefile data for clanSmallJPEG library.
 #
 
-clanSmallJPEG: Libs/libclanSmallJPEG.so Libs/libclanSmallJPEG.a
+clanSmallJPEG: Libs/libclanSmallJPEG.dylib Libs/libclanSmallJPEG.a
 
 installSmallJPEG: clanSmallJPEG
 	@for i in `find Sources/API/SmallJPEG -type d | grep -v CVS | sed "s/Sources\/API\///;"`; do install -d $(INC_PREFIX)/ClanLib/$$i; done
-	@for i in `find Sources/API/SmallJPEG -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
-	@install -m 0644 Sources/API/jpeg.h $(INC_PREFIX)/ClanLib/jpeg.h
+	@for i in `find Sources/API/SmallJPEG -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -c -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
+	@install -c -m 0644 Sources/API/jpeg.h $(INC_PREFIX)/ClanLib/jpeg.h
 	@install -d $(LIB_PREFIX)
-	@install Libs/libclanSmallJPEG.so.$(D_VERSION_MINOR) $(LIB_PREFIX)
+	@install Libs/libclanSmallJPEG.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)
 	@install Libs/libclanSmallJPEG.a $(LIB_PREFIX)
-	@ln -s -f libclanSmallJPEG.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanSmallJPEG.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanSmallJPEG.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanSmallJPEG.so
+	@ln -s -f libclanSmallJPEG.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)/libclanSmallJPEG.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanSmallJPEG.$(D_VERSION_MAJOR).dylib $(LIB_PREFIX)/libclanSmallJPEG.dylib
 
 
 OBJF_LIB_SMALLJPEG = \
@@ -20,14 +20,14 @@
 	Libs/Intermediate/h2v2.o \
 	Libs/Intermediate/idct.o \
 	Libs/Intermediate/jidctfst.o \
-	Libs/Intermediate/jpegdecoder.o \
-	Libs/Intermediate/ifast.o
+	Libs/Intermediate/jpegdecoder.o 
+#	Libs/Intermediate/ifast.o
 
-Libs/libclanSmallJPEG.so: Libs/libclanCore.so Libs/libclanDisplay.so $(OBJF_LIB_SMALLJPEG)
-	@echo "Building Libs/libclanSmallJPEG.so"
-	@$(LINK_COMMAND) -Wl,-soname=libclanSmallJPEG.so.$(D_VERSION_MAJOR) -o Libs/libclanSmallJPEG.so.$(D_VERSION_MINOR) $(OBJF_LIB_SMALLJPEG) -L Libs -lclanCore -lclanDisplay
-	@ln -s -f libclanSmallJPEG.so.$(D_VERSION_MINOR) Libs/libclanSmallJPEG.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanSmallJPEG.so.$(D_VERSION_MAJOR) Libs/libclanSmallJPEG.so
+Libs/libclanSmallJPEG.dylib: Libs/libclanCore.dylib Libs/libclanDisplay.dylib $(OBJF_LIB_SMALLJPEG)
+	@echo "Building Libs/libclanSmallJPEG.dylib"
+	@$(LINK_COMMAND) -dynamiclib -install_name $(LIB_PREFIX)/libclanSmallJPEG.$(D_VERSION_MAJOR).dylib -compatibility_version $(D_VERSION_MAJOR) -current_version $(D_VERSION_MAJOR) -o Libs/libclanSmallJPEG.$(D_VERSION_MINOR).dylib $(OBJF_LIB_SMALLJPEG) -LLibs -lclanCore -lclanDisplay -lclanApp
+	@ln -s -f libclanSmallJPEG.$(D_VERSION_MINOR).dylib Libs/libclanSmallJPEG.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanSmallJPEG.$(D_VERSION_MAJOR).dylib Libs/libclanSmallJPEG.dylib
 
 Libs/libclanSmallJPEG.a: $(OBJF_LIB_SMALLJPEG)
 	@echo "Building Libs/libclanSmallJPEG.a"
diff -ruN ClanLib-0.5.4.orig/Setup/Unix/Makefile.sound.in ClanLib-0.5.4/Setup/Unix/Makefile.sound.in
--- ClanLib-0.5.4.orig/Setup/Unix/Makefile.sound.in	Mon Dec 24 09:12:59 2001
+++ ClanLib-0.5.4/Setup/Unix/Makefile.sound.in	Thu Mar 21 22:38:22 2002
@@ -1,17 +1,17 @@
 # Makefile data for clanSound library.
 #
 
-clanSound: Libs/libclanSound.so Libs/libclanSound.a
+clanSound: Libs/libclanSound.dylib Libs/libclanSound.a
 
 installSound: clanSound
 	@for i in `find Sources/API/Sound -type d | grep -v CVS | sed "s/Sources\/API\///;"`; do install -d $(INC_PREFIX)/ClanLib/$$i; done
-	@for i in `find Sources/API/Sound -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
-	@install -m 0644 Sources/API/sound.h $(INC_PREFIX)/ClanLib/sound.h
+	@for i in `find Sources/API/Sound -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -c -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
+	@install -c -m 0644 Sources/API/sound.h $(INC_PREFIX)/ClanLib/sound.h
 	@install -d $(LIB_PREFIX)
-	@install Libs/libclanSound.so.$(D_VERSION_MINOR) $(LIB_PREFIX)
+	@install Libs/libclanSound.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)
 	@install Libs/libclanSound.a $(LIB_PREFIX)
-	@ln -s -f libclanSound.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanSound.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanSound.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanSound.so
+	@ln -s -f libclanSound.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)/libclanSound.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanSound.$(D_VERSION_MAJOR).dylib $(LIB_PREFIX)/libclanSound.dylib
 
 OBJF_SOUND_GENERIC = \
 	Libs/Intermediate/sound.o \
@@ -42,18 +42,18 @@
 	Libs/Intermediate/cardplayback_clan.o \
 	Libs/Intermediate/mixer.o \
 	Libs/Intermediate/oss.o \
-	Libs/Intermediate/cdaudio_linux.o
+#	Libs/Intermediate/cdaudio_linux.o
 
 OBJF_SOUND_INTEL_ASM = \
 	Libs/Intermediate/mixer_asm.o
 
 OBJF_SOUND_ALL = $(OBJF_SOUND_GENERIC) $(OBJF_SOUND_CLANSOUND) @sound_assembly@
 
-Libs/libclanSound.so: Libs/libclanCore.so $(OBJF_SOUND_ALL)
-	@echo "Building Libs/libclanSound.so"
-	@$(LINK_COMMAND) -Wl,-soname=libclanSound.so.$(D_VERSION_MAJOR) -o Libs/libclanSound.so.$(D_VERSION_MINOR) $(OBJF_SOUND_ALL) -L Libs -lclanCore
-	@ln -s -f libclanSound.so.$(D_VERSION_MINOR) Libs/libclanSound.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanSound.so.$(D_VERSION_MAJOR) Libs/libclanSound.so
+Libs/libclanSound.dylib: Libs/libclanCore.dylib $(OBJF_SOUND_ALL)
+	@echo "Building Libs/libclanSound.dylib"
+	@$(LINK_COMMAND) -dynamiclib -install_name $(LIB_PREFIX)/libclanSound.$(D_VERSION_MAJOR).dylib -compatibility_version $(D_VERSION_MAJOR) -current_version $(D_VERSION_MAJOR) -o Libs/libclanSound.$(D_VERSION_MINOR).dylib $(OBJF_SOUND_ALL) -LLibs -lclanCore -lesd
+	@ln -s -f libclanSound.$(D_VERSION_MINOR).dylib Libs/libclanSound.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanSound.$(D_VERSION_MAJOR).dylib Libs/libclanSound.dylib
 
 Libs/libclanSound.a: $(OBJF_SOUND_ALL)
 	@echo "Building Libs/libclanSound.a"
diff -ruN ClanLib-0.5.4.orig/Setup/Unix/Makefile.ttf.in ClanLib-0.5.4/Setup/Unix/Makefile.ttf.in
--- ClanLib-0.5.4.orig/Setup/Unix/Makefile.ttf.in	Mon Dec 24 09:12:59 2001
+++ ClanLib-0.5.4/Setup/Unix/Makefile.ttf.in	Sat Feb 23 23:04:09 2002
@@ -2,17 +2,17 @@
 # Makefile data for clanTTF library.
 #
 
-clanTTF: Libs/libclanTTF.so Libs/libclanTTF.a
+clanTTF: Libs/libclanTTF.dylib Libs/libclanTTF.a
 
 installTTF: clanTTF
 	@for i in `find Sources/API/TTF -type d | grep -v CVS | sed "s/Sources\/API\///;"`; do install -d $(INC_PREFIX)/ClanLib/$$i; done
-	@for i in `find Sources/API/TTF -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
-	@install -m 0644 Sources/API/ttf.h $(INC_PREFIX)/ClanLib/ttf.h
+	@for i in `find Sources/API/TTF -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -c -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
+	@install -c -m 0644 Sources/API/ttf.h $(INC_PREFIX)/ClanLib/ttf.h
 	@install -d $(LIB_PREFIX)
-	@install Libs/libclanTTF.so.$(D_VERSION_MINOR) $(LIB_PREFIX)
+	@install Libs/libclanTTF.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)
 	@install Libs/libclanTTF.a $(LIB_PREFIX)
-	@ln -s -f libclanTTF.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanTTF.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanTTF.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanTTF.so
+	@ln -s -f libclanTTF.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)/libclanTTF.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanTTF.$(D_VERSION_MAJOR).dylib $(LIB_PREFIX)/libclanTTF.dylib
 
 
 OBJF_LIB_TTF = \
@@ -20,11 +20,11 @@
 	Libs/Intermediate/resourcetype_ttf.o \
 	Libs/Intermediate/setupttf.o
 
-Libs/libclanTTF.so: Libs/libclanCore.so $(OBJF_LIB_TTF)
-	@echo "Building Libs/libclanTTF.so"
-	@$(LINK_COMMAND) -Wl,-soname=libclanTTF.so.$(D_VERSION_MAJOR) -o Libs/libclanTTF.so.$(D_VERSION_MINOR) $(OBJF_LIB_TTF) -L Libs -lclanCore -lfreetype
-	@ln -s -f libclanTTF.so.$(D_VERSION_MINOR) Libs/libclanTTF.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanTTF.so.$(D_VERSION_MAJOR) Libs/libclanTTF.so
+Libs/libclanTTF.dylib: Libs/libclanCore.dylib $(OBJF_LIB_TTF)
+	@echo "Building Libs/libclanTTF.dylib"
+	@$(LINK_COMMAND) -dynamiclib -install_name $(LIB_PREFIX)/libclanTTF.$(D_VERSION_MAJOR).dylib -compatibility_version $(D_VERSION_MAJOR) -current_version $(D_VERSION_MAJOR) -o Libs/libclanTTF.$(D_VERSION_MINOR).dylib $(OBJF_LIB_TTF) -LLibs -lclanCore -lclanDisplay -lclanApp -lfreetype
+	@ln -s -f libclanTTF.$(D_VERSION_MINOR).dylib Libs/libclanTTF.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanTTF.$(D_VERSION_MAJOR).dylib Libs/libclanTTF.dylib
 
 Libs/libclanTTF.a: $(OBJF_LIB_TTF)
 	@echo "Building Libs/libclanTTF.a"
diff -ruN ClanLib-0.5.4.orig/Setup/Unix/Makefile.vorbis.in ClanLib-0.5.4/Setup/Unix/Makefile.vorbis.in
--- ClanLib-0.5.4.orig/Setup/Unix/Makefile.vorbis.in	Mon Dec 24 09:12:59 2001
+++ ClanLib-0.5.4/Setup/Unix/Makefile.vorbis.in	Sat Feb 23 23:04:23 2002
@@ -2,27 +2,27 @@
 # Makefile data for clanVorbis library.
 #
 
-clanVorbis: Libs/libclanVorbis.so Libs/libclanVorbis.a
+clanVorbis: Libs/libclanVorbis.dylib Libs/libclanVorbis.a
 
 installVorbis: clanVorbis
 	@for i in `find Sources/API/Vorbis -type d | grep -v CVS | sed "s/Sources\/API\///;"`; do install -d $(INC_PREFIX)/ClanLib/$$i; done
-	@for i in `find Sources/API/Vorbis -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
-	@install -m 0644 Sources/API/vorbis.h $(INC_PREFIX)/ClanLib/vorbis.h
+	@for i in `find Sources/API/Vorbis -type f | grep -v CVS | sed "s/Sources\/API\///;"`; do install -c -m 0644 Sources/API/$$i $(INC_PREFIX)/ClanLib/$$i; done
+	@install -c -m 0644 Sources/API/vorbis.h $(INC_PREFIX)/ClanLib/vorbis.h
 	@install -d $(LIB_PREFIX)
-	@install Libs/libclanVorbis.so.$(D_VERSION_MINOR) $(LIB_PREFIX)
+	@install Libs/libclanVorbis.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)
 	@install Libs/libclanVorbis.a $(LIB_PREFIX)
-	@ln -s -f libclanVorbis.so.$(D_VERSION_MINOR) $(LIB_PREFIX)/libclanVorbis.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanVorbis.so.$(D_VERSION_MAJOR) $(LIB_PREFIX)/libclanVorbis.so
+	@ln -s -f libclanVorbis.$(D_VERSION_MINOR).dylib $(LIB_PREFIX)/libclanVorbis.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanVorbis.$(D_VERSION_MAJOR).dylib $(LIB_PREFIX)/libclanVorbis.dylib
 
 OBJF_LIB_VORBIS = \
 	Libs/Intermediate/vorbis_soundprovider_generic.o \
 	Libs/Intermediate/vorbis_setup.o
 
-Libs/libclanVorbis.so: Libs/libclanCore.so $(OBJF_LIB_VORBIS)
-	@echo "Building Libs/libclanVorbis.so"
-	@$(LINK_COMMAND) -Wl,-soname=libclanVorbis.so.$(D_VERSION_MAJOR) -o Libs/libclanVorbis.so.$(D_VERSION_MINOR) $(OBJF_LIB_VORBIS) -L Libs -lclanCore -lvorbis
-	@ln -s -f libclanVorbis.so.$(D_VERSION_MINOR) Libs/libclanVorbis.so.$(D_VERSION_MAJOR)
-	@ln -s -f libclanVorbis.so.$(D_VERSION_MAJOR) Libs/libclanVorbis.so	
+Libs/libclanVorbis.dylib: Libs/libclanCore.dylib $(OBJF_LIB_VORBIS)
+	@echo "Building Libs/libclanVorbis.dylib"
+	@$(LINK_COMMAND) -dynamiclib -install_name $(LIB_PREFIX)/libclanVorbis.$(D_VERSION_MAJOR).dylib -compatibility_version $(D_VERSION_MAJOR) -current_version $(D_VERSION_MAJOR) -o Libs/libclanVorbis.$(D_VERSION_MINOR).dylib $(OBJF_LIB_VORBIS) -LLibs -lclanCore -lvorbis -logg
+	@ln -s -f libclanVorbis.$(D_VERSION_MINOR).dylib Libs/libclanVorbis.$(D_VERSION_MAJOR).dylib
+	@ln -s -f libclanVorbis.$(D_VERSION_MAJOR).dylib Libs/libclanVorbis.dylib	
 
 Libs/libclanVorbis.a: $(OBJF_LIB_VORBIS)
 	@echo "Building Libs/libclanVorbis.a"
diff -ruN ClanLib-0.5.4.orig/Sources/API/Core/System/clanstring.h ClanLib-0.5.4/Sources/API/Core/System/clanstring.h
--- ClanLib-0.5.4.orig/Sources/API/Core/System/clanstring.h	Thu Nov  1 19:24:08 2001
+++ ClanLib-0.5.4/Sources/API/Core/System/clanstring.h	Thu Mar 21 22:23:03 2002
@@ -39,9 +39,9 @@
 #include <extras.h>
 #endif
 
-#ifdef __MACOS__
+#ifdef __DARWIN__
 #include <cctype>
 #define NEED_FCVT
 #endif
 
 
@@ -461,9 +461,9 @@
 
 #ifdef WIN32
 #ifdef __BORLANDC__
-		if (stricmp(str.c_str(), other)==0) return true;
+		if (strcasecmp(str.c_str(), other)==0) return true;
 #else
-		if (_stricmp(str.c_str(), other)==0) return true;
+		if (_strcasecmp(str.c_str(), other)==0) return true;
 #endif
 #else
 		if (strcasecmp(str.c_str(), other)==0) return true;
diff -ruN ClanLib-0.5.4.orig/Sources/Core/IOData/Unix/directory_scanner_unix.cpp ClanLib-0.5.4/Sources/Core/IOData/Unix/directory_scanner_unix.cpp
--- ClanLib-0.5.4.orig/Sources/Core/IOData/Unix/directory_scanner_unix.cpp	Thu Jan 10 03:23:30 2002
+++ ClanLib-0.5.4/Sources/Core/IOData/Unix/directory_scanner_unix.cpp	Tue Feb 19 20:54:56 2002
@@ -15,7 +15,7 @@
 
 #include <API/Core/System/error.h>
 #include <iostream>
-#include <libgen.h>
+/*#include <libgen.h>*/
 #include <fnmatch.h>
 #include "directory_scanner_unix.h"
 
diff -ruN ClanLib-0.5.4.orig/Sources/Core/Math/vector2.cpp ClanLib-0.5.4/Sources/Core/Math/vector2.cpp
--- ClanLib-0.5.4.orig/Sources/Core/Math/vector2.cpp	Sat Sep 15 08:54:51 2001
+++ ClanLib-0.5.4/Sources/Core/Math/vector2.cpp	Wed Feb 20 16:53:51 2002
@@ -254,7 +254,7 @@
 
 float CL_Vector2::length() const
 {
-    return sqrtf(x*x +y*y);
+    return sqrt(x*x +y*y);
 }
 
 CL_Vector2 CL_Vector2::cross() const
diff -ruN ClanLib-0.5.4.orig/Sources/Core/System/Unix/appconf.cpp ClanLib-0.5.4/Sources/Core/System/Unix/appconf.cpp
--- ClanLib-0.5.4.orig/Sources/Core/System/Unix/appconf.cpp	Tue Jul  3 03:02:01 2001
+++ ClanLib-0.5.4/Sources/Core/System/Unix/appconf.cpp	Tue Feb 19 16:54:57 2002
@@ -170,9 +170,9 @@
 #   define  StrCmp(s1,s2)  strcasecmp((s1),(s2))
 # else
 #   ifdef _MSC_VER
-#     define  StrCmp(s1,s2)  _stricmp((s1),(s2))
+#     define  StrCmp(s1,s2)  _strcasecmp((s1),(s2))
 #   else
-#     error "Please define 'stricmp' function for your compiler."
+#     error "Please define 'strcasecmp' function for your compiler."
 #   endif // compilers
 # endif   // strcasecmp/strcimp
 #endif
diff -ruN ClanLib-0.5.4.orig/Sources/Core/System/Unix/mutex_pthread.cpp ClanLib-0.5.4/Sources/Core/System/Unix/mutex_pthread.cpp
--- ClanLib-0.5.4.orig/Sources/Core/System/Unix/mutex_pthread.cpp	Mon May  7 11:10:12 2001
+++ ClanLib-0.5.4/Sources/Core/System/Unix/mutex_pthread.cpp	Tue Feb 19 17:32:18 2002
@@ -36,11 +36,11 @@
 {
 	pthread_mutexattr_t attr;
 	pthread_mutexattr_init(&attr);
-#ifdef __FreeBSD__
+/*#ifdef __FreeBSD__
 	pthread_mutexattr_setkind_np(&attr, PTHREAD_MUTEX_RECURSIVE);
 #else
 	pthread_mutexattr_setkind_np(&attr, PTHREAD_MUTEX_RECURSIVE_NP);
-#endif
+#endif*/
 	pthread_mutex_init(&impl->mutex, &attr);
 	pthread_mutexattr_destroy(&attr);
 
diff -ruN ClanLib-0.5.4.orig/Sources/Network/Generic/browse_client_generic.cpp ClanLib-0.5.4/Sources/Network/Generic/browse_client_generic.cpp
--- ClanLib-0.5.4.orig/Sources/Network/Generic/browse_client_generic.cpp	Sun Oct 14 12:05:07 2001
+++ ClanLib-0.5.4/Sources/Network/Generic/browse_client_generic.cpp	Sat Feb 23 14:45:26 2002
@@ -12,6 +12,10 @@
 	------------------------------------------------------------------------
 */
 
+#ifdef __DARWIN__
+#include <sys/types.h>
+#endif
+
 #ifdef WIN32
 #pragma warning (disable:4786)
 #pragma warning (disable:4355)
diff -ruN ClanLib-0.5.4.orig/Sources/Network/Generic/network_delivery_socket.h ClanLib-0.5.4/Sources/Network/Generic/network_delivery_socket.h
--- ClanLib-0.5.4.orig/Sources/Network/Generic/network_delivery_socket.h	Thu Nov  1 13:27:57 2001
+++ ClanLib-0.5.4/Sources/Network/Generic/network_delivery_socket.h	Sat Feb 23 14:46:26 2002
@@ -18,6 +18,10 @@
 #ifndef header_network_delivery_socket
 #define header_network_delivery_socket
 
+#ifdef __DARWIN__
+	typedef int socklen_t;
+#endif
+
 #ifdef WIN32
 	#include <windows.h>
 #else
diff -ruN ClanLib-0.5.4.orig/Sources/Network/Generic/socket_generic.h ClanLib-0.5.4/Sources/Network/Generic/socket_generic.h
--- ClanLib-0.5.4.orig/Sources/Network/Generic/socket_generic.h	Wed Nov 21 17:43:11 2001
+++ ClanLib-0.5.4/Sources/Network/Generic/socket_generic.h	Sat Feb 23 14:48:00 2002
@@ -15,6 +15,10 @@
 #ifndef socket_generic
 #define socket_generic
 
+#ifdef __DARWIN__
+	typedef int socklen_t;
+#endif
+
 #include "API/Core/System/keep_alive.h"
 #include "API/Network/socket.h"
 #include "event_trigger_socket.h"
diff -ruN ClanLib-0.5.4.orig/Sources/Sound/Sound/ClanSound/oss.cpp ClanLib-0.5.4/Sources/Sound/Sound/ClanSound/oss.cpp
--- ClanLib-0.5.4.orig/Sources/Sound/Sound/ClanSound/oss.cpp	Sat Sep  8 13:24:21 2001
+++ ClanLib-0.5.4/Sources/Sound/Sound/ClanSound/oss.cpp	Fri Feb 22 20:54:55 2002
@@ -14,7 +14,11 @@
 #include <unistd.h>
 #include <fcntl.h>
 #include <sys/ioctl.h>
-#include <sys/soundcard.h>
+#ifndef __DARWIN__
+    #include <sys/soundcard.h>
+#else
+	#include <esd.h>
+#endif
 #include <iostream>
 
 #include <API/Core/System/error.h>
@@ -31,13 +35,14 @@
 
 CL_CSOutput::CL_CSOutput()
 {
+#ifndef __DARWIN__
 	dev_dsp_fd = open("/dev/dsp", O_WRONLY|O_NONBLOCK);
 	if (dev_dsp_fd == -1)
 	{
 		has_sound = false;
 		frag_size = 22050/2;
 		return;
-//		throw CL_Error("Could not open /dev/dsp. No sound will be available.");
+		throw CL_Error("Could not open /dev/dsp. No sound will be available.");
 	}
 	fcntl(dev_dsp_fd, F_SETFL, fcntl(dev_dsp_fd, F_GETFL) &~ O_NONBLOCK);
 	
@@ -89,6 +94,24 @@
 
 	audio_buf_info info;
 	ioctl(dev_dsp_fd, SNDCTL_DSP_GETOSPACE, &info);
+#else // defined(__DARWIN__)
+	esd_format_t format = ESD_STREAM | ESD_PLAY | ESD_BITS16 | ESD_STEREO;
+	int rate = 22050;
+	int esd;
+	
+	dev_dsp_fd = -1;
+	
+	esd = esd_open_sound(NULL);
+	if (esd < 0) {
+		has_sound = false;
+		return;
+	} else {
+		esd_close(esd);
+	}
+		
+	frag_size = 22050/2; // 0.25 sec mixing buffer used.
+	dev_dsp_fd = esd_play_stream(format, rate, NULL, "clanlib");
+#endif // defined(__DARWIN__)
 }
 
 CL_CSOutput::~CL_CSOutput()
@@ -100,12 +123,15 @@
 // Called when we have no samples to play - and wants to tell the soundcard
 // about this possible event.
 {
+#ifndef __DARWIN__
 	ioctl(dev_dsp_fd, SNDCTL_DSP_POST, 0);
+#endif
 }
 
 bool CL_CSOutput::is_full()
 // Returns true if all fragments are filled with data.
 {
+#ifndef __DARWIN__
 	if (!has_sound) return false;
 	audio_buf_info info;
 	int err = ioctl(dev_dsp_fd, SNDCTL_DSP_GETOSPACE, &info);
@@ -117,6 +143,9 @@
 
 	if (info.fragments == 0) return true;
 	return false;
+#else
+	return false;
+#endif
 }
 
 int CL_CSOutput::get_frag_size()
diff -ruN ClanLib-0.5.4.orig/Sources/Sound/System/Unix/implementation_clansound.cpp ClanLib-0.5.4/Sources/Sound/System/Unix/implementation_clansound.cpp
--- ClanLib-0.5.4.orig/Sources/Sound/System/Unix/implementation_clansound.cpp	Sat Apr 28 06:04:36 2001
+++ ClanLib-0.5.4/Sources/Sound/System/Unix/implementation_clansound.cpp	Fri Feb 22 21:15:35 2002
@@ -52,7 +52,9 @@
 	try
 	{
 		CL_Sound::cards.push_back(new CL_SoundCard_ClanSound);
-		CL_CDDrive_Linux::init_cdaudio();
+		#ifndef __DARWIN__
+			CL_CDDrive_Linux::init_cdaudio();
+		#endif
 	}
 	catch (CL_Error error)
 	{
diff -ruN ClanLib-0.5.4.orig/Sources/Sound/System/Unix/setupsound_unix.cpp ClanLib-0.5.4/Sources/Sound/System/Unix/setupsound_unix.cpp
--- ClanLib-0.5.4.orig/Sources/Sound/System/Unix/setupsound_unix.cpp	Tue Jan 22 03:14:04 2002
+++ ClanLib-0.5.4/Sources/Sound/System/Unix/setupsound_unix.cpp	Fri Feb 22 22:09:20 2002
@@ -52,7 +52,9 @@
 {
 	if (register_resources_only) return;
 
-	CL_CDDrive_Linux::init_cdaudio();
+	#ifndef __DARWIN__
+		CL_CDDrive_Linux::init_cdaudio();
+	#endif
 }
 
 void CL_SetupCDAudio::deinit()
diff -ruN ClanLib-0.5.4.orig/Sources/TTF/font_ttf.cpp ClanLib-0.5.4/Sources/TTF/font_ttf.cpp
--- ClanLib-0.5.4.orig/Sources/TTF/font_ttf.cpp	Tue Jan 15 09:18:48 2002
+++ ClanLib-0.5.4/Sources/TTF/font_ttf.cpp	Sat Feb 23 21:01:51 2002
@@ -18,7 +18,11 @@
 #include <API/Display/SurfaceProviders/canvas.h>
 #include <API/Display/Display/surface.h>
 #include <API/Display/Font/font.h>
-#include <malloc.h>
+
+#ifndef __DARWIN__
+	#include <malloc.h>
+#endif
+
 #include "Display/Font/font_generic.h"
 
 #include <freetype/freetype.h>
diff -ruN ClanLib-0.5.4.orig/configure ClanLib-0.5.4/configure
--- ClanLib-0.5.4.orig/configure	Tue Jan 22 03:42:39 2002
+++ ClanLib-0.5.4/configure	Mon Mar 25 14:56:10 2002
@@ -794,7 +794,7 @@
   fi
 fi
 
-for ac_prog in $CCC c++ g++ gcc CC cxx cc++ cl
+for ac_prog in $CCC c++ CC cxx cc++ cl
 do
 # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
@@ -836,8 +836,8 @@
 ac_ext=C
 # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
 ac_cpp='$CXXCPP $CPPFLAGS'
-ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
-ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+ac_compile='${CXX-c++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
+ac_link='${CXX-c++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
 cross_compiling=$ac_cv_prog_cxx_cross
 
 cat > conftest.$ac_ext << EOF
@@ -887,7 +887,7 @@
   yes;
 #endif
 EOF
-if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:891: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
+if { ac_try='${CXX-c++} -E conftest.C'; { (eval echo configure:891: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
   ac_cv_prog_gxx=yes
 else
   ac_cv_prog_gxx=no
@@ -905,13 +905,13 @@
 ac_test_CXXFLAGS="${CXXFLAGS+set}"
 ac_save_CXXFLAGS="$CXXFLAGS"
 CXXFLAGS=
-echo $ac_n "checking whether ${CXX-g++} accepts -g""... $ac_c" 1>&6
-echo "configure:910: checking whether ${CXX-g++} accepts -g" >&5
+echo $ac_n "checking whether ${CXX-c++} accepts -g""... $ac_c" 1>&6
+echo "configure:910: checking whether ${CXX-c++} accepts -g" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_cxx_g'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   echo 'void f(){}' > conftest.cc
-if test -z "`${CXX-g++} -g -c conftest.cc 2>&1`"; then
+if test -z "`${CXX-c++} -g -c conftest.cc 2>&1`"; then
   ac_cv_prog_cxx_g=yes
 else
   ac_cv_prog_cxx_g=no
@@ -949,7 +949,7 @@
 else
     # This must be in double quotes, not single quotes, because CPP may get
   # substituted into the Makefile and "${CC-cc}" will confuse make.
-  CPP="${CC-cc} -E"
+  CPP="cpp"
   # On the NeXT, cc -E runs the code through the compiler's parser,
   # not just through cpp.
   cat > conftest.$ac_ext <<EOF
@@ -968,7 +968,7 @@
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  CPP="${CC-cc} -E -traditional-cpp"
+  CPP="${CC-cc} -E -no-cpp-precomp"
   cat > conftest.$ac_ext <<EOF
 #line 974 "configure"
 #include "confdefs.h"
@@ -1050,8 +1050,8 @@
 ac_ext=C
 # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
 ac_cpp='$CXXCPP $CPPFLAGS'
-ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
-ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+ac_compile='${CXX-c++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
+ac_link='${CXX-c++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
 cross_compiling=$ac_cv_prog_cxx_cross
 
 echo $ac_n "checking how to run the C++ preprocessor""... $ac_c" 1>&6
@@ -1063,10 +1063,10 @@
   ac_ext=C
 # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
 ac_cpp='$CXXCPP $CPPFLAGS'
-ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
-ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+ac_compile='${CXX-c++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
+ac_link='${CXX-c++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
 cross_compiling=$ac_cv_prog_cxx_cross
-  CXXCPP="${CXX-g++} -E"
+  CXXCPP="${CXX-c++} -E"
   cat > conftest.$ac_ext <<EOF
 #line 1072 "configure"
 #include "confdefs.h"
@@ -1089,8 +1089,8 @@
 ac_ext=C
 # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
 ac_cpp='$CXXCPP $CPPFLAGS'
-ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
-ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+ac_compile='${CXX-c++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
+ac_link='${CXX-c++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
 cross_compiling=$ac_cv_prog_cxx_cross
 fi
 fi
@@ -1373,11 +1373,11 @@
 if test "$no_x" != "yes"; then
 	X11=enabled
 	if test "$x_includes" != ""; then
-		x_includes="-I $x_includes -I $x_includes/X11"
+		x_includes="-I$x_includes -I$x_includes/X11"
 	fi
 
 	if test "$x_libraries" != ""; then
-		x_libraries="-L $x_libraries"
+		x_libraries="-L$x_libraries"
 	fi
 
 	x_libraries="$x_libraries -lX11 -lXext"
@@ -1475,14 +1475,14 @@
     CPPFLAGS="$CPPFLAGS $x_includes"
   fi
   if test "x$x_libraries" != xNONE; then
-    CPPFLAGS="$CPPFLAGS $x_libraries"
+    CPPFLAGS="$CPPFLAGS" # $x_libraries"
   fi
   if test "x$extra_includes" != xNONE; then
 
 	CPPFLAGS="$CPPFLAGS $extra_includes"
   fi
   if test "x$extra_libraries" != xNONE; then
-    CPPFLAGS="$CPPFLAGS $extra_libraries"
+    CPPFLAGS="$CPPFLAGS" # $extra_libraries"
   fi
 
   OLDLIBS="$LIBS"
@@ -1576,14 +1576,14 @@
     CPPFLAGS="$CPPFLAGS $x_includes"
   fi
   if test "x$x_libraries" != xNONE; then
-    CPPFLAGS="$CPPFLAGS $x_libraries"
+    CPPFLAGS="$CPPFLAGS" # $x_libraries"
   fi
   if test "x$extra_includes" != xNONE; then
 
 	CPPFLAGS="$CPPFLAGS $extra_includes"
   fi
   if test "x$extra_libraries" != xNONE; then
-    CPPFLAGS="$CPPFLAGS $extra_libraries"
+    CPPFLAGS="$CPPFLAGS" # $extra_libraries"
   fi
 
   OLDLIBS="$LIBS"
@@ -1631,14 +1631,14 @@
     CPPFLAGS="$CPPFLAGS $x_includes"
   fi
   if test "x$x_libraries" != xNONE; then
-    CPPFLAGS="$CPPFLAGS $x_libraries"
+    CPPFLAGS="$CPPFLAGS" # $x_libraries"
   fi
   if test "x$extra_includes" != xNONE; then
 
 	CPPFLAGS="$CPPFLAGS $extra_includes"
   fi
   if test "x$extra_libraries" != xNONE; then
-    CPPFLAGS="$CPPFLAGS $extra_libraries"
+    CPPFLAGS="$CPPFLAGS" # $extra_libraries"
   fi
 
   OLDLIBS="$LIBS"
@@ -1684,14 +1684,14 @@
     CPPFLAGS="$CPPFLAGS $x_includes"
   fi
   if test "x$x_libraries" != xNONE; then
-    CPPFLAGS="$CPPFLAGS $x_libraries"
+    CPPFLAGS="$CPPFLAGS" # $x_libraries"
   fi
   if test "x$extra_includes" != xNONE; then
 
 	CPPFLAGS="$CPPFLAGS $extra_includes"
   fi
   if test "x$extra_libraries" != xNONE; then
-    CPPFLAGS="$CPPFLAGS $extra_libraries"
+    CPPFLAGS="$CPPFLAGS" # $extra_libraries"
   fi
 
   OLDLIBS="$LIBS"
@@ -1737,14 +1737,14 @@
     CPPFLAGS="$CPPFLAGS $x_includes"
   fi
   if test "x$x_libraries" != xNONE; then
-    CPPFLAGS="$CPPFLAGS $x_libraries"
+    CPPFLAGS="$CPPFLAGS" # $x_libraries"
   fi
   if test "x$extra_includes" != xNONE; then
 
 	CPPFLAGS="$CPPFLAGS $extra_includes"
   fi
   if test "x$extra_libraries" != xNONE; then
-    CPPFLAGS="$CPPFLAGS $extra_libraries"
+    CPPFLAGS="$CPPFLAGS" # $extra_libraries"
   fi
 
   OLDLIBS="$LIBS"
@@ -1790,14 +1790,14 @@
     CPPFLAGS="$CPPFLAGS $x_includes"
   fi
   if test "x$x_libraries" != xNONE; then
-    CPPFLAGS="$CPPFLAGS $x_libraries"
+    CPPFLAGS="$CPPFLAGS" # $x_libraries"
   fi
   if test "x$extra_includes" != xNONE; then
 
 	CPPFLAGS="$CPPFLAGS $extra_includes"
   fi
   if test "x$extra_libraries" != xNONE; then
-    CPPFLAGS="$CPPFLAGS $extra_libraries"
+    CPPFLAGS="$CPPFLAGS" # $extra_libraries"
   fi
 
   OLDLIBS="$LIBS"
@@ -1843,14 +1843,14 @@
     CPPFLAGS="$CPPFLAGS $x_includes"
   fi
   if test "x$x_libraries" != xNONE; then
-    CPPFLAGS="$CPPFLAGS $x_libraries"
+    CPPFLAGS="$CPPFLAGS" # $x_libraries"
   fi
   if test "x$extra_includes" != xNONE; then
 
 	CPPFLAGS="$CPPFLAGS $extra_includes"
   fi
   if test "x$extra_libraries" != xNONE; then
-    CPPFLAGS="$CPPFLAGS $extra_libraries"
+    CPPFLAGS="$CPPFLAGS" # $extra_libraries"
   fi
 
   OLDLIBS="$LIBS"
@@ -1896,14 +1896,14 @@
     CPPFLAGS="$CPPFLAGS $x_includes"
   fi
   if test "x$x_libraries" != xNONE; then
-    CPPFLAGS="$CPPFLAGS $x_libraries"
+    CPPFLAGS="$CPPFLAGS" # $x_libraries"
   fi
   if test "x$extra_includes" != xNONE; then
 
 	CPPFLAGS="$CPPFLAGS $extra_includes"
   fi
   if test "x$extra_libraries" != xNONE; then
-    CPPFLAGS="$CPPFLAGS $extra_libraries"
+    CPPFLAGS="$CPPFLAGS" # $extra_libraries"
   fi
 
   OLDLIBS="$LIBS"
@@ -3110,7 +3110,7 @@
 
 else
   
-  comp_mode="-DDEBUG=1 -g3 -ggdb3"
+  comp_mode="-DDEBUG=1 -g3 -ggdb3 -fno-common -D__unix__ -D__DARWIN__"
   echo "$ac_t""enabled" 1>&6
 
 fi
@@ -3144,10 +3144,10 @@
 
 if test "$USE_BEOS" = "enabled"; then
 	objf_system='$(OBJF_BEOS)'
-	link_command='$(CXX) -fPIC -Wl,-rpath,$(TARGET_PREFIX) -nostart'
+	link_command='c++ $(x_libraries) $(extra_libraries)'
 else
 	objf_system='$(OBJF_UNIX)'
-	link_command='$(CXX) -shared -fPIC -Wl,-rpath,$(TARGET_PREFIX)'
+	link_command='c++ $(x_libraries) $(extra_libraries)'
 fi
 
 
diff -ruN ClanLib-0.5.4.orig/configure.in ClanLib-0.5.4/configure.in
--- ClanLib-0.5.4.orig/configure.in	Wed Jan 16 19:08:59 2002
+++ ClanLib-0.5.4/configure.in	Mon Mar 25 14:55:58 2002
@@ -50,11 +50,11 @@
 if test "$no_x" != "yes"; then
 	X11=enabled
 	if test "$x_includes" != ""; then
-		x_includes="-I $x_includes -I $x_includes/X11"
+		x_includes="-I$x_includes -I$x_includes/X11"
 	fi
 
 	if test "$x_libraries" != ""; then
-		x_libraries="-L $x_libraries"
+		x_libraries="-L$x_libraries"
 	fi
 
 	x_libraries="$x_libraries -lX11 -lXext"
@@ -145,14 +145,14 @@
     CPPFLAGS="$CPPFLAGS $x_includes"
   fi
   if test "x$x_libraries" != xNONE; then
-    CPPFLAGS="$CPPFLAGS $x_libraries"
+    CPPFLAGS="$CPPFLAGS" # $x_libraries"
   fi
   if test "x$extra_includes" != xNONE; then
 
 	CPPFLAGS="$CPPFLAGS $extra_includes"
   fi
   if test "x$extra_libraries" != xNONE; then
-    CPPFLAGS="$CPPFLAGS $extra_libraries"
+    CPPFLAGS="$CPPFLAGS" # $extra_libraries"
   fi
 
   OLDLIBS="$LIBS"
@@ -572,7 +572,7 @@
   fi
 ],
 [
-  comp_mode="-DDEBUG=1 -g3 -ggdb3"
+  comp_mode="-DDEBUG=1 -g3 -ggdb3 -fno-common -D__unix__ -D__DARWIN__"
   AC_MSG_RESULT([enabled])
 ])
 
@@ -605,10 +605,10 @@
 
 if test "$USE_BEOS" = "enabled"; then
 	objf_system='$(OBJF_BEOS)'
-	link_command='$(CXX) -fPIC -Wl,-rpath,$(TARGET_PREFIX) -nostart'
+	link_command='c++ $(x_libraries) $(extra_libraries)'
 else
 	objf_system='$(OBJF_UNIX)'
-	link_command='$(CXX) -shared -fPIC -Wl,-rpath,$(TARGET_PREFIX)'
+	link_command='c++ $(x_libraries) $(extra_libraries)'
 fi
 
 AC_SUBST(objf_system)
