Package: upclient
Version: 5.0b7
Revision: 1
Maintainer: Carsten Klapp <carstenklapp@users.sf.net>, Sylvain Cuaz <zauc@users.sf.net>
Depends: daemonic
Source: mirror:sourceforge:%n/%n-%v.tar.gz
Source-MD5: ad56ed3309ce2fadae1f2c0339a4bc80
SetCFLAGS: -DLOCALEPATH=\"%p/share/locale\"
SetLDFLAGS: -lintl
CompileScript: <<
 cd src; make darwin prefix=%p localedir=%p/share/locale
<<
InstallScript: <<
 cd src; make install destdir=%d prefix=%p
 cd src; make install-locales destdir=%d localedir=%p/share/locale
<<
ConfFiles: %p/etc/%n.conf
DaemonicFile: <<
<service>
 <description>upclient</description>
 <message>UpClient Daemon</message>
 <daemon name="upclient">
  <executable>%p/sbin/%n</executable>
  <parameters></parameters>
  <configfile>%p/etc/%n.conf</configfile>
  <pidfile>%p/var/run/%n.pid</pidfile>
 </daemon>
</service>
<<
PostInstScript: <<
# update init script if necessary
daemonic update %n
[ -f %p/etc/%n.conf.dpkg-old ] && echo "Note: UpClient has a new config file format as of 5.0b6. Copy and paste your old AuthKey key from %p/etc/%n.conf.dpkg-old into %p/etc/%n.conf."
<<
PreRmScript: <<
# clean up
[ -f %p/var/run/%n.pid ] && kill `cat %p/var/run/%n.pid`
if [ $1 != "upgrade" ]; then
  daemonic remove %n
fi
<<
Description: Collects system uptime and displays it at uptimes.wonko.com
DescDetail: <<
 UpClient sends the time a computer has been running since its last
 reboot to the Uptimes Project, and optionally sends cpu usage, idle
 percentage, OS and CPU detail. The server generates individual and
 aggregate statistics of various operating system and hardware
 configurations.
<<
DescUsage:<<
 1. Create a user here : <http://uptimes.wonko.com/newuser>
 2. Add a host, this gives you an auth key.
 3. Paste it into /sw/etc/upclient.conf
 4. Run 'daemonic enable upclient' as root, this will install a Startup Item.
 5. To start reporting your uptimes :
    a) either reboot (easy (-:)
    b) or else, if this is a first time installation (or if you know no
       instance of upclient is already running), run :
         sudo /Library/StartupItems/daemonic-upclient/daemonic-upclient start

 To suppress transmission logging in /var/log/system.log, add -q to
 /Library/StartupItems/daemonic-upclient/daemonic-upclient then kill
 upclient and start it again:

      # run the daemon
      /sw/sbin/upclient -q 

 To discontinue upclient, run " daemonic disable upclient " as
 root. This will not kill a running instance at this time. Reboot the
 machine to get rid of it, or run :
 " sudo kill `cat /sw/var/run/upclient.pid` ".
<<
DescPackaging:<<
 Set locations of files in compliance.
 Changes in 5.0b6:
 - New config file 
 - Gettext localization for de, nl, fr
<<
Homepage: http://upclient.sourceforge.net/
License: GPL
