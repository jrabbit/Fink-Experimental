diff -Naur esound-0.2.32-old/Makefile.in esound-0.2.32/Makefile.in
--- esound-0.2.32-old/Makefile.in	Wed Sep  3 12:26:10 2003
+++ esound-0.2.32/Makefile.in	Wed Nov  5 09:56:12 2003
@@ -169,7 +169,7 @@
 esdplay_SOURCES =  	$(getopt_src) 	esdplay.c
 
 
-LDADD = libesd.la $(AUDIOFILE_LIBS)
+LDADD = libesd.la $(AUDIOFILE_LIBS) -Wl,-framework -Wl,CoreAudio
 
 esd_LDADD = $(WRAP_LIB) $(LDADD)
 
diff -Naur esound-0.2.32-old/configure esound-0.2.32/configure
--- esound-0.2.32-old/configure	Wed Sep  3 12:25:37 2003
+++ esound-0.2.32/configure	Wed Nov  5 09:55:43 2003
@@ -10976,6 +10976,14 @@
 _ACEOF
 
       ;;
+   darwin*)
+      found_sound=yes
+      cat >> confdefs.h <<\EOF
+#define DRIVER_COREAUDIO 1
+EOF
+
+      SOUND_LIBS="-Wl,-framework -Wl,CoreAudio"
+      ;;
    esac
 
    if test "${ac_cv_header_dmedia_audio_h}" = "yes"; then
diff -Naur esound-0.2.32-old/esd.c esound-0.2.32/esd.c
--- esound-0.2.32-old/esd.c	Wed Sep  3 12:21:35 2003
+++ esound-0.2.32/esd.c	Wed Nov  5 09:55:43 2003
@@ -25,6 +25,13 @@
 /* max arguments (argc + tokenized esd.conf) can't be more than this */
 #define MAX_OPTS 128
 
+#if defined (__APPLE__)
+#include <mach/mach.h>
+#include <mach/thread_policy.h>
+#include <sys/param.h>
+#include <sys/sysctl.h>
+#endif
+
 /*******************************************************************/
 /* esd.c - prototypes */
 void set_audio_buffer( void *buf, esd_format_t format, int magl, int magr,
@@ -599,6 +606,29 @@
 
     int default_format = ESD_BITS16 | ESD_STEREO;
     /* end test scaffolding parameters */
+
+#if defined (__APPLE__)
+    /* get realtime priority */
+    {
+	struct thread_time_constraint_policy ttcpolicy;
+	int bus_speed, mib [2] = { CTL_HW, HW_BUS_FREQ };
+	size_t len;   
+
+	len = sizeof (bus_speed);
+	sysctl (mib, 2, &bus_speed, &len, NULL, 0);
+
+	/* Is it enough? */
+	ttcpolicy.period = bus_speed / 120;
+	ttcpolicy.computation = bus_speed / 2400;
+	ttcpolicy.constraint = bus_speed / 1200;
+	ttcpolicy.preemptible = 1;
+
+	thread_policy_set (mach_thread_self (),
+			   THREAD_TIME_CONSTRAINT_POLICY,
+			   (int*)&ttcpolicy,
+			   THREAD_TIME_CONSTRAINT_POLICY_COUNT);
+    }
+#endif
 
     programname = *argv;
 
diff -Naur esound-0.2.32-old/esd.conf esound-0.2.32/esd.conf
--- esound-0.2.32-old/esd.conf	Fri Jun 18 22:52:01 1999
+++ esound-0.2.32/esd.conf	Wed Nov  5 09:55:43 2003
@@ -1,4 +1,4 @@
 [esd]
 auto_spawn=1
 spawn_options=-terminate -nobeeps -as 2
-spawn_wait_ms=100
+spawn_wait_ms=999
diff -Naur esound-0.2.32-old/esd_config.c esound-0.2.32/esd_config.c
--- esound-0.2.32-old/esd_config.c	Fri Aug  1 09:44:12 2003
+++ esound-0.2.32/esd_config.c	Wed Nov  5 09:55:43 2003
@@ -9,7 +9,7 @@
 int esd_no_spawn=1; /* If we can't even find the system config file,
 		       things are screwed up - don't try to make things
 		       worse. */
-int esd_spawn_wait_ms=100; /* Time to wait trying to connect to an
+int esd_spawn_wait_ms=999; /* Time to wait trying to connect to an
 			      autospawned ESD, in milliseconds. */
 char esd_spawn_options[LINEBUF_SIZE] = "-terminate -nobeeps -as 2";
 
